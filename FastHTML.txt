### Minimal FastHTML Application Example

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Demonstrates a basic FastHTML application setup. It includes defining an app instance, a route with type-constrained parameters, and serving the application. The example highlights FastHTML's approach to routing, HTML generation using FastTags, and automatic server startup.

```python
# Meta-package with all key symbols from FastHTML and Starlette. Import it like this at the start of every FastHTML app.
from fasthtml.common import *
# The FastHTML app object and shortcut to `app.route`
app,rt = fast_app()

# Enums constrain the values accepted for a route parameter
name = str_enum('names', 'Alice', 'Bev', 'Charlie')

# Passing a path to `rt` is optional. If not passed (recommended), the function name is the route ('/foo')
# Both GET and POST HTTP methods are handled by default
# Type-annotated params are passed as query params (recommended) unless a path param is defined (which it isn't here)
@rt
def foo(nm: name):
    # `Title` and `P` here are FastTags: direct m-expression mappings of HTML tags to Python functions with positional and named parameters. All standard HTML tags are included in the common wildcard import.
    # When a tuple is returned, this returns concatenated HTML partials. HTMX by default will use a title HTML partial to set the current page name. HEAD tags (e.g. Meta, Link, etc) in the returned tuple are automatically placed in HEAD; everything else is placed in BODY.
    # FastHTML will automatically return a complete HTML document with appropriate headers if a normal HTTP request is received. For an HTMX request, however, just the partials are returned.
    return Title("FastHTML"), H1("My web app"), P(f"Hello, {name}!")
# By default `serve` runs uvicorn on port 5001. Never write `if __name__ == "__main__"` since `serve` checks it internally.
serve()

```

--------------------------------

### Setup WebSocket Route and Form

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Configures a web route for the homepage, including a form to send messages to a WebSocket endpoint.

```python
def mk_inp(): return Input(id='msg')

@rt('/')
async def get(request):
    cts = Div(
        Div(id='notifications'),
        Form(mk_inp(), id='form', ws_send=True),
        hx_ext='ws', ws_connect='/ws')
    return Titled('Websocket Test', cts)
```

--------------------------------

### Basic App Initialization with TestClient

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Initializes a FastHTML application and a TestClient for making requests to the app. This is a common setup for testing web applications built with FastHTML.

```python
from fasthtml.common import *
from starlette.testclient import TestClient

app = FastHTML()
cli = TestClient(app)
```

--------------------------------

### FasthT Initial Page Setup

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Sets up the main page for the image generation demo. It includes an input field for prompts, a button to submit, and a div to display generated images. This uses FasthT components and HTMX attributes for dynamic updates.

```python
import os
from fasthtml.common import *

# Assume 'generations' is a list storing prompts and 'generate_and_save' is defined elsewhere
gen = []

@app.get("/")
def get():
    inp = Input(id="new-prompt", name="prompt", placeholder="Enter a prompt")
    add = Form(Group(inp, Button("Generate")), hx_post="/", target_id='gen-list', hx_swap="afterbegin")
    gen_list = Div(id='gen-list')
    return Title('Image Generation Demo'), Main(H1('Magic Image Generation'), add, gen_list, cls='container')
```

--------------------------------

### FastHTML App Setup with Flexbox and Pico CSS

Source: https://www.fastht.ml/docs/tutorials/by_example.html

This Python code sets up a FastHTML web application, including linking both the Pico CSS framework and the Flexbox CSS grid library. It defines the main route '/' to render a page with a heading, a form for input, and a container for generated images laid out in a Flexbox row.

```python
gridlink = Link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/flexboxgrid/6.3.1/flexboxgrid.min.css", type="text/css")
app = FastHTML(hdrs=(picolink, gridlink))

# Main page
@app.get("/")
def get():
    inp = Input(id="new-prompt", name="prompt", placeholder="Enter a prompt")
    add = Form(Group(inp, Button("Generate")), hx_post="/", target_id='gen-list', hx_swap="afterbegin")
    gen_containers = [generation_preview(g) for g in gens(limit=10)] # Start with last 10
    gen_list = Div(*gen_containers[::-1], id='gen-list', cls="row") # flexbox container: class = row
    return Title('Image Generation Demo'), Main(H1('Magic Image Generation'), add, gen_list, cls='container')
```

--------------------------------

### Shorthand for GET Requests

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Demonstrates the use of shorthand decorators like @app.get for defining routes that specifically handle GET requests. This simplifies route definition for common HTTP methods.

```python
from fastai.basics import *
from fastai.text.all import *

app = Flask(__name__)

@app.get("/")
def my_function():
    return "Hello World from a GET request"

# To run this example, you would typically use:
# uvicorn main:app --reload
# Replace 'main' with the name of your Python file.
```

--------------------------------

### Install Starlette and Uvicorn

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Installs the Starlette framework and the Uvicorn ASGI server using pip. Ensure Python 3.8+ is installed.

```shell
pip3 install starlette
pip3 install uvicorn
```

--------------------------------

### FastHTML App Setup with Websockets

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Configures the FastHTML application to use Websockets for real-time communication, including handling client connections and disconnections. This is crucial for multiplayer functionality.

```python
app = FastHTML(hdrs=(picolink, gridlink, css, htmx_ws), exts='ws')

player_queue = []
async def update_players():
    for i, player in enumerate(player_queue):
        try: await player(Grid())
        except: player_queue.pop(i)
async def on_connect(send): player_queue.append(send)
async def on_disconnect(send): await update_players()

@app.ws('/gol', conn=on_connect, disconn=on_disconnect) # WebSocket route definition
async def ws(msg:str, send): pass

def Home(): return Title('Game of Life'), Main(gol, Div(Grid(), id='gol', cls='row center-xs'), hx_ext="ws", ws_connect="/gol")

@rt('/update')
async def put(x: int, y: int):
    grid[y][x] = 1 if grid[y][x] == 0 else 0
    await update_players()
```

--------------------------------

### Test FastHTML Web Application with Starlette TestClient

Source: https://www.fastht.ml/docs/tutorials/by_example.html

This example demonstrates how to test a FastHTML web application using Starlette's `TestClient`. It makes a GET request to the root URL and prints the HTML response text, allowing for programmatic verification of the application's output.

```python
from starlette.testclient import TestClient
client = TestClient(app)
r = client.get("/")
print(r.text)
```

--------------------------------

### Initialize FastApp

Source: https://www.fastht.ml/docs/ref/concise_guide.html

A minimal example of initializing a FastApp instance with FastHTML, which is the foundation for building web applications.

```python
from dataclasses import dataclass

app,rt = fast_app()
```

--------------------------------

### Surreal JS: Local File Installation

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Illustrates the method for installing Surreal.js by downloading the `surreal.js` file directly into a project and linking it via a script tag in the HTML's head.

```html
<script src="/surreal.js"></script>
```

--------------------------------

### Serve Static Files with FileResponse

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Provides an example of serving static files such as images and CSS using Starlette's `FileResponse`. The route is designed to capture file paths and extensions, mapping them to the `FileResponse` constructor.

```python
# For images, CSS, etc.
@app.get("/{fname:path}.{ext:static}")
def static(fname: str, ext: str):
  return FileResponse(f'{fname}.{ext}')
```

--------------------------------

### Install FastHTML using pip

Source: https://www.fastht.ml/docs/tutorials/e2e.html

This command installs the FastHTML library using pip, a Python package manager. It is compatible with Mac, Windows, and Linux operating systems.

```sh
pip install python-fasthtml
```

--------------------------------

### Handling Multiple HTTP Methods for a Route

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Defines how to handle different HTTP methods (GET, POST, PUT) for the same URL path. It showcases the flexibility of the @app.route decorator with the 'methods' argument.

```python
import uvicorn
from fastai.basics import *
from fastai.text.all import *

app = Flask(__name__)

@app.route("/", methods='get')
def home():
    return H1('Hello, World')

@app.route("/", methods=['post', 'put'])
def post_or_put():
    return "got a POST or PUT request"

# To run this example, you would typically use:
# uvicorn main:app --reload
# Replace 'main' with the name of your Python file.
```

--------------------------------

### Full Client and Server WebSocket Example in Python

Source: https://www.fastht.ml/docs/explains/websockets.html

A complete example of a FastHTML application with a WebSocket endpoint. It includes both the server-side setup for the WebSocket route and the client-side HTML structure to connect and interact with it. The server sends a greeting back to the client upon receiving a message.

```python
from fasthtml.common import *

app = FastHTML(exts='ws')
rt = app.route

@rt('/')
def get():
    cts = Div(
        Div(id='notifications'),
        Form(Input(id='msg'), id='form', ws_send=True),
        hx_ext='ws', ws_connect='/ws')
    return Titled('Websocket Test', cts)

@app.ws('/ws')
async def ws(msg:str, send):
    await send(Div('Hello ' + msg, id='notifications'))

serve()
```

--------------------------------

### Testing POST Request with curl

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Provides an example of how to test a POST request to a FastHTML application using the `curl` command-line tool. It shows the command structure for sending data to the server.

```shell
curl -X POST http://127.0.0.1:8000 -d "some data"
```

--------------------------------

### DaisyUI Chat Bubble HTML Example

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Provides an example of DaisyUI chat bubble components rendered in HTML, demonstrating different message alignments and content.

```html
<div class="chat chat-start">
  <div class="chat-image avatar">
    <div class="w-10 rounded-full">
      <img alt="Tailwind CSS chat bubble component" src="https://img.daisyui.com/images/stock/photo-1534528741775-53994a69daeb.jpg" />
    </div>
  </div>
  <div class="chat-header">
    Obi-Wan Kenobi
    <time class="text-xs opacity-50">12:45</time>
  </div>
  <div class="chat-bubble">You were the Chosen One!</div>
  <div class="chat-footer opacity-50">
    Delivered
  </div>
</div>
<div class="chat chat-end">
  <div class="chat-image avatar">
    <div class="w-10 rounded-full">
      <img alt="Tailwind CSS chat bubble component" src="https://img.daisyui.com/images/stock/photo-1534528741775-53994a69daeb.jpg" />
    </div>
  </div>
  <div class="chat-header">
    Anakin
    <time class="text-xs opacity-50">12:46</time>
  </div>
  <div class="chat-bubble">I hate you!</div>
  <div class="chat-footer opacity-50">
    Seen at 12:46
  </div>
</div>
```

--------------------------------

### Create a Basic FastHTML App

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Defines a simple FastHTML application that serves a 'Hello, World' HTML message at the root URL. It requires the `python-fasthtml` library. The app is then served using `uvicorn`.

```python
from fasthtml.common import FastHTML, serve

app = FastHTML()

@app.get("/")
def home():
    return "<h1>Hello, World</h1>"

serve()
```

--------------------------------

### Initialize FastHTML with WebSocket Extension

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Initializes a FastHTML application with the WebSocket extension enabled, allowing for WebSocket communication.

```python
app = FastHTML(exts='ws')
rt = app.route
```

--------------------------------

### Initialize FastHTML with Secret Key and Client

Source: https://www.fastht.ml/docs/ref/handlers.html

Shows the basic setup for a FastHTML application, including initializing the `FastHTML` class with a `secret_key` and creating a `Client` instance for making requests.

```python
app = FastHTML(secret_key='soopersecret')
cli = Client(app)
rt = app.route
```

--------------------------------

### WebSocket with Connection and Disconnection Handlers

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Sets up a WebSocket route with custom functions to handle client connections and disconnections.

```python
async def on_connect(send):
    print('Connected!')
    await send(Div('Hello, you have connected', id="notifications"))

async def on_disconnect(ws):
    print('Disconnected!')

@app.ws('/ws', conn=on_connect, disconn=on_disconnect)
async def ws(msg:str, send):
    await send(Div('Hello ' + msg, id="notifications"))
    await sleep(2)
    return Div('Goodbye ' + msg, id="notifications"), mk_inp()
```

--------------------------------

### FastHTML: Loading Tailwind and DaisyUI with a Single Message

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Demonstrates how to load Tailwind CSS and DaisyUI using FastHTML components and display a basic chat message structure.

```python
# Loading tailwind and daisyui
headers = (Script(src="https://cdn.tailwindcss.com"),
           Link(rel="stylesheet", href="https://cdn.jsdelivr.net/npm/daisyui@4.11.1/dist/full.min.css"))

# Displaying a single message
d = Div(
    Div("Chat header here", cls="chat-header"),
    Div("My message goes here", cls="chat-bubble chat-bubble-primary"),
    cls="chat chat-start"
)
```

--------------------------------

### HTMX Counter Example with FastHTML

Source: https://www.fastht.ml/docs/tutorials/by_example.html

A Python example using FastHTML to create a web page with a counter. A button triggers a POST request via HTMX to increment the counter, and the updated count is displayed on the page without a full refresh. It utilizes hx_post, hx_target, and hx_swap attributes for dynamic updates.

```python
app = FastHTML()

count = 0

@app.get("/")
def home():
    return Title("Count Demo"), Main(
        H1("Count Demo"),
        P(f"Count is set to {count}", id="count"),
        Button("Increment", hx_post="/increment", hx_target="#count", hx_swap="innerHTML")
    )

@app.post("/increment")
def increment():
    print("incrementing")
    global count
    count += 1
    return f"Count is set to {count}"
```

--------------------------------

### User Greeting API

Source: https://www.fastht.ml/docs/tutorials/by_example.html

This endpoint demonstrates how to capture a string from the path and use it in the response.

```APIDOC
## GET /user/{nm}

### Description
Greets the user by name, where the name is provided as a path parameter.

### Method
GET

### Endpoint
/user/{nm}

### Parameters
#### Path Parameters
- **nm** (str) - Required - The name of the user to greet.

### Response
#### Success Response (200)
- **string** - A greeting message including the provided name.

### Response Example
```
Good day to you, jph!
```
```

--------------------------------

### Accessing Client and Method Information in Starlette

Source: https://gist.githubusercontent.com/jph00/e91192e9bdc1640f5421ce3c904f2efb/raw/61a2774912414029edaf1a55b506f0e283b93c46/starlette-quick

Explains how to get the client's IP address and port using `request.client.host` and `request.client.port`. Also shows how to retrieve the request method (e.g., GET, POST) via `request.method`.

```python
# request.client.host: get client sock IP
# request.client.port: get client sock port
# request.method: GET, POST, etc.
```

--------------------------------

### Display HTML Page Object with FastHTML

Source: https://www.fastht.ml/docs/tutorials/by_example.html

This example shows how to directly display an HTML page object generated by FastHTML. The `show` function is used to render the HTML object, typically for previewing or debugging purposes within a Python environment.

```python
show(page)
```

--------------------------------

### Static File Access with Regex Matching

Source: https://www.fastht.ml/docs/tutorials/by_example.html

This endpoint shows how to use regular expressions to match file paths and extensions for static file retrieval.

```APIDOC
## GET /static/{path:path}/{fn}.{ext:imgext}

### Description
Retrieves a file with a specific name and extension from a given path, using regex for matching.

### Method
GET

### Endpoint
/static/{path:path}/{fn}.{ext:imgext}

### Parameters
#### Path Parameters
- **path** (str) - Required - The path to the directory containing the file.
- **fn** (str) - Required - The base name of the file.
- **ext** (str) - Required - The image extension of the file (e.g., ico, gif, jpg).

### Response
#### Success Response (200)
- **string** - A message indicating the file being retrieved and its path.

### Response Example
```
Getting jph.ico from /foo/
```
```

--------------------------------

### Testing POST Request with client

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Demonstrates how to test a POST request to a FastHTML application using a client library. It shows the code to send a POST request and retrieve the response text.

```python
client.post("/").text
```

--------------------------------

### Example User dataclass instance

Source: https://www.fastht.ml/docs/explains/minidataapi.html

An example instantiation of the User dataclass, populated with sample data. Note the 'pwd' field is UNSET.

```python
User(name='Braden', email='b@example.com', year_started=2018)
```

--------------------------------

### Browser-based Syntax Highlighting

Source: https://www.fastht.ml/docs/apilist.txt

Implements client-side syntax highlighting using JavaScript. It supports specifying multiple languages, and provides options for light and dark themes. An example is available in the quickstart tutorial.

```python
def HighlightJS(sel, langs, light=None, dark=None):
    """Implements browser-based syntax highlighting. Usage example [here](/tutorials/quickstart_for_web_devs.html#code-highlighting)."""
    pass
```

--------------------------------

### Integer Parameter with Default Value

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Illustrates defining an integer path parameter with a default value. If the parameter is not provided in the request, the default value is used. This example uses a list to simulate a database.

```python
fake_db = [{"name": "Foo"}, {"name": "Bar"}]

@app.get("/items/")
def read_item(idx: int = 0): return fake_db[idx]

print(cli.get('/items/?idx=1').text)
```

--------------------------------

### Set and Get Cookies with Starlette Response

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Demonstrates setting an HTTP cookie using Starlette's Response object and retrieving it in a subsequent request. The cookie value is stored as a string representation of the current datetime.

```python
from datetime import datetime

@app.get("/setcookie")
def setc(req):
    now = datetime.now()
    res = Response(f'Set to {now}')
    res.set_cookie('now', str(now))
    return res

cli.get('/setcookie').text
```

```python
@app.get("/getcookie")
def getc(now:parsed_date): return f'Cookie was set at time {now.time()}'

cli.get('/getcookie').text
```

--------------------------------

### FastHTML Route-Specific and App-Level Beforeware Example

Source: https://www.fastht.ml/docs/explains/routes.html

Illustrates how to implement both app-level and route-level beforeware using decorators. App-level beforeware runs for all requests, while route-level decorators provide specific execution logic before the route handler.

```python
def app_beforeware():
    print('App level beforeware')

app = FastHTML(before=Beforeware(app_beforeware))
client = TestClient(app)

def route_beforeware(f):
    @wraps(f)
    async def decorator(*args, **kwargs):
        print('Route level beforeware')
        return await f(*args, **kwargs)
    return decorator
    
def second_route_beforeware(f):
    @wraps(f)
    async def decorator(*args, **kwargs):
        print('Second route level beforeware')
        return await f(*args, **kwargs)
    return decorator

@app.get("/users")
@route_beforeware
@second_route_beforeware
async def users():
    return "Users Page"

client.get('/users').text
```

--------------------------------

### Data Handling with Dataclass and Path Parameter

Source: https://www.fastht.ml/docs/tutorials/by_example.html

This endpoint demonstrates how to receive a path parameter and a request body matching a dataclass structure.

```APIDOC
## POST /bodie/{nm}

### Description
Receives a name from the path and a JSON body conforming to the Bodie dataclass, returning a combined dictionary.

### Method
POST

### Endpoint
/bodie/{nm}

### Parameters
#### Path Parameters
- **nm** (str) - Required - A name string to be included in the response.

#### Request Body
- **data** (Bodie) - Required - A JSON object with the following structure:
  - **a** (int) - Required
  - **b** (str) - Required

### Response
#### Success Response (200)
- **object** - A dictionary containing the path parameter 'nm' and the fields from the request body.

### Response Example
```json
{"a":1,"b":"foo","nm":"me"}
```
```

--------------------------------

### Deploy to Railway using fh_railway_deploy script

Source: https://www.fastht.ml/docs/tutorials/by_example.html

This script automates the deployment of a FastHTML application to Railway. It handles linking to existing projects or creating new ones, deploys the code, displays logs, and maps a persistent `/app/data` folder. Secrets can be managed via Railway's 'Variables' section.

```bash
fh_railway_deploy MY_APP_NAME
```

--------------------------------

### Initialize FastHTML App and Client

Source: https://www.fastht.ml/docs/ref/handlers.html

Initializes a FastHTML application instance and a Client for making requests. This setup is foundational for testing API endpoints.

```python
app = FastHTML()
rt = app.route
cli = Client(app)
```

--------------------------------

### Implement middleware using BaseHTTPMiddleware

Source: https://gist.githubusercontent.com/jph00/e91192e9bdc1640f5421ce3c904f2efb/raw/61a2774912414029edaf1a55b506f0e283b93c46/starlette-quick

This Python example shows how to create middleware by inheriting from `starlette.middleware.base.BaseHTTPMiddleware`. The `dispatch` method allows for logic execution before and after the main request handling, such as adding custom headers to the response.

```python
from starlette.middleware.base import BaseHTTPMiddleware, Request, Response

class CustomHeaderMiddleware(BaseHTTPMiddleware):
    async def dispatch(self, request: Request, call_next):
        # Logic before passing request to the next middleware/endpoint
        response: Response = await call_next(request)
        # Logic after the next middleware/endpoint has responded
        response.headers['X-Author'] = 'John'
        return response
```

--------------------------------

### Route with Path Parameter using @app.get

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Shows how to define a route with a path parameter using the @app.get decorator. It demonstrates capturing a string parameter from the URL and using it in the response.

```python
from fastai.basics import *
from fastai.text.all import *

app = Flask(__name__)

@app.get("/greet/{nm}")
def greet(nm:str):
    return f"Good day to you, {nm}!"

# To test, you would use:
# client.get("/greet/Dave").text
# Expected output: 'Good day to you, Dave!'
```

--------------------------------

### Date Parameter Parsing in FastHTML

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Shows how FastHTML can parse date strings from query parameters into `datetime` objects using the `parsed_date` type hint. The example demonstrates a specific date format.

```python
@app.get("/datie/")
def datie(d:parsed_date): return d

date_str = "17th of May, 2024, 2p"
print(cli.get(f'/datie/?d={date_str}').text)
```

--------------------------------

### Build a Web Application with FastHTML and Starlette

Source: https://www.fastht.ml/docs/tutorials/by_example.html

This snippet illustrates how to build a basic web application using FastHTML and integrates with Starlette. It defines a root endpoint that returns a dynamically generated HTML page, demonstrating the seamless integration of FastHTML within a web framework context.

```python
from fasthtml.common import *
app = FastHTML()

@app.get("/")
def home():
    page = Html(
        Head(Title('Some page')),
        Body(Div('Some text, ', A('A link', href='https://example.com'), Img(src="https://placehold.co/200"), cls='myclass')))
    return page

serve()
```

--------------------------------

### Set and Get Cookies in Python

Source: https://www.fastht.ml/docs/ref/handlers.html

This example shows how to set a cookie named 'now' with the current datetime and retrieve it later. It utilizes the `cookie()` function to create the cookie and FastHTML's routing to manage requests.

```python
@rt("/setcookie")
def get(): return cookie('now', datetime.now())

@rt("/getcookie")
def get(now:parsed_date): return f'Cookie was set at time {now.time()}'

print(cli.get('/setcookie').text)
time.sleep(0.01)
cli.get('/getcookie').text
```

--------------------------------

### Start Uvicorn Server in Jupyter

Source: https://www.fastht.ml/docs/tutorials/jupyter_and_fasthtml.html

Initializes and starts a Uvicorn server within the Jupyter environment using JupyUvi. This allows the FastHTML application to run in a separate thread, enabling normal HTTP client functions within the notebook.

```python
server = JupyUvi(app)
```

--------------------------------

### FastHTML Web App with Multiple Pages and Form Handling

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Illustrates building a multi-page web application using FastHTML. It includes routing for different pages, displaying messages, and handling form submissions to add new messages.

```python
app = FastHTML()
messages = ["This is a message, which will get rendered as a paragraph"]

@app.get("/")
def home():
    return Main(H1('Messages'), 
                * [P(msg) for msg in messages],
                A("Link to Page 2 (to add messages)", href="/page2"))

@app.get("/page2")
def page2():
    return Main(P("Add a message with the form below:"),
                Form(Input(type="text", name="data"),
                     Button("Submit"),
                     action="/", method="post"))

@app.post("/")
def add_message(data:str):
    messages.append(data)
    return home()
```

--------------------------------

### Display Image Generation Preview (Python)

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Renders a card displaying an image and its prompt if the image exists, otherwise shows a 'generating' status with a periodic update trigger. Relies on os module for file existence checks and fasthtml components for rendering.

```python
import os
from fasthtml.common import Div, Card, Img, P, B

def generation_preview(g):
    grid_cls = "box col-xs-12 col-sm-6 col-md-4 col-lg-3"
    image_path = f"{g.folder}/{g.id}.png"
    if os.path.exists(image_path):
        return Div(Card(
                       Img(src=image_path, alt="Card image", cls="card-img-top"),
                       Div(P(B("Prompt: "), g.prompt, cls="card-text"),cls="card-body"),
                   ), id=f'gen-{g.id}', cls=grid_cls)
    return Div(f"Generating gen {g.id} with prompt {g.prompt}", 
            id=f'gen-{g.id}', hx_get=f"/gens/{g.id}", 
            hx_trigger="every 2s", hx_swap="outerHTML", cls=grid_cls)
```

--------------------------------

### FileResponse API

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Details the FileResponse class for asynchronously streaming files. It explains the instantiation arguments and provides a basic usage example.

```APIDOC
## FileResponse

### Description
Asynchronously streams a file as the response. Allows configuration of path, headers, media type, filename, and content disposition.

### Instantiation Arguments

*   `path` (str): The filepath to the file to stream.
*   `headers` (dict): Any custom headers to include.
*   `media_type` (str): The media type of the file. If unset, it's inferred from the filename.
*   `filename` (str): If set, this will be included in the response `Content-Disposition` header.
*   `content_disposition_type` (str): Sets the `Content-Disposition` type, defaults to "attachment". Can be "inline" or "attachment".

### Behavior
File responses automatically include `Content-Length`, `Last-Modified`, and `ETag` headers.

### Example Usage
```python
from starlette.responses import FileResponse


async def app(scope, receive, send):
    assert scope['type'] == 'http'
    response = FileResponse('statics/favicon.ico')
    await response(scope, receive, send)
```
```

--------------------------------

### Include PicoCSS in HTML Header

Source: https://www.fastht.ml/docs/tutorials/by_example.html

This snippet shows the standard HTML method of linking an external CSS file, specifically PicoCSS, within the `<header>` tag.

```html
<header>
    ...
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@latest/css/pico.min.css">
</header>
```

--------------------------------

### Set Custom Page Title and Content in FastHTML

Source: https://www.fastht.ml/docs/tutorials/by_example.html

This snippet shows how to customize the page title and content in a FastHTML application. By returning a `Title` object before other content elements, you can set a specific title for the HTML page. The example also includes setting metadata and loading external scripts.

```python
app = FastHTML()

@app.get("/")
def home():
    return Title("Page Demo"), Div(H1('Hello, World'), P('Some text'), P('Some more text'))

client = TestClient(app)
print(client.get("/").text)
```

--------------------------------

### Simulate a GET Request and Access Response Text

Source: https://www.fastht.ml/docs/ref/handlers.html

Uses the test client to send a GET request to the '/hi' route and retrieves the response body as text. This verifies the handler's output.

```python
cli.get('/hi').text
```

--------------------------------

### Enum Parameter Handling in FastHTML

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Shows how to use enums for route parameters, ensuring that only specified values are accepted. The example uses a string enum for model names and demonstrates handling a valid enum value.

```python
ModelName = str_enum('ModelName', "alexnet", "resnet", "lenet")

@app.get("/models/{nm}")
def model(nm:ModelName): return nm

print(cli.get('/models/alexnet').text)
```

--------------------------------

### Initialize FastHTML App with SQLite Database and Room Dataclass

Source: https://www.fastht.ml/docs/tutorials/e2e.html

Initializes a FastHTML application with a SQLite database, defining a 'rooms' table and a 'Room' dataclass. It demonstrates two ways: directly using the database and dataclass, or using the `fast_app` utility for a concise setup. The `render` function converts the dataclass to HTML.

```python
db = database('data/drawapp.db')
rooms = db.t.rooms
if rooms not in db.t:
    rooms.create(id=int, name=str, created_at=str, pk='id')
Room = rooms.dataclass()
```

```python
def render(room):
    return Li(A(room.name, href=f"/rooms/{room.id}"))

app,rt,rooms,Room = fast_app('data/drawapp.db', render=render, id=int, name=str, created_at=str, pk='id')
```

--------------------------------

### FastHTML PicoCSS Component and Custom Styling

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Demonstrates using FastHTML's `picolink` component for PicoCSS and applying custom CSS styles to override default PicoCSS settings, such as font size and family.

```python
print(to_xml(picolink))
```

```python
from fasthtml.common import *
css = Style(':root {--pico-font-size:90%,--pico-font-family: Pacifico, cursive;}')
app = FastHTML(hdrs=(picolink, css))
```

```python
@app.route("/")
def get():
    return (Title("Hello World"), 
            Main(H1('Hello, World'), cls="container"))
```

--------------------------------

### Model Selection API

Source: https://www.fastht.ml/docs/tutorials/by_example.html

This endpoint allows users to select a machine learning model by specifying its name, with type checking using an enum.

```APIDOC
## GET /models/{nm}

### Description
Retrieves a model by its name. The name must be one of the allowed model types (alexnet, resnet, lenet).

### Method
GET

### Endpoint
/models/{nm}

### Parameters
#### Path Parameters
- **nm** (ModelName) - Required - The name of the model to retrieve. Must be one of: 'alexnet', 'resnet', 'lenet'.

### Response
#### Success Response (200)
- **string** - The name of the selected model.

### Response Example
```
alexnet
```
```

--------------------------------

### Handle WebSocket Messages

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Defines a WebSocket endpoint that receives messages, sends a response, and returns updated content.

```python
@app.ws('/ws')
async def ws(msg:str, send):
    await send(Div('Hello ' + msg, id="notifications"))
    await sleep(2)
    return Div('Goodbye ' + msg, id="notifications"), mk_inp()
```

--------------------------------

### Surreal JS: CDN Installation

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Shows how to include the Surreal.js library in an HTML document using a CDN link, making its functionalities available globally.

```html
<script src="https://cdnjs.cloudflare.com/ajax/libs/surreal/1.3.2/surreal.js"></script>
```

--------------------------------

### Basic HTTP Request with TestClient

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Demonstrates making a basic GET request to an ASGI application using Starlette's TestClient and httpx. It asserts the response status code.

```python
from starlette.responses import HTMLResponse
from starlette.testclient import TestClient


async def app(scope, receive, send):
    assert scope['type'] == 'http'
    response = HTMLResponse('<html><body>Hello, world!</body></html>')
    await response(scope, receive, send)


def test_app():
    client = TestClient(app)
    response = client.get('/')
    assert response.status_code == 200
```

--------------------------------

### Define a Basic GET Handler

Source: https://www.fastht.ml/docs/ref/handlers.html

A simple handler function that responds to GET requests at the '/hi' route with a plain string message. This showcases the basic functionality of returning string responses.

```python
@rt("/hi")
def get(): return 'Hi there'
```

--------------------------------

### Applying Middleware in Starlette (Python)

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Illustrates how to apply middleware like `TrustedHostMiddleware` and `HTTPSRedirectMiddleware` to a Starlette application. This example requires importing `Starlette`, `Middleware`, and the specific middleware classes. It configures allowed hosts and enforces HTTPS.

```python
from starlette.applications import Starlette
from starlette.middleware import Middleware
from starlette.middleware.httpsredirect import HTTPSRedirectMiddleware
from starlette.middleware.trustedhost import TrustedHostMiddleware

routes = ...

# Ensure that all requests include an 'example.com' or
# '*.example.com' host header, and strictly enforce https-only access.
middleware = [
    Middleware(
        TrustedHostMiddleware,
        allowed_hosts=['example.com', '*.example.com'],
    ),
    Middleware(HTTPSRedirectMiddleware)
]

app = Starlette(routes=routes, middleware=middleware)
```

--------------------------------

### FastLite to FastSQL Database Connection Example

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Demonstrates switching between database implementations (FastLite with SQLite and FastSQL with PostgreSQL) by changing import and connection lines, highlighting the compatibility provided by the MiniDataAPI specification.

```python
from fastlite import *
db = database('test.db')
```

```python
from fastsql import *
db = Database('postgres:...')
```

--------------------------------

### Item Retrieval API with Integer Query Parameter

Source: https://www.fastht.ml/docs/tutorials/by_example.html

This endpoint retrieves an item from a list using an integer index provided as a query parameter, with a default value.

```APIDOC
## GET /items/

### Description
Retrieves an item from a predefined list using an index specified in the query parameters. Defaults to index 0 if not provided.

### Method
GET

### Endpoint
/items/

### Parameters
#### Query Parameters
- **idx** (int) - Optional - The index of the item to retrieve. Defaults to 0.

### Response
#### Success Response (200)
- **object** - The item at the specified index, containing a 'name' field.

### Response Example
```json
{"name":"Bar"}
```
```

--------------------------------

### Handling HTTP Methods with Starlette Routes

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Shows how to specify allowed HTTP methods (e.g., GET, POST) for a particular route endpoint. By default, function endpoints only handle GET requests unless specified otherwise.

```python
from starlette.routing import Route


# Specify allowed methods for a route
Route('/users/{user_id:int}', user, methods=["GET", "POST"])
```

--------------------------------

### Starlette as an ASGI Toolkit

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

An example of using Starlette as a low-level ASGI toolkit, directly handling the ASGI scope, receive, and send arguments. It returns a plain text response.

```python
from starlette.responses import PlainTextResponse


async def app(scope, receive, send):
    assert scope['type'] == 'http'
    response = PlainTextResponse('Hello, world!')
    await response(scope, receive, send)
```

--------------------------------

### FasthT Generation Preview and Handling

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Defines the logic for displaying generation previews and handling POST requests for generation updates. It checks for existing images, shows a 'Generating...' message with polling, or displays the final image. This utilizes FasthT components and HTMX attributes for polling and swapping content.

```python
def generation_preview(id):
    if os.path.exists(f"gens/{id}.png"):
        return Div(Img(src=f"/gens/{id}.png"), id=f'gen-{id}')
    else:
        return Div("Generating...", id=f'gen-{id}', 
                   hx_post=f"/generations/{id}",
                   hx_trigger='every 1s', hx_swap='outerHTML')
    
@app.post("/generations/{id}")
def get(id:int): return generation_preview(id)

@app.post("/")
def post(prompt:str):
    id = len(generations)
    generate_and_save(prompt, id)
    generations.append(prompt)
    clear_input =  Input(id="new-prompt", name="prompt", placeholder="Enter a prompt", hx_swap_oob='true')
    return generation_preview(id), clear_input

@threaded
def generate_and_save(prompt, id): ... 
```

--------------------------------

### Setup GitHubAppClient in FastHTML

Source: https://www.fastht.ml/docs/explains/oauth.html

Initializes the `GitHubAppClient` with your GitHub application's client ID and client secret. This client is responsible for direct communication with GitHub for OAuth operations.

```python
client = GitHubAppClient(
    client_id="your_client_id",
    client_secret="your_client_secret"
)
```

--------------------------------

### Default Integer Parameter Usage

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Shows the usage of the default integer parameter when no query parameter is provided. This is equivalent to using the default value defined in the route function.

```python
# Equivalent to `/items/?idx=0`.
print(cli.get('/items/').text)
```

--------------------------------

### Working with Router Instances

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Shows how to use a `Router` instance directly for defining routes without necessarily creating a full `Starlette` application, useful for lightweight routing.

```APIDOC
## Working with Router Instances

### Description
Utilize the `Router` class directly to manage routing logic, providing a lightweight ASGI application focused solely on request dispatching without the overhead of a full `Starlette` application.

### Method
`app = Router(routes=[...])`

### Endpoint
N/A (Defines the routing structure)

### Parameters
*   **routes** (list) - Required - A list of `Route`, `Mount`, or `WebSocketRoute` objects defining the application's endpoints.

### Request Example
```python
app = Router(routes=[
    Route('/', homepage),
    Mount('/users', routes=[
        Route('/', users, methods=['GET', 'POST']),
        Route('/{username}', user),
    ]),
])
```

### Response
N/A (Creates a Router instance)
```

--------------------------------

### Access User Agent Header

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Shows how to access the User-Agent header from an incoming request. The header name 'User-Agent' is mapped to the 'user_agent' argument, converting '-' to '_' and lowercasing.

```python
@app.get("/ua")
async def ua(user_agent:str): return user_agent

cli.get('/ua', headers={'User-Agent':'FastHTML'}).text
```

--------------------------------

### Example Python Route in FastHTMl

Source: https://www.fastht.ml/docs/tutorials/e2e.html

This Python code snippet demonstrates a basic route handler in FastHTMl for loading room data. It fetches room data based on an ID and returns canvas data.

```python
return "Canvas saved successfully"

@rt("/rooms/{id}/load")
async def get(id:int):
    room = rooms[id]
    return room.canvas_data if room.canvas_data else "{}"
```

--------------------------------

### Benchmarking with console.time() and console.timeEnd()

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Shows how to use console.time() to start a timer and console.timeEnd() to stop and log the elapsed time for a specific operation.

```javascript
console.time('name')
console.timeEnd('name')
```

--------------------------------

### Mount Books API in Main App and Link

Source: https://www.fastht.ml/docs/explains/routes.html

This snippet demonstrates mounting the previously defined books application into a main application. It includes examples of linking to the books list, both by direct path and by using a named URL route, which is recommended for maintainability.

```python
from books import books_app
from fast_app import fast_app, uri
from fast_html import Titled, P, A, Hr
from starlette.routing import Mount

app, rt = fast_app(routes=[Mount("/books", books_app, name="books")])

@rt("/")
def get():
    return Titled("Dashboard",
        P(A(href="/books")("Books")),
        Hr(),
        P(A(link=uri("books:list"))("Books"))
    )

serve()
```

--------------------------------

### Initialize FastHTML App and Router

Source: https://www.fastht.ml/docs/tutorials/jupyter_and_fasthtml.html

Sets up a new FastHTML application instance and its associated router. The `pico=True` argument suggests enabling a lightweight mode for the application.

```python
app, rt = fast_app(pico=True)
```

--------------------------------

### Create Basic HTML Page Structure with FastHTML

Source: https://www.fastht.ml/docs/tutorials/by_example.html

This snippet demonstrates how to create a simple HTML page using FastHTML's common tags. It shows the creation of a full HTML document with a head, title, and body containing text, a link, and an image, all generated from Python objects.

```python
from fasthtml.common import *
page = Html(
    Head(Title('Some page')),
    Body(Div('Some text, ', A('A link', href='https://example.com'), Img(src="https://placehold.co/200"), cls='myclass')))
print(to_xml(page))
```

--------------------------------

### Path Object Parameter Handling in FastHTML

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Demonstrates how FastHTML can automatically cast path parameters to `Path` objects, allowing for easy manipulation like adding suffixes to file paths.

```python
@app.get("/files/{path}")
def txt(path: Path): return path.with_suffix('.txt')

print(cli.get('/files/foo').text)
```

--------------------------------

### File Path Manipulation API

Source: https://www.fastht.ml/docs/tutorials/by_example.html

This endpoint demonstrates casting a path parameter to a Path object and adding a file suffix.

```APIDOC
## GET /files/{path}

### Description
Processes a given path, appends a '.txt' suffix, and returns the modified path.

### Method
GET

### Endpoint
/files/{path}

### Parameters
#### Path Parameters
- **path** (Path) - Required - The input path string.

### Response
#### Success Response (200)
- **string** - The modified path with a '.txt' suffix.

### Response Example
```
foo.txt
```
```

--------------------------------

### Boolean Status API

Source: https://www.fastht.ml/docs/tutorials/by_example.html

This endpoint demonstrates handling boolean query parameters, accepting various truthy and falsy string representations.

```APIDOC
## GET /booly/

### Description
Indicates a status based on a boolean query parameter 'coming'. Accepts 'true'/'false', 'yes'/'no', etc.

### Method
GET

### Endpoint
/booly/

### Parameters
#### Query Parameters
- **coming** (bool) - Optional - A boolean value indicating status. Defaults to True.

### Response
#### Success Response (200)
- **string** - A message indicating whether the status is 'Coming' or 'Not coming'.

### Response Example
```
Coming
```
```

--------------------------------

### FastHTML Hello World App

Source: https://www.fastht.ml/docs/tutorials/e2e.html

A basic Python script using FastHTML to create a web server that responds with 'Hello, world!' to requests at the root URL. It requires the 'fasthtml.common' library and involves running the script and accessing a provided link in a web browser.

```python
from fasthtml.common import *

app = FastHTML()
rt = app.route

@rt('/')
def get():
    return 'Hello, world!'

serve()
```

--------------------------------

### Boolean Parameter Handling in FastHTML

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Demonstrates how boolean query parameters are handled in FastHTML. The route accepts various string representations of 'true' and 'false' to determine the boolean value.

```python
@app.get("/booly/")
def booly(coming:bool=True): return 'Coming' if coming else 'Not coming'

print(cli.get('/booly/?coming=true').text)
```

--------------------------------

### Dataclass Parameter Matching in FastHTML

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Demonstrates how FastHTML can match request data to a dataclass. The route expects JSON data in the request body that conforms to the `Bodie` dataclass structure.

```python
from dataclasses import dataclass, asdict

@dataclass
class Bodie:
    a:int;b:str

@app.route("/bodie/{nm}")
def post(nm:str, data:Bodie):
    res = asdict(data)
    res['nm'] = nm
    return res

cli.post('/bodie/me', data=dict(a=1, b='foo')).text
```

--------------------------------

### Minimal FastHTML App with MonsterUI

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Demonstrates setting up a basic FastHTML application using the MonsterUI library. It shows how to apply a theme, enable code highlighting, and render a simple card with social links.

```python
from fasthtml.common import *
from monsterui.all import *

app, rt = fast_app(hdrs=Theme.blue.headers(highlightjs=True)) # Use MonsterUI blue theme and highlight code in markdown

@rt
def index():
    socials = (('github','https://github.com/AnswerDotAI/MonsterUI'),)
    return Titled("App",
        Card(
            P("App", cls=TextPresets.muted_sm),
            # LabelInput, DivLAigned, and UkIconLink are non-semantic MonsterUI FT Components,
            LabelInput('Email', type='email', required=True),
            footer=DivLAligned(*[UkIconLink(icon,href=url) for icon,url in socials])))

```

--------------------------------

### Regex Path Matching with Custom Parameter Types

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Illustrates using regular expressions to match path segments and defining custom parameter types like 'imgext' for file extensions. This allows for more specific route matching.

```python
reg_re_param("imgext", "ico|gif|jpg|jpeg|webm")

@app.get(r'/static/{path:path}/{fn}.{ext:imgext}')
def get_img(fn:str, path:str, ext:str): return f"Getting {fn}.{ext} from /{path}"

cli.get('/static/foo/jph.ico').text
```

--------------------------------

### FastApp Convenience Wrapper

Source: https://www.fastht.ml/docs/apilist.txt

A convenience function for creating a FastHTML or FastHTMLWithLiveReload application. It simplifies the setup process by accepting a database file, rendering function, and various configuration options.

```python
def fast_app(db_file, render, hdrs=None, ftrs=None, tbls=None, before=None, middleware=None, live=False, debug=False, title='FastHTML', routes=None, exception_handlers=None, on_startup=None, on_shutdown=None, lifespan=None, default_hdrs=None, pico=False, surreal=None, htmx=None, exts=None, canonical=None, secret_key=None, key_fname='keys.json', session_cookie='session', max_age=14*24*60*60, sess_path='/', same_site='lax', sess_https_only=False, sess_domain=None, htmlkw=None, bodykw=None, reload_attempts=None, reload_interval=None, static_path=None, body_wrap=None, nb_hdrs=None, **kwargs):
    """Create a FastHTML or FastHTMLWithLiveReload app."""
    pass
```

--------------------------------

### Date Parsing API

Source: https://www.fastht.ml/docs/tutorials/by_example.html

This endpoint accepts a date string in a human-readable format and parses it into a datetime object.

```APIDOC
## GET /datie/

### Description
Parses a date string provided in the query parameter 'd' into a datetime object.

### Method
GET

### Endpoint
/datie/

### Parameters
#### Query Parameters
- **d** (parsed_date) - Required - The date string to parse (e.g., '17th of May, 2024, 2p').

### Response
#### Success Response (200)
- **string** - The parsed date and time in 'YYYY-MM-DD HH:MM:SS' format.

### Response Example
```
2024-05-17 14:00:00
```
```

--------------------------------

### Falsy Boolean Parameter Handling

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Illustrates handling a 'falsy' value for a boolean query parameter in FastHTML. The route correctly interprets 'no' as false and returns the corresponding response.

```python
print(cli.get('/booly/?coming=no').text)
```

--------------------------------

### Path Parameter Handling in FastHTML

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Demonstrates how to capture path parameters in FastHTML routes. The captured parameter 'nm' is used in the response string. It also shows how to test this route using TestClient.

```python
@app.get('/user/{nm}')
def _(nm:str): return f"Good day to you, {nm}!"

cli.get('/user/jph').text
```

--------------------------------

### hx-get: Issue GET Request

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-get` attribute issues an HTTP GET request to a specified URL. This is a fundamental attribute for fetching content from a server without a full page reload.

```html
<button hx-get="/url" hx-target="#result">Load Content</button>
```

--------------------------------

### Alternative FastHTML Route Definition using app.route

Source: https://www.fastht.ml/docs/explains/routes.html

Shows an alternative way to define routes using `app.route`, where the function name dictates the HTTP method. This example defines a POST route and tests it.

```python
rt = app.route

@rt('/')
def post(): return "Going postal!"

client.post('/').text
```

--------------------------------

### Schedule multiple asynchronous tasks to run in the background

Source: https://gist.githubusercontent.com/jph00/e91192e9bdc1640f5421ce3c904f2efb/raw/61a2774912414029edaf1a55b506f0e283b93c46/starlette-quick

This Python example shows how to queue multiple asynchronous tasks to be executed after the HTTP response is delivered. It uses `starlette.background.BackgroundTasks` to add several functions (`task1`, `task2`) with their respective arguments.

```python
from starlette.background import BackgroundTasks
from starlette.responses import Response

async def task1(name):
    print(f"Task 1 executed with name: {name}")
    pass

async def task2(email):
    print(f"Task 2 executed with email: {email}")
    pass

async def handler(request):
    tasks = BackgroundTasks()
    tasks.add_task(task1, name="John")
    tasks.add_task(task2, email="info@example.com")
    content = ""
    return Response(content, background=tasks)
```

--------------------------------

### Get and set attributes using 'attribute'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'attribute' (or 'attributes', 'attr') function can get, set, or remove attributes on elements. For multiple elements, use '.run()' or '.forEach()'. Setting an attribute to null removes it.

```javascript
me().attribute('data-x')
me().attribute('data-x', true)
me().attribute({ 'data-x':'yes', 'data-y':'no' })
me().attribute('data-x', null)
me().attribute({ 'data-x': null, 'data-y':null })
```

--------------------------------

### GET /user/{nm}

Source: https://www.fastht.ml/docs/ref/handlers.html

Defines a route that accepts a 'nm' path parameter and returns a personalized greeting.

```APIDOC
## GET /user/{nm}

### Description
This endpoint greets a user by name, using a path parameter for the name.

### Method
GET

### Endpoint
/user/{nm}

### Parameters
#### Path Parameters
- **nm** (str) - Required - The name of the user to greet.

### Request Example
```
GET /user/Alexis
```

### Response
#### Success Response (200)
- **body** (str) - A greeting message.

#### Response Example
```
Good day to you, Alexis!
```
```

--------------------------------

### Starlette Application with Multiple Routes and Static Files

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

A more comprehensive Starlette application demonstrating multiple HTTP routes, a WebSocket route, mounting static files, and defining startup events. It uses `Starlette`, `Route`, `WebSocketRoute`, and `Mount`.

```python
from starlette.applications import Starlette
from starlette.responses import PlainTextResponse
from starlette.routing import Route, Mount, WebSocketRoute
from starlette.staticfiles import StaticFiles


def homepage(request):
    return PlainTextResponse('Hello, world!')

def user_me(request):
    username = "John Doe"
    return PlainTextResponse('Hello, %s!' % username)

def user(request):
    username = request.path_params['username']
    return PlainTextResponse('Hello, %s!' % username)

async def websocket_endpoint(websocket):
    await websocket.accept()
    await websocket.send_text('Hello, websocket!')
    await websocket.close()

def startup():
    print('Ready to go')


routes = [
    Route('/', homepage),
    Route('/user/me', user_me),
    Route('/user/{username}', user),
    WebSocketRoute('/ws', websocket_endpoint),
    Mount('/static', StaticFiles(directory="static")),
]

app = Starlette(debug=True, routes=routes, on_startup=[startup])
```

--------------------------------

### Define a basic HTTPEndpoint in Python

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Demonstrates how to create a simple HTTPEndpoint subclass in Starlette to handle GET requests and return a plain text response. It requires the `starlette.responses` and `starlette.endpoints` modules.

```python
from starlette.responses import PlainTextResponse
from starlette.endpoints import HTTPEndpoint


class App(HTTPEndpoint):
    async def get(self, request):
        return PlainTextResponse(f"Hello, world!")
```

--------------------------------

### Rendering Custom FT Components (Python)

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Shows how to create custom FastHTML components by defining a class with a `__ft__` method. This method dictates how the component is rendered to XML. The example demonstrates rendering a simple `FtTest` component.

```python
class FtTest:
    def __ft__(self):
        return P('test')
    
to_xml(FtTest())
```

--------------------------------

### Websockets with FastHTML and HTMX

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Provides examples for handling WebSockets using FastHTML's built-in support for the HTMX websockets extension. It covers establishing a WebSocket connection, sending and receiving messages, and managing connection events.

```python
# These HTMX extensions are available through `exts`:
#   head-support preload class-tools loading-states multi-swap path-deps remove-me ws chunked-transfer
app, rt = fast_app(exts='ws')

def mk_inp(): return Input(id='msg', autofocus=True)

@rt
async def index(request):
    # `ws_send` tells HTMX to send a message to the nearest websocket based on the trigger for the form element
    cts = Div(
        Div(id='notifications'),
        Form(mk_inp(), id='form', ws_send=True),
        hx_ext='ws', ws_connect='/ws')
    return Titled('Websocket Test', cts)

async def on_connect(send): await send(Div('Hello, you have connected', id="notifications"))
async def on_disconnect(ws): print('Disconnected!')

@app.ws('/ws', conn=on_connect, disconn=on_disconnect)
async def ws(msg:str, send):
    # websocket hander returns/sends are treated as OOB swaps
    await send(Div('Hello ' + msg, id="notifications"))
    return Div('Goodbye ' + msg, id="notifications"), mk_inp()
```

```python
app = FastHTML(exts='ws')
rt = app.route
msgs = []

@rt('/')
def home():
    return Div(hx_ext='ws', ws_connect='/ws')(
        Div(Ul(*[Li(m) for m in msgs], id='msg-list')),
        Form(Input(id='msg'), id='form', ws_send=True)
    )

async def ws(msg:str):
    msgs.append(msg)
    await send(Ul(*[Li(m) for m in msgs], id='msg-list'))

send = setup_ws(app, ws)
```

--------------------------------

### Handle WebSocket Connection with Starlette

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Manages a WebSocket connection, allowing for bidirectional communication. This example demonstrates accepting a connection, sending a text message, and closing the connection.

```python
from starlette.websockets import WebSocket


async def app(scope, receive, send):
    websocket = WebSocket(scope=scope, receive=receive, send=send)
    await websocket.accept()
    await websocket.send_text('Hello, world!')
    await websocket.close()
```

--------------------------------

### Create and Display Drawing Rooms using FastHTML and HTMX

Source: https://www.fastht.ml/docs/tutorials/e2e.html

Handles the creation of new drawing rooms via an HTML form and displays a list of existing rooms. The POST route for creating a room adds a timestamp and inserts it into the database, returning an HTML list item that's appended to the room list using HTMX. The GET route displays a specific room's interface.

```python
@rt("/")
def get():
    create_room = Form(Input(id="name", name="name", placeholder="New Room Name"),
                       Button("Create Room"),
                       hx_post="/rooms", hx_target="#rooms-list", hx_swap="afterbegin")
    rooms_list = Ul(*rooms(order_by='id DESC'), id='rooms-list')
    return Titled("DrawCollab", 
                  H1("DrawCollab"),
                  create_room, rooms_list)

@rt("/rooms")
async def post(room:Room):
    room.created_at = datetime.now().isoformat()
    return rooms.insert(room)
```

```python
@rt("/rooms/{id}")
async def get(id:int):
    room = rooms[id]
    return Titled(f"Room: {room.name}", H1(f"Welcome to {room.name}"), A(Button("Leave Room"), href="/"))
```

--------------------------------

### Python: Testing Starlette Lifespan

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Shows how to test Starlette applications with lifecycles using TestClient as a context manager. This ensures the lifespan setup and teardown are correctly invoked during tests.

```python
from example import app
from starlette.testclient import TestClient


def test_homepage():
    with TestClient(app) as client:
        # Application's lifespan is called on entering the block.
        response = client.get("/")
        assert response.status_code == 200

    # And the lifespan's teardown is run when exiting the block.
```

--------------------------------

### Complete FastAPI Application for Drawing

Source: https://www.fastht.ml/docs/tutorials/e2e.html

Provides the complete code for a drawing application using FastAPI and Fasthtml. It includes setup for database interaction, routes for creating and viewing rooms, handling canvas drawing, saving, and loading functionality, along with client-side JavaScript for interactivity.

```python
from fasthtml.common import *
from datetime import datetime

def render(room):
    return Li(A(room.name, href=f"/rooms/{room.id}"))

app,rt,rooms,Room = fast_app('data/drawapp.db', render=render, id=int, name=str, created_at=str, canvas_data=str, pk='id')

@rt("/")
def get():
    create_room = Form(Input(id="name", name="name", placeholder="New Room Name"),
                       Button("Create Room"),
                       hx_post="/rooms", hx_target="#rooms-list", hx_swap="afterbegin")
    rooms_list = Ul(*rooms(order_by='id DESC'), id='rooms-list')
    return Titled("QuickDraw", 
                  create_room, rooms_list)

@rt("/rooms")
async def post(room:Room):
    room.created_at = datetime.now().isoformat()
    return rooms.insert(room)

@rt("/rooms/{id}")
async def get(id:int):
    room = rooms[id]
    canvas = Canvas(id="canvas", width="800", height="600")
    color_picker = Input(type="color", id="color-picker", value="#000000")
    brush_size = Input(type="range", id="brush-size", min="1", max="50", value="10")
    save_button = Button("Save Canvas", id="save-canvas", hx_post=f"/rooms/{id}/save", hx_vals="js:{canvas_data: JSON.stringify(canvas.toJSON())}")

    js = f"\n    var canvas = new fabric.Canvas('canvas');
    canvas.isDrawingMode = true;
    canvas.freeDrawingBrush.color = '#000000';
    canvas.freeDrawingBrush.width = 10;

    // Load existing canvas data
    fetch(`/rooms/{id}/load`)
    .then(response => response.json())
    .then(data => {{
        if (data && Object.keys(data).length > 0) {{
            canvas.loadFromJSON(data, canvas.renderAll.bind(canvas));
        }}
    }});
    
    document.getElementById('color-picker').onchange = function() {{
        canvas.freeDrawingBrush.color = this.value;
    }};
    
    document.getElementById('brush-size').oninput = function() {{
        canvas.freeDrawingBrush.width = parseInt(this.value, 10);
    }};
    "
    
    return Titled(f"Room: {room.name}",
                  A(Button("Leave Room"), href="/"),
                  canvas,
                  Div(color_picker, brush_size, save_button),
                  Script(src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"),
                  Script(js))

@rt("/rooms/{id}/save")
async def post(id:int, canvas_data:str):
    rooms.update({'canvas_data': canvas_data}, id)

```

--------------------------------

### WebSocket Connection Callback in Python

Source: https://www.fastht.ml/docs/explains/websockets.html

An example of an `on_connect` callback function for a WebSocket route in FastHTML. This function is executed when a new client connects and can send an initial message to the client.

```python
async def on_conn(send):
    await send(Div('Hello, world!'))
```

--------------------------------

### Return Starlette Response for Redirect

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Shows how to return a Starlette Response object, specifically a `RedirectResponse`, from a route handler to control the client's navigation. This is useful for actions like redirects.

```python
@app.get("/redirect")
def redirect():
    return RedirectResponse(url="/")
```

--------------------------------

### Enabling Debug Mode with Exception Handling (Python)

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Shows how to enable debug mode in a Starlette application. When debug is true, Starlette will respond with a traceback instead of using the installed 500 handler.

```python
app = Starlette(debug=True, routes=routes, exception_handlers=exception_handlers)
```

--------------------------------

### Implementing HTTP Redirects with Redirect in FastHTML

Source: https://www.fastht.ml/docs/ref/handlers.html

Explains how to implement HTTP redirects in FastHTML by returning a 'Redirect' object from handler functions. This allows redirecting users to different URLs. The example shows a redirect to 'http://example.org' and how to inspect the redirect response using a test client.

```python
@app.get("/app4")
def _(foo:FastHTML): return Redirect("http://example.org")
cli.get('/app4', follow_redirects=False)
```

--------------------------------

### Using @rt Decorator with Method Name

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Illustrates an alternative way to define routes using the @rt decorator, where the HTTP method can be specified by naming the function after the HTTP method (e.g., 'post').

```python
from fastai.basics import *
from fastai.text.all import *

app = Flask(__name__)
rt = app.route

@rt("/")
def post():
    return "Hello World from a POST request"

# To run this example, you would typically use:
# uvicorn main:app --reload
# Replace 'main' with the name of your Python file.
```

--------------------------------

### Custom HTML Rendering with __ft__ Method in Python

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Demonstrates how to define a custom class with a __ft__ method to control its HTML representation. This method returns a FastTag structure or a string. It shows how to integrate this with existing FastHTML components like Div.

```python
class Person:
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def __ft__(self):
        return ['div', [f'{self.name} is {self.age} years old.'], {}]

p = Person('Jonathan', 28)
print(to_xml(Div(p, "more text", cls="container")))
```

--------------------------------

### Route with Path Parameter using @rt

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Illustrates defining a route with a path parameter using the @rt decorator. This method also allows capturing parameters from the URL to be used within the function.

```python
from fastai.basics import *
from fastai.text.all import *

app = Flask(__name__)
rt = app.route

@rt("/greet/{nm}")
def get(nm:str):
    return f"Good day to you, {nm}!"

# To test, you would use:
# client.get("/greet/Dave").text
# Expected output: 'Good day to you, Dave!'
```

--------------------------------

### Custom Handler for WebSocketException (Python)

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Provides an example of a custom handler for WebSocketException, which closes the WebSocket connection with a specific status code.

```python
async def websocket_exception(websocket: WebSocket, exc: WebSocketException):
    await websocket.close(code=1008)

exception_handlers = {
    WebSocketException: websocket_exception
}
```

--------------------------------

### Class-Based Endpoints (HTTPEndpoint)

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Introduces `HTTPEndpoint` for handling HTTP requests using a class-based approach, allowing method dispatching (GET, POST, etc.) within the class.

```APIDOC
## Class-Based Endpoints (HTTPEndpoint)

### Description
Use `HTTPEndpoint` to organize request handling logic within a class. This pattern allows for method-level dispatching (e.g., `get`, `post`, `put`) for different HTTP methods within a single endpoint definition.

### Method
`Route(path, endpoint, methods=None, name=None)` where `endpoint` is an `HTTPEndpoint` subclass.

### Endpoint
*   **path** (string) - Required - The URL path for the HTTP endpoint.

### Parameters
*   **path** (string) - Required - The path pattern for the HTTP endpoint.
*   **endpoint** (`HTTPEndpoint` subclass) - Required - A class inheriting from `HTTPEndpoint`.
*   **methods** (list) - Optional - A list of allowed HTTP methods (e.g., `['GET', 'POST']`). If not provided, all methods handled by the endpoint class are allowed.
*   **name** (string) - Optional - A unique name for the route, used for URL generation.

### Request Example
```python
from starlette.endpoints import HTTPEndpoint
from starlette.requests import Request
from starlette.responses import PlainTextResponse

class Homepage(HTTPEndpoint):
    async def get(self, request: Request):
        return PlainTextResponse('Hello, world!')

    async def post(self, request: Request):
        return PlainTextResponse('Data received!')

routes = [
    Route('/', Homepage)
]
```

### Response
*   **Response** - An instance of `starlette.responses.Response` or a subclass.
```

--------------------------------

### Serve Static Files and Define Basic Routes with FastHTML

Source: https://www.fastht.ml/docs/ref/concise_guide.html

This snippet demonstrates how to serve static files using FileResponse and define basic routes with FastHTML's `rt` decorator. It also shows how to integrate MarkdownJS and HighlightJS for enhanced rendering.

```python
@rt("/{fname:path}.{ext:static}")
async def serve_static_file(fname:str, ext:str): return FileResponse(f'public/{fname}.{ext}')

app, rt = fast_app(hdrs=(MarkdownJS(), HighlightJS(langs=['python', 'javascript'])))
@rt
def index(): 
    return Titled("Example",
                  Div("*markdown* here", cls="marked"),
                  Pre(Code("def foo(): pass")))
```

--------------------------------

### Test Profile Endpoint with HTMX Request

Source: https://www.fastht.ml/docs/ref/concise_guide.html

This snippet demonstrates how to use `TestClient` to make a GET request to a '/profile' endpoint, simulating an HTMX request with specific headers, and prints the resulting HTML response.

```python
path = "/profile?email=john@example.com"
client = TestClient(app)
htmx_req = {'HX-Request':'1'}
print(client.get(path, headers=htmx_req).text)
```

--------------------------------

### Running a FastHTML Application

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Provides the command-line instruction to execute a FastHTML web application. Assumes the application code is saved in a file named `main.py` and accessible via `localhost:5001`.

```bash
python main.py  # access via localhost:5001

```

--------------------------------

### FastHTML Chat App Setup and Home Page

Source: https://www.fastht.ml/docs/explains/websockets.html

Initializes the FastHTML application with websocket extensions and defines the main route ('/') for the chat interface. It includes a display for messages and a form for sending new messages, leveraging Hypermedia over WebSockets.

```python
from fasthtml.common import *

app = FastHTML(exts='ws')
rt = app.route

msgs = []
@rt('/')
def home(): return Div(
    Div(Ul(*[Li(m) for m in msgs], id='msg-list')),
    Form(Input(id='msg'), id='form', ws_send=True),
    hx_ext='ws', ws_connect='/ws')
```

--------------------------------

### Detect HTMX Request

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Illustrates how to detect if a request originated from HTMX by checking the 'HX-Request' header. The header name 'HX-Request' is mapped to the 'htmx' argument, with '-' replaced by '_'.

```python
@app.get("/hxtest")
def hxtest(htmx): return htmx.request

cli.get('/hxtest', headers={'HX-Request':'1'}).text
```

--------------------------------

### FastHTML Game Grid Component and Update Route

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Defines a FastHTML component to render the Game of Life grid and an HTMX route to handle user clicks, toggling cell states. This enables client-side interaction with the game.

```python
def Grid():
    cells = []
    for y, row in enumerate(game_state['grid']):
        for x, cell in enumerate(row):
            cell_class = 'alive' if cell else 'dead'
            cell = Div(cls=f'cell {cell_class}', hx_put='/update', hx_vals={'x': x, 'y': y}, hx_swap='none', hx_target='#gol', hx_trigger='click')
            cells.append(cell)
    return Div(*cells, id='grid')

@rt('/update')
async def put(x: int, y: int):
    grid[y][x] = 1 if grid[y][x] == 0 else 0
```

--------------------------------

### Python FastHTML with Flexbox Grid Integration

Source: https://www.fastht.ml/docs/tutorials/by_example.html

This Python code uses the FastHTML library to dynamically generate an HTML structure with a Flexbox grid layout. It includes linking the Flexbox CSS stylesheet and creating nested Div elements with appropriate Flexbox classes for responsive column widths.

```python
grid = Html(
    Link(rel="stylesheet", href="https://cdnjs.cloudflare.com/ajax/libs/flexboxgrid/6.3.1/flexboxgrid.min.css", type="text/css"),
    Div(
        Div(Div("This takes up the full width", cls="box", style="background-color: #800000;"), cls="col-xs-12"),
        Div(Div("This takes up half", cls="box", style="background-color: #008000;"), cls="col-xs-6"),
        Div(Div("This takes up half", cls="box", style="background-color: #0000B0;"), cls="col-xs-6"),
        cls="row", style="color: #fff;"
    )
)
show(grid)
```

--------------------------------

### Create a lightweight ASGI application with Router

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Uses a plain `Router` instance to create a minimal ASGI application focused solely on routing, without additional middleware.

```python
app = Router(routes=[
    Route('/', homepage),
    Mount('/users', routes=[
        Route('/', users, methods=['GET', 'POST']),
        Route('/{username}', user),
    ])
])
```

--------------------------------

### Define a Basic Python Route with FastHTML

Source: https://www.fastht.ml/docs/explains/routes.html

Defines a simple GET route '/user/{nm}' that accepts a string parameter 'nm' and returns a personalized greeting. It requires importing FastHTML and common components.

```python
from fasthtml.common import *

app = FastHTML()

@app.get('/user/{nm}')
def get_nm(nm:str): return f"Good day to you, {nm}!"
```

--------------------------------

### AJAX request using XMLHttpRequest

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Provides examples of making asynchronous HTTP requests using the XMLHttpRequest object to interact with server endpoints.

```javascript
me().on("click", async event => {
  let e = me(event)
  // EXAMPLE 1: Hit an endpoint.
  var xhr = new XMLHttpRequest()
  xhr.open("GET", "/webhook")
  xhr.send()
  // EXAMPLE 2: Get content and replace me()
  var xhr = new XMLHttpRequest()
  xhr.open("GET", "/endpoint")
  xhr.onreadystatechange = () => {
    if (xhr.readyState == 4 && xhr.status >= 200 && xhr.status < 300) e.innerHTML = xhr.responseText
  }
  xhr.send()
})
```

--------------------------------

### Run FastHTML App with Live Reload

Source: https://www.fastht.ml/docs/apilist.txt

Starts the FastHTML application using an asynchronous server, with live reload enabled by default. This function is crucial for development, automatically reloading the server on file changes.

```python
def serve(appname, app, host='127.0.0.1', port=5000, reload=True, reload_includes=None, reload_excludes=None):
    """Run the app in an async server, with live reload set as the default."""
    pass
```

--------------------------------

### Manage Sessions in Python

Source: https://www.fastht.ml/docs/ref/handlers.html

This example illustrates how to store and retrieve data across requests using sessions. A `secret_key` is required for session management, and session data is accessed via the `sess` parameter.

```python
@rt("/setsess")
def get(sess, foo:str=''):
    now = datetime.now()
    sess['auth'] = str(now)
    return f'Set to {now}'

@rt("/getsess")
def get(sess): return f'Session time: {sess["auth"]}'

print(cli.get('/setsess').text)
time.sleep(0.01)

cli.get('/getsess').text
```

--------------------------------

### Implement Toasts with FastHTML

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Demonstrates how to implement user notifications (toasts) in FastHTML. Requires `setup_toasts()`, the session argument in handlers, and returning FT components. It also shows how to set toast duration.

```python
setup_toasts(app)

@rt
def toasting(session):
    add_toast(session, f"cooked", "info")
    add_toast(session, f"ready", "success")
    return Titled("toaster")
```

--------------------------------

### Appending and prepending elements

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Provides examples of adding new elements to the beginning (prepend) or end (appendChild) of a parent element. Also shows inserting an element before another.

```javascript
me().prepend(new_element)
me().appendChild(new_element)
me().insertBefore(element, other_element.firstChild)
```

--------------------------------

### Code Display Components (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Functions for rendering code snippets with distinct styling for inline code spans and multi-line code blocks. These are useful for documentation or displaying code examples within an application.

```python
def CodeSpan(*c, **kwargs):
    """A CodeSpan with Styling
    """
    pass

def CodeBlock(*c, **kwargs):
    """CodeBlock with Styling
    """
    pass
```

--------------------------------

### Handling HTTP Methods

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Demonstrates how to specify which HTTP methods a route should handle.

```APIDOC
## Handling HTTP Methods

Routes can be configured to respond to specific HTTP methods.

### Example Usage
```python
from starlette.routing import Route

# Route handles only GET by default for function endpoints
Route('/', homepage)

# Route explicitly handles GET and POST
Route('/users/{user_id:int}', user, methods=["GET", "POST"])
```
```

--------------------------------

### Set and Get Cookies with FastHTML Routes

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Demonstrates setting a cookie named 'mycookie' with the value 'foobar' in one route and retrieving it in another. It also shows how to access request headers using the `req` parameter.

```python
@rt
def setcook(): return P(f'Set'), cookie('mycookie', 'foobar')
print(client.get('/setcook', headers=htmx_req).text)

@rt
def getcook(mycookie:str): return f'Got {mycookie}'
# If handlers return text instead of FTs, then a plaintext response is automatically created
print(client.get('/getcook').text)

@rt
def headers(req): return req.headers['host']
```

--------------------------------

### Render Chat Messages with Fasthtml

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Defines a function to render individual chat messages, differentiating between user and assistant roles. It applies specific CSS classes for message alignment and bubble appearance. The code constructs a list of message components and wraps them in a chat box div.

```python
messages = [
    {"role":"user", "content":"Hello"},
    {"role":"assistant", "content":"Hi, how can I assist you?"}
]

def ChatMessage(msg):
    return Div(
        Div(msg['role'], cls="chat-header"),
        Div(msg['content'], cls=f"chat-bubble chat-bubble-{'primary' if msg['role'] == 'user' else 'secondary'}"),
        cls=f"chat chat-{'end' if msg['role'] == 'user' else 'start'}")

chatbox = Div(*[ChatMessage(msg) for msg in messages], cls="chat-box", id="chatlist")

# show(Html(*headers, chatbox)) # Uncomment to view
```

--------------------------------

### Getting Request Data in Starlette

Source: https://gist.githubusercontent.com/jph00/e91192e9bdc1640f5421ce3c904f2efb/raw/61a2774912414029edaf1a55b506f0e283b93c46/starlette-quick

Details methods for retrieving data from the request body in Starlette: `request.body()` for raw data, `request.json()` for parsed JSON, and `request.form()` for form data. These are asynchronous operations.

```python
# await request.body(): get raw data from body
# await request.json(): get passed data and parse it as JSON
# await request.form(): get posted data and pass it as dictionary
```

--------------------------------

### Python Game of Life Grid Logic

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Implements the core logic for Conway's Game of Life, including grid initialization and updating cell states based on neighbor counts. This function is essential for the game's simulation.

```python
grid = [[0 for _ in range(20)] for _ in range(20)]
def update_grid(grid: list[list[int]]) -> list[list[int]]:
    new_grid = [[0 for _ in range(20)] for _ in range(20)]
    def count_neighbors(x, y):
        directions = [(-1, -1), (-1, 0), (-1, 1), (0, -1), (0, 1), (1, -1), (1, 0), (1, 1)]
        count = 0
        for dx, dy in directions:
            nx, ny = x + dx, y + dy
            if 0 <= nx < len(grid) and 0 <= ny < len(grid[0]): count += grid[nx][ny]
        return count
    for i in range(len(grid)):
        for j in range(len(grid[0])):
            neighbors = count_neighbors(i, j)
            if grid[i][j] == 1:
                if neighbors < 2 or neighbors > 3: new_grid[i][j] = 0
                else: new_grid[i][j] = 1
            elif neighbors == 3: new_grid[i][j] = 1
    return new_grid
```

--------------------------------

### Initialize FastHTML Test Client

Source: https://www.fastht.ml/docs/ref/handlers.html

Sets up a Client instance for testing the FastHTML application. This client simulates HTTP requests without needing to run a separate server.

```python
cli = Client(app)
```

--------------------------------

### Manage User Session ID (Python)

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Assigns a unique session ID to each user session using uuid.uuid4() if one does not already exist in the session. This ID is then displayed to the user. Requires Starlette's session handling and the uuid module.

```python
import uuid
from fasthtml.common import app, H1

@app.get("/")
def get(session):
    if 'session_id' not in session: session['session_id'] = str(uuid.uuid4())
    return H1(f"Session ID: {session['session_id']}")
```

--------------------------------

### Retrieve Record by Primary Key (Python)

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Explains how to retrieve a single record from a table using its primary key within square brackets. Includes an example of handling a 'NotFoundError' when a record is not found.

```python
user = users['Alma']
user
```

```python
try: users['David']
except NotFoundError: print(f'User not found')
```

--------------------------------

### Load Canvas Data from Database

Source: https://www.fastht.ml/docs/tutorials/e2e.html

Defines a GET route to load canvas data for a specific room. It retrieves the room record using the provided 'id' and returns the stored 'canvas_data'. If no data is found, it returns an empty JSON object.

```python
@rt("/rooms/{id}/load")
async def get(id:int):
    room = rooms[id]
    return room.canvas_data if room.canvas_data else "{}"
```

--------------------------------

### Insert Record into User Table (Python)

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Provides examples of inserting new records into the 'users' table using different data formats: a Python class instance, keyword arguments, and a Python dictionary. The inserted record is returned.

```python
users.insert(User(name='Braden', email='b@example.com', year_started=2018))
```

```python
users.insert(name='Alma', email='a@example.com', year_started=2019)
```

```python
users.insert({'name': 'Charlie', 'email': 'c@example.com', 'year_started': 2018})
```

--------------------------------

### Get Room Data and Initialize Drawing Canvas (Python/FastHTML)

Source: https://www.fastht.ml/docs/tutorials/e2e.html

This Python function, using the FastHTML framework, retrieves room data by ID and constructs an HTML page. It includes a drawing canvas, color picker, and brush size controls, along with JavaScript to enable drawing functionality and connect UI elements to the canvas. It depends on the Fabric.js library for canvas manipulation.

```python
import { Button, Script, Titled, Input, Div, A } from "@/fastht"

# Assuming 'rooms' is a dictionary or similar structure holding room data
# Example: rooms = {1: Room(name='Main Room')}

@rt("/rooms/{id}")
async def get(id:int):
    room = rooms[id]
    canvas = Canvas(id="canvas", width="800", height="600")
    color_picker = Input(type="color", id="color-picker", value="#3CDD8C")
    brush_size = Input(type="range", id="brush-size", min="1", max="50", value="10")
    
    js = """
    var canvas = new fabric.Canvas('canvas');
    canvas.isDrawingMode = true;
    canvas.freeDrawingBrush.color = '#3CDD8C';
    canvas.freeDrawingBrush.width = 10;
    
    document.getElementById('color-picker').onchange = function() {
        canvas.freeDrawingBrush.color = this.value;
    };
    
    document.getElementById('brush-size').oninput = function() {
        canvas.freeDrawingBrush.width = parseInt(this.value, 10);
    };
    """
    
    return Titled(f"Room: {room.name}",
                  A(Button("Leave Room"), href="/"),
                  canvas,
                  Div(color_picker, brush_size),
                  Script(src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"),
                  Script(js))
```

--------------------------------

### Prioritize specific routes over general ones

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Demonstrates the correct order for defining routes to ensure that more specific paths (like `/users/me`) are matched before more general ones (like `/users/{username}`).

```python
# Do this: `/users/me` is tested first.
routes = [
    Route('/users/me', current_user),
    Route('/users/{username}', user),
]
```

--------------------------------

### Define Route with Path Parameter and Get Greeting

Source: https://www.fastht.ml/docs/ref/handlers.html

Defines a route '/user/{nm}' that accepts a path parameter 'nm' and returns a personalized greeting. It demonstrates how to access the parameter value and use a client to make a request to this route.

```python
@rt('/user/{nm}', name='gday')
def get(nm:str=''): return f"Good day to you, {nm}!"
cli.get('/user/Alexis').text
```

--------------------------------

### Configure CORS Headers for Form Submissions in Python

Source: https://www.fastht.ml/docs/ref/handlers.html

This example sets up CORS (Cross-Origin Resource Sharing) headers for a route that handles form submissions. It allows requests from any origin and specifies allowed methods and headers.

```python
@rt("/form-submit/{list_id}")
def options(list_id: str):
    headers = {
        'Access-Control-Allow-Origin': '*', 
        'Access-Control-Allow-Methods': 'POST',
        'Access-Control-Allow-Headers': '*',
    }
    return Response(status_code=200, headers=headers)

print(cli.options('/form-submit/2').headers)
```

--------------------------------

### Run Starlette Application with Uvicorn

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Command to run a Starlette application using the Uvicorn server. Assumes the application instance is named 'app' in a file named 'example.py'.

```shell
uvicorn example:app
```

--------------------------------

### Access Starlette Request Object

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Demonstrates how to access the raw Starlette Request object within a route handler. This allows for manual processing of request data, such as form data, using methods like `request.form()`.

```python
@app.get("/form")
async def form(request:Request):
    form_data = await request.form()
    a = form_data.get('a')
```

--------------------------------

### Integrating Marked.js for Markdown Rendering with htmx

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Shows how to use the 'marked.js' library to render Markdown content within HTML elements, specifically targeting elements processed by htmx. It utilizes a custom 'proc_htmx' function to apply the Markdown parsing to content dynamically loaded or updated on the page.

```javascript
import { marked } from "https://cdn.jsdelivr.net/npm/marked/lib/marked.esm.js";
proc_htmx('%s', e => e.innerHTML = marked.parse(e.textContent));
```

--------------------------------

### HTML Structure for Flexbox Grid

Source: https://www.fastht.ml/docs/tutorials/by_example.html

This HTML snippet illustrates the basic structure required for Flexbox grid layout. It shows a container div with the class 'row' and nested divs with column classes (e.g., 'col-xs-12') to define the responsive width of elements.

```html
<div class="row">
    <div class="col-xs-12">
        <div class="box">This takes up the full width</div>
    </div>
</div>
```

--------------------------------

### AJAX request using fetch API

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Shows how to make asynchronous HTTP requests using the fetch API to hit an endpoint or get content to replace the current element's HTML.

```javascript
me().on("click", async event => {
  let e = me(event)
  // EXAMPLE 1: Hit an endpoint.
  if((await fetch("/webhook")).ok) console.log("Did the thing.")
  // EXAMPLE 2: Get content and replace me()
  try {
    let response = await fetch('/endpoint')
    if (response.ok) e.innerHTML = await response.text()
    else console.warn('fetch(): Bad response')
  }
  catch (error) { console.warn(`fetch(): ${error}`) }
})
```

--------------------------------

### Custom htmx Event Handler for Dynamic Content Update

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Provides the implementation for 'proc_htmx', a utility function designed to process elements identified by a CSS selector during htmx's lifecycle events. It finds matching elements, including the triggering element itself, and applies a given function to each, facilitating dynamic content updates.

```javascript
export function proc_htmx(sel, func) {
  htmx.onLoad(elt => {
    const elements = htmx.findAll(elt, sel);
    if (elt.matches(sel)) elements.unshift(elt)
    elements.forEach(func);
  });
}
```

--------------------------------

### FastHTML OAuth Integration Example (Python)

Source: https://www.fastht.ml/docs/explains/oauth.html

Demonstrates how to set up and use the OAuth class in FastHTML for user authentication. It includes a custom Auth class that handles user verification based on email and redirects users accordingly. Dependencies include `fasthtml.oauth.OAuth` and `fasthtml.common.FastHTML`, `RedirectResponse`.

```python
from fasthtml.oauth import OAuth
from fasthtml.common import FastHTML, RedirectResponse

class Auth(OAuth):
    def get_auth(self, info, ident, session, state):
        email = info.email or ''
        if info.email_verified and email.split('@')[-1]=='answer.ai':
            return RedirectResponse('/', status_code=303)

app = FastHTML()
os = Auth(app, client)

@app.get('/')
def home(auth): return P('Logged in!'), A('Log out', href='/logout')

@app.get('/login')
def login(req): return Div(P("Not logged in"), A('Log in', href=oauth.login_link(req)))
```

--------------------------------

### Complete FastHTML Application for Drawing Rooms

Source: https://www.fastht.ml/docs/tutorials/e2e.html

This snippet provides the full, consolidated code for the drawing room functionality described previously. It includes all necessary imports, the `fast_app` initialization, and the API routes for creating and displaying rooms.

```python
from fasthtml.common import *
from datetime import datetime

def render(room):
    return Li(A(room.name, href=f"/rooms/{room.id}"))

app,rt,rooms,Room = fast_app('data/drawapp.db', render=render, id=int, name=str, created_at=str, pk='id')

@rt("/")
def get():
    create_room = Form(Input(id="name", name="name", placeholder="New Room Name"),
                       Button("Create Room"),
                       hx_post="/rooms", hx_target="#rooms-list", hx_swap="afterbegin")
    rooms_list = Ul(*rooms(order_by='id DESC'), id='rooms-list')
    return Titled("DrawCollab", create_room, rooms_list)

@rt("/rooms")
async def post(room:Room):
    room.created_at = datetime.now().isoformat()
    return rooms.insert(room)

@rt("/rooms/{id}")
async def get(id:int):
    room = rooms[id]
    return Titled(f"Room: {room.name}", H1(f"Welcome to {room.name}"), A(Button("Leave Room"), href="/"))

serve()
```

--------------------------------

### Define a Basic Route with HTML Content

Source: https://www.fastht.ml/docs/tutorials/jupyter_and_fasthtml.html

Defines a simple web route '/index' that returns an HTML structure. It includes a title, a paragraph, and a button that triggers an HTMX GET request. The output is designed to be displayed in a web browser or Jupyter environment.

```python
@rt
def index():
    return Titled('Hello, Jupyter',
           P('Welcome to the FastHTML + Jupyter example'),
           Button('Click', hx_get='/click', hx_target='#dest'),
           Div(id='dest')
    )
```

--------------------------------

### Test FastHTML Route with Starlette TestClient

Source: https://www.fastht.ml/docs/explains/routes.html

Demonstrates how to use Starlette's TestClient to send a GET request to a defined FastHTML route and access the response text. This is useful for testing application behavior without running a full server.

```python
from starlette.testclient import TestClient

client = TestClient(app)
r = client.get('/user/Jeremy')
r.text
```

--------------------------------

### Implement Basic Authentication Decorator for FastHTML Route

Source: https://www.fastht.ml/docs/explains/routes.html

Provides an example of a custom decorator `basic_auth` that checks for a specific 'Authorization' header before allowing access to a protected route. It uses `functools.wraps` to preserve the original function's metadata.

```python
from functools import wraps

def basic_auth(f):
    @wraps(f)
    async def wrapper(req, *args, **kwargs):
        token = req.headers.get("Authorization")
        if token == 'abc123':
            return await f(req, *args, **kwargs)
        return Response('Not Authorized', status_code=401)
    return wrapper

@app.get("/protected")
@basic_auth
async def protected(req):
    return "Protected Content"

client.get('/protected', headers={'Authorization': 'abc123'}).text
```

--------------------------------

### Initialize FastHTML Application

Source: https://www.fastht.ml/docs/ref/handlers.html

Creates an instance of the FastHTML application class, which is the main entry point for building web applications with the framework.

```python
app = FastHTML()
```

--------------------------------

### Automatic component creation for unknown tags

Source: https://www.fastht.ml/docs/ref/defining_xt_component

Shows how FastHTML can automatically generate functions for HTML tags that are not predefined. This is useful for integrating with libraries that introduce custom tags, like 'zero-md'. The example uses a hypothetical 'Some_never_before_used_tag'.

```python
from fasthtml.components import Some_never_before_used_tag

Some_never_before_used_tag()
```

--------------------------------

### Automatic Rendering of FTs to XML (Python)

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Explains that FastHTML automatically renders FTs into XML when handling a response, using the `to_xml` function. This example shows the conversion of the previously defined `tags` into an HTML string.

```python
to_xml(tags)
```

--------------------------------

### Sending and Receiving Data in WebSocket Tests

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Provides examples of methods for sending and receiving different data types (text, bytes, JSON) within a WebSocket test session using TestClient. It also mentions handling WebSocket disconnects.

```python
# Sending data
# .send_text(data)
# .send_bytes(data)
# .send_json(data, mode="text")

# Receiving data
# .receive_text()
# .receive_bytes()
# .receive_json(mode="text")

# Closing the connection
# .close(code=1000)
```

--------------------------------

### Get Uploaded File Content in Starlette

Source: https://gist.githubusercontent.com/jph00/e91192e9bdc1640f5421ce3c904f2efb/raw/61a2774912414029edaf1a55b506f0e283b93c46/starlette-quick

Retrieves content from an uploaded file in a Starlette request. It accesses the form data, extracts the file object, and reads its content. Requires access to the `request.form()` method.

```python
async def handler(request):
    inp = await request.form()
    uploaded_file = inp["filename"]
    filename = uploaded_file.filename           # abc.png
    content_type = uploaded.content_type    # MIME type, e.g. image/png
    content = await uploaded_file.read()       # image content
```

--------------------------------

### Submounting Routes

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Explains how to group routes under a common path prefix or mount other ASGI applications.

```APIDOC
## Submounting Routes

Submounting allows organizing routes into sub-applications or grouping them under a common path prefix.

### Example Usage
```python
from starlette.applications import Starlette
from starlette.routing import Route, Mount
from starlette.staticfiles import StaticFiles

# Example of mounting a sub-application
routes = [
    Route('/', homepage),
    Mount("/static", app=StaticFiles(directory="static"), name="static")
]

# Example of mounting sub-routes
routes = [
    Route('/', homepage),
    Mount('/users', routes=[
        Route('/', users_list, methods=['GET', 'POST']),
        Route('/{username}', user_detail),
    ]),
]

app = Starlette(routes=routes)
```
```

--------------------------------

### Configuring fast_app Headers and CSS (Python)

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Shows how to configure the `fast_app` function, including disabling default CSS frameworks like Pico, adding custom stylesheets, inline styles, and JavaScript libraries like `MarkdownJS` and `HighlightJS`. It also explains how to manage static file paths.

```python
# In future snippets we'll skip showing the `fast_app` call if it has no params
app, rt = fast_app(
    pico=False, # The Pico CSS framework is included by default, so pass `False` to disable it if needed. No other CSS frameworks are included.
    # These are added to the `head` part of the page for non-HTMX requests.
    hdrs=(
        Link(rel='stylesheet', href='assets/normalize.min.css', type='text/css'),
        Link(rel='stylesheet', href='assets/sakura.css', type='text/css'),
        Style("p {color: red;}"),
        # `MarkdownJS` and `HighlightJS` are available via concise functions
        MarkdownJS(), HighlightJS(langs=['python', 'javascript', 'html', 'css'])
        # by default, all standard static extensions are served statically from the web app dir,
        #   which can be modified using e.g `static_path='public'`
        )
)

@rt
def index(req): return Titled("Markdown rendering example",
                              # This will be client-side rendered to HTML with highlight-js
                              Div("*hi* there",cls="marked"),
                              # This will be syntax highlighted
                              Pre(Code("def foo(): pass")))
```

--------------------------------

### Stop the Uvicorn Server Gracefully

Source: https://www.fastht.ml/docs/tutorials/jupyter_and_fasthtml.html

Provides the command to stop the Uvicorn server started by JupyUvi. It's important to call this function to release the thread and prevent potential errors in subsequent sessions or reruns.

```python
server.stop()
```

--------------------------------

### Access Request Host Header

Source: https://www.fastht.ml/docs/ref/handlers.html

Retrieves the 'host' header from an incoming request using the `req` object. The test client defaults to 'testserver' as the host. This example uses `@app.get` to specify the HTTP method for the route.

```python
@app.get("/hostie")
def show_host(req): return req.headers['host']
cli.get('/hostie').text
```

--------------------------------

### Create a Basic HTTP Response (Python)

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Illustrates how to create and send a simple text-based HTTP response using Starlette's `Response` class. It shows how to set the content, status code, and media type.

```python
from starlette.responses import Response


async def app(scope, receive, send):
    assert scope['type'] == 'http'
    response = Response('Hello, world!', media_type='text/plain')
    await response(scope, receive, send)
```

--------------------------------

### Get Nested Function Name

Source: https://www.fastht.ml/docs/apilist.txt

Retrieves the name of a function, handling nested functions by joining their names with underscores. This provides a clear and unique identifier for functions, even those defined within other functions.

```python
def nested_name(f):
    """Get name of function `f` using '_' to join nested function names"""
    pass
```

--------------------------------

### Initialize FastAPI App with Database Schema

Source: https://www.fastht.ml/docs/tutorials/e2e.html

Initializes a FastAPI application with a specified database file and defines the application schema, including fields like 'id', 'name', 'created_at', and 'canvas_data'. The 'render' function is provided for displaying room data.

```python
app,rt,rooms,Room = fast_app('data/drawapp.db', render=render, id=int, name=str, created_at=str, canvas_data=str, pk='id')
```

--------------------------------

### Submounting Starlette Applications and Routes

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Illustrates how to group related routes under a common path prefix using `Mount`. This is useful for organizing larger applications and including sub-applications or static file servers.

```python
from starlette.routing import Route, Mount
from starlette.applications import Starlette
from starlette.staticfiles import StaticFiles

# Example of mounting a directory of static files
app_static = StaticFiles(directory="static")

# Example of mounting routes from another module
# Assuming 'users' and 'auth' modules have a 'routes' attribute
# from myproject import users, auth

routes = [
    Route('/', homepage),
    Mount('/users', routes=[
        Route('/', users, methods=['GET', 'POST']),
        Route('/{username}', user),
    ]),
    # Mount('/users', routes=users.routes),
    # Mount('/auth', routes=auth.routes),
    Mount("/static", app=app_static, name="static")
]

app = Starlette(routes=routes)
```

--------------------------------

### Route using Function Name as Path

Source: https://www.fastht.ml/docs/ref/handlers.html

Defines a route where the function name ('yoyo') is used as the path ('/yoyo'). The `@rt` decorator handles both GET and POST requests by default. The handler returns a simple string.

```python
@rt
def yoyo(): return 'a yoyo'
cli.post('/yoyo').text
```

--------------------------------

### Overriding __ft__ Method using @patch in Python

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Illustrates how to use the @patch decorator from `fastcore.all` to add or override the __ft__ method in an existing class. This allows for flexible customization of how objects are rendered into HTML, using components like Div, Ul, and Li.

```python
from fastcore.all import patch

@patch
def __ft__(self:Person):
    return Div("Person info:", Ul(Li("Name:",self.name), Li("Age:", self.age)))

show(p)
```

--------------------------------

### Using fasthtml.ft Namespace for Components

Source: https://www.fastht.ml/docs/explains/explaining_xt_components.html

Illustrates an alternative way to use FastHTML components by importing the 'ft' namespace and prefixing component calls with 'ft.'. This adheres to PEP8 naming conventions while using FastHTML.

```python
from fasthtml import ft

ft.Ul(
    ft.Li("one"),
    ft.Li("two"),
    ft.Li("three")
)
```

--------------------------------

### URL Generation with Mounted Applications

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Illustrates how to generate URLs for assets or sub-applications mounted at a specific path, using the `path` parameter.

```APIDOC
## URL Generation with Mounted Applications

### Description
Generate URLs for resources within a mounted application, such as static files. This uses the `path` parameter to specify the resource within the mounted app.

### Method
`request.url_for(mount_name, path="/resource")`

### Endpoint
N/A (Internal routing mechanism)

### Parameters
*   **mount_name** (string) - Required - The name of the mounted application.
*   **path** (string) - Required - The path to the resource within the mounted application.

### Request Example
```python
# Assuming a static files mount is named 'static'
url = request.url_for("static", path="/css/base.css")
```

### Response
*   **url** (string) - The generated URL path to the resource.
```

--------------------------------

### Retrieve Record by Compound Primary Key (Python)

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Shows how to retrieve records from a table with a compound primary key using a list or tuple of key values within square brackets. This includes examples for both list and direct index argument formats.

```python
publications[['Alma', 2019]]
```

```python
publications['Alma', 2030]
```

--------------------------------

### Setting HTMX Response Headers with HtmxResponseHeaders

Source: https://www.fastht.ml/docs/ref/handlers.html

Illustrates how to set HTMX-specific response headers using the 'HtmxResponseHeaders' class in FastHTML. This is useful for controlling HTMX client-side behaviors, such as redirects. The example sets the 'HX-Location' header.

```python
@app.get("/app3")
def _(foo:FastHTML): return HtmxResponseHeaders(location="http://example.org")
r = cli.get('/app3')
print(r.headers)
```

--------------------------------

### Filter Generations by Session ID (Python)

Source: https://www.fastht.ml/docs/tutorials/by_example.html

Filters displayed generations to only include those associated with the current user's session ID. It checks for an existing session ID, generates one if necessary, and then queries the database using this ID. Requires fasthtml, uuid, and a database query mechanism.

```python
from fasthtml.common import app, Input, Button, Form, Group, H1

@app.get("/")
def get(session):
    if 'session_id' not in session: session['session_id'] = str(uuid.uuid4())
    inp = Input(id="new-prompt", name="prompt", placeholder="Enter a prompt")
    add = Form(Group(inp, Button("Generate")), hx_post="/", target_id='gen-list', hx_swap="afterbegin")
    gen_containers = [generation_preview(g) for g in gens(limit=10, where=f"session_id == '{session['session_id']}'")]
    # ... rest of the code
```

--------------------------------

### Accessing FastHTML Application Instance

Source: https://www.fastht.ml/docs/ref/handlers.html

Explains how to access the FastHTML application instance within handler functions. This can be done using the special 'app' parameter or by annotating a parameter with 'FastHTML'. The example demonstrates accessing a custom attribute 'chk' set on the application instance.

```python
app.chk = 'foo'
@app.get("/app")
def _(app): return app.chk
print(cli.get('/app').text)
```

--------------------------------

### Custom JSON Serialization with orjson in Starlette

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Provides an example of subclassing Starlette's JSONResponse to customize JSON serialization, specifically using the orjson library for performance. The render method is overridden to handle custom encoding.

```python
from typing import Any

import orjson
from starlette.responses import JSONResponse


class OrjsonResponse(JSONResponse):
    def render(self, content: Any) -> bytes:
        return orjson.dumps(content)
```

--------------------------------

### Returning Content and Custom Headers in FastHTML

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates how handler functions in FastHTML can return both content and custom HTTP headers. The 'HttpHeader' class is used to define custom headers. The example shows returning an application attribute and a custom header, then inspecting the response headers.

```python
@app.get("/app2")
def _(foo:FastHTML): return foo.chk,HttpHeader("mykey", "myval")
r = cli.get('/app2', **hxhdr)
print(r.text)
print(r.headers)
```

--------------------------------

### Add class to single element

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Adds a CSS class to a single selected element. Works with various selectors and can target elements based on events or specified start locations.

```javascript
me().classAdd('red')
```

--------------------------------

### Logging with console methods

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Demonstrates the usage of console.log(), console.warn(), and console.error() for logging messages. Also shows how to monitor events using monitorEvents().

```javascript
console.log()
console.warn() 
console.error()
monitorEvents(me())
```

--------------------------------

### DaisyUI Toast Positioning

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines horizontal and vertical positioning options for DaisyUI toast notifications. `ToastHT` controls horizontal placement (start, center, end), while `ToastVT` controls vertical placement (top, middle, bottom).

```python
class ToastHT(Enum):
    start, center, end

class ToastVT(Enum):
    top, middle, bottom

```

--------------------------------

### Custom 404 Exception Handler in FastHTML

Source: https://www.fastht.ml/docs/ref/handlers.html

This example illustrates defining a custom exception handler for 404 (Not Found) errors within a FastHTML application. The `_not_found` function returns a `Div` component from the fasthtml.elements library, providing a custom response when a requested resource is not found. The snippet also shows how to integrate this handler with the FastHTML app and use a client to test it.

```python
from fasthtml.common import Div
from fasthtml.starlette import FastHTML, Client

def _not_found(req, exc):
    return Div('nope')

app = FastHTML(exception_handlers={404:_not_found})
cli = Client(app)

r = cli.get('/')
print(r.text)
```

--------------------------------

### Deploy to Railway

Source: https://www.fastht.ml/docs/tutorials/e2e.html

Deploys the FastHTMl application to Railway using the provided CLI tool.

```APIDOC
## Deploy to Railway

### Description
Deploys the FastHTMl application to Railway. This command automates the deployment process.

### Command
```sh
fh_railway_deploy quickdraw
```

### Requirements
- The application must be in a `main.py` file.
- Railway CLI must be installed and logged in (`railway login`).
```

--------------------------------

### Setting Headers with TestClient

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Shows how to set headers on the TestClient, either for all subsequent requests or for individual requests. This is useful for authentication or custom headers.

```python
client = TestClient(app)

# Set headers on the client for future requests
client.headers = {"Authorization": "..."}
response = client.get("/")

# Set headers for each request separately
response = client.get("/", headers={"Authorization": "..."})
```

--------------------------------

### Enable Live Reloading with fast_app (Python)

Source: https://www.fastht.ml/docs/ref/live_reload.html

The `fast_app` function provides live reloading functionality when the `live` parameter is set to `True`. This function instantiates `FastHTMLWithLiveReload` internally. The `serve()` function is a wrapper for `uvicorn` calls, allowing you to run the application with live reload enabled by simply executing the Python script.

```python
from fasthtml.common import *

app, rt = fast_app(live=True)

serve()
```

--------------------------------

### HTTP Routing

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Defines how to set up basic HTTP routing in Starlette using a list of Route objects.

```APIDOC
## HTTP Routing

Starlette's routing system allows you to define request handlers based on URL paths. A routing table is a list of `Route` objects passed during application instantiation.

### Endpoint Types
Endpoints can be async functions, regular functions, or ASGI-compatible classes.

### Example Usage
```python
from starlette.applications import Starlette
from starlette.responses import PlainTextResponse
from starlette.routing import Route

async def homepage(request):
    return PlainTextResponse('Homepage')

async def about(request):
    return PlainTextResponse('About')

routes = [
    Route('/', endpoint=homepage),
    Route('/about', endpoint=about),
]

app = Starlette(routes=routes)
```
```

--------------------------------

### Configuring HTMX Behaviors in JavaScript

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

Provides examples of how to directly configure HTMX behavior using JavaScript. This includes options like disabling attribute inheritance, managing credentials, setting request timeouts, and controlling scroll behavior.

```javascript
htmx.config.disableInheritance = true;
htmx.config.withCredentials = true;
htmx.config.timeout = 5000;
htmx.config.scrollBehavior = 'smooth';
htmx.config.defaultFocusScroll = true;
htmx.config.getCacheBusterParam = true;
htmx.config.globalViewTransitions = true;
htmx.config.methodsThatUseUrlParams = ["get", "post", "delete"];
htmx.config.selfRequestsOnly = false;
htmx.config.ignoreTitle = true;
htmx.config.scrollIntoViewOnBoost = false;
// Example using a proxy for triggerSpecsCache
htmx.config.triggerSpecsCache = new Proxy({}, {
  get: function(target, prop, receiver) {
    console.log(`Getting ${prop}`);
    return Reflect.get(target, prop, receiver);
  },
  set: function(target, prop, value, receiver) {
    console.log(`Setting ${prop} to ${value}`);
    return Reflect.set(target, prop, value, receiver);
  }
});
htmx.config.responseHandling = 'error'; // or 'swap'
htmx.config.allowNestedOobSwaps = false;
htmx.config.historyRestoreAsHxRequest = false;
htmx.config.reportValidityOfForms = true;
```

--------------------------------

### FastHTML Client Initialization

Source: https://www.fastht.ml/docs/apilist.txt

Initializes a simple httpx ASGI client for interacting with a FastHTML application without requiring an async context. This is useful for testing or making synchronous requests to the application.

```python
class Client:
    """A simple httpx ASGI client that doesn't require `async`"""
    def __init__(self, app, url):
        pass
```

--------------------------------

### Accessing User-Agent Header in FastHTML

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates how to access the 'User-Agent' header in a FastHTML handler. The handler function '_(user_agent: str)' captures the header value. The example uses a test client to make a request with a custom 'User-Agent' header and prints the received value.

```python
@app.get("/ua")
async def _(user_agent:str): return user_agent
print(cli.get('/ua', headers={'User-Agent':'FastHTML'}).text)
```

--------------------------------

### Accessing Session Data in WebSocket Handlers in Python

Source: https://www.fastht.ml/docs/explains/websockets.html

Illustrates how session data can be accessed within FastHTML WebSocket handlers. This example shows setting a session variable in a standard HTTP route and then accessing it in the WebSocket handler to personalize messages sent to the client.

```python
from fasthtml.common import *

app = FastHTML(exts='ws')
rt = app.route

@rt('/login')
def get(session):
    session["person"] = "Bob"
    return "ok"

@app.ws('/ws')
async def ws(msg:str, send, session):
    await send(Div(f'Hello {session.get("person")}' + msg, id='notifications'))

serve()
```

--------------------------------

### FastHTMl Railway Deployment Command

Source: https://www.fastht.ml/docs/tutorials/e2e.html

This command initiates the deployment of your FastHTMl website to Railway. Ensure your application is in a 'main.py' file for this to work correctly.

```sh
fh_railway_deploy quickdraw
```

--------------------------------

### WebSocket Session Testing with TestClient

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Demonstrates how to test WebSocket connections using Starlette's TestClient. It includes accepting the connection, sending and receiving text data, and closing the connection.

```python
from starlette.testclient import TestClient
from starlette.websockets import WebSocket


async def app(scope, receive, send):
    assert scope['type'] == 'websocket'
    websocket = WebSocket(scope, receive=receive, send=send)
    await websocket.accept()
    await websocket.send_text('Hello, world!')
    await websocket.close()


def test_app():
    client = TestClient(app)
    with client.websocket_connect('/') as websocket:
        data = websocket.receive_text()
        assert data == 'Hello, world!'
```

--------------------------------

### Basic Starlette Application

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

A minimal Starlette application with a single route that returns a JSON response. It requires the 'starlette' library.

```python
from starlette.applications import Starlette
from starlette.responses import JSONResponse
from starlette.routing import Route


async def homepage(request):
    return JSONResponse({'hello': 'world'})


app = Starlette(debug=True, routes=[
    Route('/', homepage),
])
```

--------------------------------

### Generate Profile Paths with Query Parameters

Source: https://www.fastht.ml/docs/ref/concise_guide.html

This code shows how to define a route for user profiles and generate URLs for this route with query parameters using the `.to()` method. This is useful for creating links to specific user profiles.

```python
@rt
def profile(email:str): return fill_form(profile_form, profiles[email])

profile_form = Form(action=profile)(
    Label("Email", Input(name="email")),
    Button("Save", type="submit")
)

user_profile_path = profile.to(email="user@example.com")  # '/profile?email=user%40example.com'
```

--------------------------------

### FastHTML App Initialization

Source: https://www.fastht.ml/docs/apilist.txt

Initializes the FastHTML application, supporting various configurations including debugging, routing, middleware, title, exception handlers, and lifecycle events. It also integrates with HTMX and provides options for session management.

```python
class FastHTML:
    """FastHTML app"""
    def __init__(self, debug=False, routes=None, middleware=None, title='FastHTML', exception_handlers=None, on_startup=None, on_shutdown=None, lifespan=None, hdrs=None, ftrs=None, exts=None, before=None, after=None, surreal=None, htmx=None, default_hdrs=None, sess_cls=None, secret_key=None, session_cookie='session', max_age=14*24*60*60, sess_path='/', same_site='lax', sess_https_only=False, sess_domain=None, key_fname='keys.json', body_wrap=None, htmlkw=None, nb_hdrs=None, canonical=None, **bodykw):
        pass
```

--------------------------------

### Perform Redirect in Starlette

Source: https://gist.githubusercontent.com/jph00/e91192e9bdc1640f5421ce3c904f2efb/raw/61a2774912414029edaf1a55b506f0e283b93c46/starlette-quick

Implements HTTP redirects in Starlette using `RedirectResponse`. Allows customization of the redirect URL and status code (e.g., 301, 302, 303, 307). Requires importing `RedirectResponse` from `starlette.responses`.

```python
from starlette.responses import RedirectResponse

async handler(request):
    # Customize status_code: 
    #   301: permanent redirect 
    #   302: temporary redirect 
    #   303: see others
    #   307: temporary redirect (default)
    return RedirectResponse(url=url, status_code=303)
```

--------------------------------

### Static File Serving

Source: https://www.fastht.ml/docs/ref/handlers.html

Explains how to serve static files with specified extensions from a directory using FastHTML's static_route and static_route_exts methods.

```APIDOC
## GET /{filename}.md

### Description
Serves Markdown (.md) files from the directory two levels up.

### Method
GET

### Endpoint
/{filename}.md

### Parameters
#### Path Parameters
- filename (str) - Required - The name of the markdown file to serve.

### Request Example
{
  "example": ""
}

### Response
#### Success Response (200)
- Output (str) - The content of the requested markdown file.

#### Response Example
{
  "example": "# FastHTML"
}

## GET /{filename}.txt

### Description
Serves text (.txt) files from the current directory. Files not found will result in a 404 error. The default regex includes other common static file types.

### Method
GET

### Endpoint
/{filename}.txt

### Parameters
#### Path Parameters
- filename (str) - Required - The name of the text file to serve.

### Request Example
{
  "example": ""
}

### Response
#### Success Response (404)
- Error Message (str) - Indicates file not found.

#### Response Example
{
  "example": "404 Not Found"
}
```

--------------------------------

### Create and Render a User Profile Form

Source: https://www.fastht.ml/docs/ref/concise_guide.html

This snippet defines a `Profile` dataclass and a form for editing profile information. It then creates a route handler to display and populate this form with user data, demonstrating data binding with `fill_form`.

```python
@dataclass
class Profile: email:str; phone:str; age:int
email = 'john@example.com'
profiles = {email: Profile(email=email, phone='123456789', age=5)}
@rt
def profile(email:str): return fill_form(profile_form, profiles[email])

profile_form = Form(method="post", action=profile)(
        Fieldset(
            Label('Email', Input(name="email")),
            Label("Phone", Input(name="phone")),
            Label("Age", Input(name="age")),
        ),
        Button("Save", type="submit"))
```

--------------------------------

### Rendering List Components using ft Namespace

Source: https://www.fastht.ml/docs/explains/explaining_xt_components.html

Presents the HTML output generated from using the 'ft' namespace to create an unordered list (Ul) with list items (Li).

```xml
<ul>
  <li>one</li>
  <li>two</li>
  <li>three</li>
</ul>
```

--------------------------------

### Python: Minimal FastHTML App with GitHub OAuth and Database Integration

Source: https://www.fastht.ml/docs/explains/oauth.html

This snippet outlines a complete minimal FastHTML application. It sets up a database, configures a GitHub OAuth client, defines a 'before' middleware to check user authentication, handles the login page, and processes the OAuth callback to store user IDs.

```python
import os
from fasthtml.common import *
from fasthtml.oauth import GitHubAppClient, redir_url

db = database('data/counts.db')
counts = db.t.counts
if counts not in db.t: counts.create(dict(name=str, count=int), pk='name')
Count = counts.dataclass()

# Auth client setup for GitHub
client = GitHubAppClient(os.getenv("AUTH_CLIENT_ID"), 
                         os.getenv("AUTH_CLIENT_SECRET"))
auth_callback_path = "/auth_redirect"

def before(req, session):
    # if not logged in, we send them to our login page
    # logged in means:
    # - 'user_id' in the session object, 
    # - 'auth' in the request object
    auth = req.scope['auth'] = session.get('user_id', None)
    if not auth: return RedirectResponse('/login', status_code=303)
    counts.xtra(name=auth)
bware = Beforeware(before, skip=['/login', auth_callback_path])

app = FastHTML(before=bware)

# User asks us to Login
@app.get('/login')
def login(request):
    redir = redir_url(request,auth_callback_path)
    login_link = client.login_link(redir)
    # we tell user to login at github
    return P(A('Login with GitHub', href=login_link))    
```

--------------------------------

### Sending Files with TestClient

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Illustrates how to send files with a POST request using TestClient. It covers sending a single file and multiple files, including specifying filenames and content types.

```python
client = TestClient(app)

# Send a single file
with open("example.txt", "rb") as f:
    response = client.post("/form", files={"file": f})

# Send multiple files
with open("example.txt", "rb") as f1:
    with open("example.png", "rb") as f2:
        files = {"file1": f1, "file2": ("filename", f2, "image/png")}
        response = client.post("/form", files=files)
```

--------------------------------

### Creating Basic FastTags (Python)

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Demonstrates the creation of basic HTML tags like Title, H1, and P using FastHTML's m-expression syntax. Positional parameters become children, and named parameters become attributes. Python reserved words used as attribute names require aliases.

```python
tags = Title("FastHTML"), H1("My web app"), P(f"Let's do this!", cls="myclass")
tags
```

--------------------------------

### Define and Test a POST Handler

Source: https://www.fastht.ml/docs/ref/handlers.html

Illustrates handling POST requests on the same '/hi' route with a different response. It also demonstrates using the test client to simulate POST requests.

```python
@rt("/hi")
def post(): return 'Postal'
cli.post('/hi').text
```

--------------------------------

### Route Priority

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Explains the importance of route order for matching incoming requests, emphasizing that more specific routes should be placed before general ones.

```APIDOC
## Route Priority

### Description
Starlette matches incoming request paths against defined routes in the order they are listed. It is crucial to place more specific routes before more general routes to ensure correct request handling.

### Method
N/A (Relates to the order of `Route` and `Mount` objects in the `routes` list)

### Endpoint
N/A (Applies to all routes)

### Parameters
N/A

### Request Example
```python
# Incorrect order: '/users/me' would never be matched
routes = [
    Route('/users/{username}', user),
    Route('/users/me', current_user),
]

# Correct order: ensures '/users/me' is tested first
routes = [
    Route('/users/me', current_user),
    Route('/users/{username}', user),
]
```

### Response
N/A
```

--------------------------------

### Handle Basic HTTP Request in Starlette (Python)

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Demonstrates how to create a Starlette application that processes a basic HTTP request. It extracts the request method and URL path, constructs a plain text response, and sends it back to the client. This requires the 'starlette' library.

```python
from starlette.requests import Request
from starlette.responses import Response


async def app(scope, receive, send):
    assert scope['type'] == 'http'
    request = Request(scope, receive)
    content = '%s %s' % (request.method, request.url.path)
    response = Response(content, media_type='text/plain')
    await response(scope, receive, send)
```

--------------------------------

### Implement middleware using a __call__ function

Source: https://gist.githubusercontent.com/jph00/e91192e9bdc1640f5421ce3c904f2efb/raw/61a2774912414029edaf1a55b506f0e283b93c46/starlette-quick

This Python code defines a middleware class that intercepts requests and responses by implementing the `__call__` method. It receives the ASGI `scope`, `receive`, and `send` arguments, allowing for inspection and modification of request headers before passing control to the next middleware or application.

```python
class MyMiddleware:
    def __init__(self, app):
        self.app = app

    async def __call__(self, scope, receive, send):
        # Inspect scope for headers, etc.
        # headers = dict(scope["headers"])
        # print(f"Request headers: {headers}")
        
        # Pass control to the next middleware/app
        await self.app(scope, receive, send)
```

--------------------------------

### Configure Multiple Static Route Extensions in Python

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates using `static_route_exts` to serve static files with multiple extensions from a directory. This method is flexible and allows customization of served file types and paths.

```python
help(app.static_route_exts)
```

--------------------------------

### Path Parameters

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Explains how to use path parameters with different convertors and access them via `request.path_params`.

```APIDOC
## Path Parameters

Paths can be parameterized using URI templating. Convertors can be used to specify the type of data captured.

### Available Convertors
- `str` (default)
- `int`
- `float`
- `uuid`
- `path` (captures the rest of the path)

### Example Usage
```python
from starlette.routing import Route

# Basic path parameter
Route('/users/{username}', user)

# Using convertors
Route('/users/{user_id:int}', user)
Route('/floating-point/{number:float}', floating_point)
Route('/uploaded/{rest_of_path:path}', uploaded)

# Custom convertor example (datetime)
from datetime import datetime
from starlette.convertors import Convertor, register_url_convertor

class DateTimeConvertor(Convertor):
    regex = "[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(.[0-9]+)?"
    def convert(self, value: str) -> datetime:
        return datetime.strptime(value, "%Y-%m-%dT%H:%M:%S")
    def to_string(self, value: datetime) -> str:
        return value.strftime("%Y-%m-%dT%H:%M:%S")

register_url_convertor("datetime", DateTimeConvertor())
Route('/history/{date:datetime}', history)

# Accessing path parameters
async def user(request):
    user_id = request.path_params['user_id']
    # ... handler logic
```
```

--------------------------------

### Serve Static Files by Extension in Python

Source: https://www.fastht.ml/docs/ref/handlers.html

This code snippet shows how to serve static files with specific extensions from a directory. The `static_route` method is used to map file extensions to a directory for serving.

```python
app.static_route('.md', static_path='../..')
print(cli.get('/README.md').text[:10])
```

--------------------------------

### Implement Authentication with Beforeware in FastHTML

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Shows how to implement authentication using `Beforeware` in FastHTML. A `user_auth_before` function checks for authentication in the session and redirects to login if not authenticated. The `skip` parameter excludes certain paths from this check.

```python
def user_auth_before(req, sess):
    # `auth` key in the request scope is automatically provided to any handler which requests it and can not be injected
    auth = req.scope['auth'] = sess.get('auth', None)
    if not auth: return RedirectResponse('/login', status_code=303)

beforeware = Beforeware(
    user_auth_before,
    skip=[r'/favicon\.ico', r'/static/.*', r'.*\.css', r'.*\.js', '/login', '/']
)

app, rt = fast_app(before=beforeware)
```

--------------------------------

### Python: Define Product Routes with APIRouter

Source: https://www.fastht.ml/docs/ref/handlers.html

This Python code defines an APIRouter with a '/products' prefix for organizing product-related routes. It includes an 'all_products' route that displays product information and a 'details' route that takes a product ID and returns its details. The routes are defined using decorators on the APIRouter instance.

```python
# products.py
ar = APIRouter(prefix="/products")

@ar("/all")
def all_products(req):
    return Div(
        "Welcome to the Products Page! Click the button below to look at the details for product 42",
        Div(
            Button(
                "Details",
                hx_get=req.url_for("details", pid=42),
                hx_target="#products_list",
                hx_swap="outerHTML",
            ),
        ),
        id="products_list",
    )


@ar.get("/{pid}", name="details")
def details(pid: int):
    return f"Here are the product details for ID: {pid}"
```

--------------------------------

### Configuring Lifespan Handler in Starlette (Python)

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Demonstrates setting up a lifespan handler using `contextlib.asynccontextmanager` for Starlette applications. This allows execution of startup and shutdown code, such as managing asynchronous resources. The handler is passed to the `Starlette` constructor.

```python
import contextlib

from starlette.applications import Starlette


@contextlib.asynccontextmanager
async def lifespan(app):
    async with some_async_resource():
        print("Run at startup!")
        yield
        print("Run on shutdown!")


routes = [
    ...
]

app = Starlette(routes=routes, lifespan=lifespan)
```

--------------------------------

### Python: Integrate APIRouter with FastHTML Application

Source: https://www.fastht.ml/docs/ref/handlers.html

This Python snippet shows how to integrate a previously defined APIRouter into a main FastHTML application. It initializes the FastHTML app, adds the APIRouter's routes using `to_app`, and defines an index route that links to the product routes. This demonstrates modular routing by importing and using routes from separate files.

```python
# main.py
# from products import ar

app, rt = fast_app()
ar.to_app(app)

@rt
def index():
    return Div(
        "Click me for a look at our products",
        hx_get=ar.rt_funcs.all_products,
        hx_swap="outerHTML",
    )
```

--------------------------------

### MonsterUI Form Component

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Shows how to build a styled form using MonsterUI's form components like LabelInput and LabelCheckboxX. It demonstrates structured layout with Grid and centering with DivCentered, along with button styling.

```python
def MonsterForm():
    relationship = ["Parent",'Sibling', "Friend", "Spouse", "Significant Other", "Relative", "Child", "Other"]
    return Div(
        DivCentered(
            H3("Emergency Contact Form"),
            P("Please fill out the form completely", cls=TextPresets.muted_sm)),
        Form(
            Grid(LabelInput("Name",id='name'),LabelInput("Email",     id='email')),
            H3("Relationship to patient"),
            Grid(*[LabelCheckboxX(o) for o in relationship], cols=4, cls='space-y-3'),
            DivCentered(Button("Submit Form", cls=ButtonT.primary))),
        cls='space-y-4')

```

--------------------------------

### Process Multipart Form Data with File Uploads (Python)

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Demonstrates how to use `request.form()` to process multipart form data, including file uploads. It shows how to configure limits for files and fields and how to access uploaded files and their metadata.

```python
async with request.form(max_files=1000, max_fields=1000):
    ...
```

```python
async with request.form() as form:
    filename = form["upload_file"].filename
    contents = await form["upload_file"].read()
```

--------------------------------

### MonsterUI Core Theme Headers

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Generates CDN links for FrankenUI and Tailwind CSS based on selected theme and features. Supports various modes and integrations like DaisyUI, highlight.js, KaTeX, ApexCharts, and custom radii/shadows/fonts.

```python
class Theme(Enum):
    slate, stone, gray, neutral, red, rose, orange, green, blue, yellow, violet, zinc

    def headers(self, mode, icons, daisy, highlightjs, katex, apex_charts, radii, shadows, font):
        # Create frankenui and tailwind cdns
        pass

    def local_headers(self, mode, static_dir, icons, daisy, highlightjs, katex, apex_charts, radii, shadows, font):
        # Create headers using local files downloaded from CDNs
        pass

```

--------------------------------

### Define Basic HTTP Routes in Starlette

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Defines a list of routes for a Starlette application, mapping URL paths to asynchronous endpoint functions. This is the fundamental step for handling incoming HTTP requests.

```python
from starlette.applications import Starlette
from starlette.responses import PlainTextResponse
from starlette.routing import Route


async def homepage(request):
    return PlainTextResponse("Homepage")

async def about(request):
    return PlainTextResponse("About")


routes = [
    Route("/", endpoint=homepage),
    Route("/about", endpoint=about),
]

app = Starlette(routes=routes)
```

--------------------------------

### FastHTML Jupyter Notebook Server Utilities (Python)

Source: https://www.fastht.ml/docs/apilist.txt

Provides functions and classes for running FastAPI applications within Jupyter notebooks using Uvicorn. Includes utilities for starting/stopping servers, checking port availability, and embedding HTMX applications.

```python
def nb_serve(app, log_level, port, host, **kwargs)
    Start a Jupyter compatible uvicorn server with ASGI `app` on `port` with `log_level`

def nb_serve_async(app, log_level, port, host, **kwargs)
    Async version of `nb_serve`

def is_port_free(port, host)
    Check if `port` is free on `host`

def wait_port_free(port, host, max_wait)
    Wait for `port` to be free on `host`

class JupyUvi
    Start and stop a Jupyter compatible uvicorn server with ASGI `app` on `port` with `log_level`

    - def __init__(self, app, log_level, host, port, start, **kwargs)
    - def start(self)
    - def start_async(self)
    - def stop(self)

class JupyUviAsync
    Start and stop an async Jupyter compatible uvicorn server with ASGI `app` on `port` with `log_level`

    - def __init__(self, app, log_level, host, port, **kwargs)
    - def start(self)
    - def stop(self)

def HTMX(path, host, app, port, height, link, iframe)
    An iframe which displays the HTMX application in a notebook.
```

--------------------------------

### Python: Starlette Server Push

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Shows how to use Starlette's support for HTTP/2 and HTTP/3 server push. The `send_push_promise` method initiates a push for a specified resource path, improving page load performance.

```python
from starlette.applications import Starlette
from starlette.responses import HTMLResponse
from starlette.routing import Route, Mount
from starlette.staticfiles import StaticFiles


async def homepage(request):
    """
    Homepage which uses server push to deliver the stylesheet.
    """
    await request.send_push_promise("/static/style.css")
    return HTMLResponse(
        '<html><head><link rel="stylesheet" href="/static/style.css"/></head></html>'
    )

routes = [
    Route("/", endpoint=homepage),
    Mount("/static", StaticFiles(directory="static"), name="static")
]

app = Starlette(routes=routes)
```

--------------------------------

### Create HTML Response in Starlette

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Shows how to return an HTML formatted response using Starlette's HTMLResponse class. This is suitable for serving web pages or HTML fragments.

```python
from starlette.responses import HTMLResponse


async def app(scope, receive, send):
    assert scope['type'] == 'http'
    response = HTMLResponse('<html><body><h1>Hello, world!</h1></body></html>')
    await response(scope, receive, send)
```

--------------------------------

### Create Google OAuth Client

Source: https://www.fastht.ml/docs/explains/oauth.html

Demonstrates how to create a Google OAuth client using FastHTML. It requires environment variables for client ID and secret, and is used to generate login links.

```python
import os
from fasthtml.oauth import GoogleAppClient
client = GoogleAppClient(os.getenv("AUTH_CLIENT_ID"),
                         os.getenv("AUTH_CLIENT_SECRET"))
```

--------------------------------

### Client-Side WebSocket Connection with HTMX in Python

Source: https://www.fastht.ml/docs/explains/websockets.html

Sets up a basic web page using FastHTML that establishes a WebSocket connection using HTMX. It includes a form to send messages and a div to display notifications received via the WebSocket. Requires `exts='ws'` in FastHTML initialization.

```python
from fasthtml.common import *

app = FastHTML(exts='ws')

@app.get('/')
def home():
    cts = Div(
        Div(id='notifications'),
        Form(Input(id='msg'), id='form', ws_send=True),
        hx_ext='ws', ws_connect='/ws')
    return Titled('Websocket Test', cts)
```

--------------------------------

### Fastlite Table Creation

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Defines database tables using Python classes with type hints. Supports primary key specification and automatic schema transformation on field changes when `transform=True`. Uses `db.create()` to instantiate table objects.

```python
class Book:
    isbn: str
    title: str
    pages: int
    userid: int
# The transform arg instructs fastlite to change the db schema when fields change.
# Create only creates a table if the table doesn't exist.
books = db.create(Book, pk='isbn', transform=True)
            
class User:
    id: int
    name: str
    active: bool = True
# If no pk is provided, id is used as the primary key.
users = db.create(User, transform=True)
users
```

--------------------------------

### Starlette Response Class

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Explains how to create and send HTTP responses using the Starlette Response class, including setting content, status code, headers, and media type.

```APIDOC
## GET /hello

### Description
Sends a simple text-based greeting response to the client.

### Method
GET

### Endpoint
/hello

### Parameters
None

### Response
#### Success Response (200)
- **Content** (str) - The body of the response, typically a plain text message.
- **Media Type** (str) - The MIME type of the content, e.g., 'text/plain'.

#### Response Example
```plaintext
Hello, world!
```

### Usage Example
```python
from starlette.responses import Response

async def homepage(request):
    response = Response('Hello, world!', media_type='text/plain')
    return response
```
```

--------------------------------

### Handle Form Data Binding with Dataclasses and Redirect

Source: https://www.fastht.ml/docs/ref/concise_guide.html

This code defines a route `edit_profile` that accepts a `Profile` dataclass, updates profile data, and redirects the user. It also shows how to simulate a POST request with form data using `TestClient`.

```python
@rt
def edit_profile(profile: Profile):
    profiles[email]=profile
    return RedirectResponse(url=path)

new_data = dict(email='john@example.com', phone='7654321', age=25)
print(client.post("/edit_profile", data=new_data, headers=htmx_req).text)
```

--------------------------------

### URL Generation with Named Routes

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Demonstrates how to generate URLs for specific routes using their names, including nested routes and path parameters.

```APIDOC
## URL Generation with Named Routes

### Description
Generate URLs for routes using their defined names. This includes support for nested routes (using a colon-separated namespace) and dynamic path parameters.

### Method
`request.url_for(name, **path_params)`
`app.url_path_for(name, **path_params)`

### Endpoint
N/A (Internal routing mechanism)

### Parameters
*   **name** (string) - Required - The name of the route to generate a URL for.
*   **path_params** (dict) - Optional - A dictionary of path parameters to be included in the URL.

### Request Example
```python
# Assuming routes are defined with names
url = request.url_for("user_detail", username="john_doe")
url = app.url_path_for("user_detail", username="john_doe")
```

### Response
*   **url** (string) - The generated URL path.
```

--------------------------------

### Import FastHTML and Jupyter Utilities

Source: https://www.fastht.ml/docs/tutorials/jupyter_and_fasthtml.html

Imports the necessary components from the fasthtml library for building web applications in Jupyter. This includes common functionalities and specific Jupyter integration tools.

```python
from fasthtml.common import *
from fasthtml.jupyter import JupyUvi, HTMX
```

--------------------------------

### URL Generation with uri()

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates how to generate URLs for named routes using the `uri()` function.

```APIDOC
## URL Generation with uri()

### Description
Generates URLs for named routes, useful for creating links within HTML or API responses.

### Method
N/A (Function Usage)

### Endpoint
N/A

### Parameters
N/A

### Request Example
```python
from fasthtml.common import uri

# Generates URL for the 'gday' route with 'nm' set to 'Alexis'
url = uri('gday', nm='Alexis') 
print(url)
```

### Response
#### Success Response (N/A)
- **url** (str) - The generated URL.

#### Response Example
```
/user/Alexis
```
```

--------------------------------

### Create User Table with Transform (Python)

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Demonstrates creating a 'User' table with an added 'pwd' field and enabling transformations using the 'transform=True' argument.

```python
class User: name:str; email: str; year_started:int; pwd:str
users = db.create(User, pk='name', transform=True)
users
```

--------------------------------

### Routing with HTTPEndpoint classes in Python

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Shows how to configure routing in a Starlette application to dispatch requests to different HTTPEndpoint classes based on URL paths. It utilizes `starlette.routing.Route` and requires `Starlette`, `PlainTextResponse`, `HTTPEndpoint`, and `Route`.

```python
from starlette.applications import Starlette
from starlette.responses import PlainTextResponse
from starlette.endpoints import HTTPEndpoint
from starlette.routing import Route


class Homepage(HTTPEndpoint):
    async def get(self, request):
        return PlainTextResponse(f"Hello, world!")


class User(HTTPEndpoint):
    async def get(self, request):
        username = request.path_params['username']
        return PlainTextResponse(f"Hello, {username}")

routes = [
    Route("/", Homepage),
    Route("/{username}", User)
]

app = Starlette(routes=routes)
```

--------------------------------

### Managing State in Starlette Applications and Requests

Source: https://gist.githubusercontent.com/jph00/e91192e9bdc1640f5421ce3c904f2efb/raw/61a2774912414029edaf1a55b506f0e283b93c46/starlette-quick

Demonstrates how to store and access stateful data within a Starlette application and individual requests. Application state is set via `app.state` and accessed via `request.app.state`, while request-specific state is managed using `request.state`.

```python
app.state.dbconn = get_db_conn()
request.state.start_time = time.time()
# use app-scope state variable in a request
request.app.state.dbconn
```

--------------------------------

### Render Markdown with Custom Image Handling (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Renders Markdown content using the mistletoe and lxml libraries, incorporating custom image path handling via a specified renderer. It also allows for applying CSS classes. It requires Markdown content, class mapping, class modification mapping, an image directory, and a renderer instance.

```python
def render_md(md_content, class_map, class_map_mods, img_dir, renderer)
    Renders markdown using mistletoe and lxml with custom image handling
```

--------------------------------

### DaisyUI Steps Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Provides functionality for creating step-by-step indicators using DaisyUI styles. Supports vertical and horizontal layouts (`StepsT`), and various styling options for individual steps (`StepT`).

```python
class StepsT(Enum):
    vertical, horizonal

class StepT(Enum):
    primary, secondary, accent, info, success, warning, error, neutral

def Steps(*li, **kwargs):
    # Creates a steps container
    pass

def LiStep(*c, **kwargs):
    # Creates a step list item
    pass

```

--------------------------------

### Reverse URL Lookups

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Details how to generate URLs for named routes using `request.url_for`.

```APIDOC
## Reverse URL Lookups

Starlette provides a way to generate URLs for specific routes, which is useful for redirects or building links.

### Usage
Use the `request.url_for(name, **path_params)` method.

### Example Usage
```python
from starlette.routing import Route

routes = [
    Route("/", homepage, name="homepage")
]

# Generate URL for a named route
url = request.url_for("homepage")

# Generate URL with path parameters
routes = [
    Route("/users/{username}", user, name="user_detail")
]
url = request.url_for("user_detail", username="john_doe")
```
```

--------------------------------

### Creating a custom SurrealJS plugin

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Provides a template for creating custom plugins for SurrealJS, demonstrating how to add new global functions and make them chainable to Surreal elements.

```javascript
function pluginHello(e) {
  function hello(e, name="World") {
    console.log(`Hello ${name} from ${e}`)
    return e // Make chainable.
  }
  // Add sugar
  e.hello = (name) => { return hello(e, name) }
}

surreal.plugins.push(pluginHello)
```

--------------------------------

### Starlette Reverse URL Lookups

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Explains how to generate URLs for named routes using `request.url_for()`. This is essential for creating redirects or linking to different parts of the application dynamically.

```python
from starlette.routing import Route
from starlette.applications import Starlette


# Define routes with names
routes = [
    Route("/", homepage, name="homepage"),
    Route("/users/{username}", user, name="user_detail")
]

app = Starlette(routes=routes)

# Example usage within a request handler (assuming 'request' is available)
# url_homepage = request.url_for("homepage")
# url_user = request.url_for("user_detail", username="testuser")
```

--------------------------------

### Define Books API with FastHTML

Source: https://www.fastht.ml/docs/explains/routes.html

This snippet defines a basic FastAPI application using FastHTML to serve a list of books. It sets up a root route that returns a titled page with paragraphs for each book in the list.

```python
from fast_app import fast_app
from fast_html import Titled, P

books_app, rt = fast_app()

books = ['A Guide to FastHTML', 'FastHTML Cookbook', 'FastHTML in 24 Hours']

@rt("/", name="list")
def get():
    return Titled("Books", *[P(book) for book in books])
```

--------------------------------

### Create ApexChart Component (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a component for rendering ApexCharts. It accepts arbitrary keyword arguments to configure the chart.

```python
def ApexChart(**kws)
    Apex chart component
```

--------------------------------

### Fasthtml Pico CSS Components

Source: https://www.fastht.ml/docs/apilist.txt

Provides basic components for generating Pico CSS tags. These are implemented as FastHTML tags with specific roles and classes for Pico CSS styling. Dependencies include `fast_hx` for delegation.

```python
from fast_hx import _delegates as ft_hx

# ... other imports if necessary ...

@ft_hx(keep=True)
def Card(*c, **kwargs):
    """A PicoCSS Card, implemented as an Article with optional Header and Footer"""
    pass

@ft_hx(keep=True)
def Group(*c, **kwargs):
    """A PicoCSS Group, implemented as a Fieldset with role 'group'"""
    pass

@ft_hx(keep=True)
def Search(*c, **kwargs):
    """A PicoCSS Search, implemented as a Form with role 'search'"""
    pass

@ft_hx(keep=True)
def Grid(*c, **kwargs):
    """A PicoCSS Grid, implemented as child Divs in a Div with class 'grid'"""
    pass

@ft_hx(keep=True)
def DialogX(*c, **kwargs):
    """A PicoCSS Dialog, with children inside a Card"""
    pass

@ft_hx(keep=True)
def Container(*args, **kwargs):
    """A PicoCSS Container, implemented as a Main with class 'container'"""
    pass
```

--------------------------------

### fasthtml.components: Show Component for Jupyter

Source: https://www.fastht.ml/docs/apilist.txt

Renders FastHTML (FT) components into HTML output specifically within a Jupyter notebook environment. It takes an FT component and optional additional arguments.

```python
def show(ft, *rest):
    """Renders FT Components into HTML within a Jupyter notebook."""
    # ... implementation details ...
    pass
```

--------------------------------

### Fastlite Database Initialization

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Initializes a Fastlite database connection using APSW. Supports in-memory databases or persistent SQLite files. This is the first step in using Fastlite for database operations.

```python
from fastlite import *

db = database(':memory:') # or database('data/app.db')
```

--------------------------------

### URL Path Generation with app.url_path_for()

Source: https://www.fastht.ml/docs/ref/handlers.html

Illustrates generating URL paths (without host/scheme) for named routes using the application object.

```APIDOC
## URL Path Generation with app.url_path_for()

### Description
Generates only the path component of URLs for named routes using the application's `url_path_for` method.

### Method
N/A (Function Usage)

### Endpoint
N/A

### Parameters
N/A

### Request Example
```python
# Assuming 'app' is the FastHTMLL app instance
# Generates URL path for the 'gday' route
path = app.url_path_for('gday', nm='Jeremy')
print(path)
```

### Response
#### Success Response (N/A)
- **path** (str) - The generated URL path.

#### Response Example
```
/user/Jeremy
```
```

--------------------------------

### Python Grid Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a responsive grid layout with smart defaults based on content. Accepts div elements as positional arguments and keyword arguments.

```python
def Grid(*div, **kwargs)
    Creates a responsive grid layout with smart defaults based on content
```

--------------------------------

### Create Cookie HttpHeader in Python

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates creating an `HttpHeader` object for setting a cookie. The `cookie()` function returns an `HttpHeader` with the 'set-cookie' key, which can be returned in responses.

```python
cookie('now', datetime.now())
```

--------------------------------

### Create Responsive Navigation Bar (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a function to create a responsive navigation bar that includes support for a mobile menu. It simplifies the creation of adaptive navigation layouts. It accepts arbitrary positional arguments.

```python
def NavBar(*c)
    Creates a responsive navigation bar with mobile menu support
```

--------------------------------

### Define WebSocket routes

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Uses `WebSocketRoute` for defining endpoints that handle WebSocket connections. Path parameters and URL lookups function similarly to HTTP routes.

```python
routes = [
    WebSocketRoute("/ws", websocket_endpoint)
]
```

--------------------------------

### fasthtml.cli: Railway Deployment Commands

Source: https://www.fastht.ml/docs/apilist.txt

Provides command-line interface functions for interacting with Railway for application linking and deployment. Uses the `call_parse` decorator for argument parsing.

```python
@call_parse
def railway_link():
    """Link the current directory to the current project's Railway service"""
    # ... implementation details ...
    pass

@call_parse
def railway_deploy(name, mount):
    """Deploy a FastHTML app to Railway"""
    # ... implementation details ...
    pass
```

--------------------------------

### Semantic Text Styling with MonsterUI

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Highlights MonsterUI's support for semantic HTML elements like H1, P, Strong, Em, Mark, Blockquote, Cite, and Small. It showcases how these elements are styled to create a modern and readable text presentation.

```python
def SemanticText():
    return Card(
        H1("MonsterUI's Semantic Text"),
        P(
            Strong("MonsterUI"), " brings the power of semantic HTML to life with ",
            Em("beautiful styling"), " and ", Mark("zero configuration"), "."),
        Blockquote(
            P("Write semantic HTML in pure Python, get modern styling for free."),
            Cite("MonsterUI Team")),
        footer=Small("Released February 2025"),)

```

--------------------------------

### Import Necessary Modules for FastHTML

Source: https://www.fastht.ml/docs/ref/handlers.html

Imports core components from the fasthtml library, along with utilities for data structures, type hinting, and time manipulation, essential for building web applications.

```python
from fasthtml.common import *
from collections import namedtuple
from typing import TypedDict
from datetime import datetime
import json,time
```

--------------------------------

### Markdown Rendering with MonsterUI

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Demonstrates MonsterUI's ability to automatically style Markdown content. It shows the conversion of Markdown text, including headers, blockquotes, lists, and code blocks, into styled HTML.

```python
render_md("""
# My Document

> Important note here

+ List item with **bold**
+ Another with `code`

```python
def hello():
    print("world")
```
""")

```

--------------------------------

### WebSocket Routing

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Details the use of `WebSocketRoute` for handling WebSocket connections, including path parameter and URL lookup similarities to HTTP routes.

```APIDOC
## WebSocket Routing

### Description
Handle WebSocket connections using `WebSocketRoute`. Path parameters and reverse URL lookups function similarly to HTTP `Route` objects, providing a consistent routing experience for both protocols.

### Method
`WebSocketRoute(path, endpoint, name=None)`

### Endpoint
*   **path** (string) - Required - The URL path for the WebSocket endpoint.

### Parameters
*   **path** (string) - Required - The path pattern for the WebSocket endpoint.
*   **endpoint** (callable or ASGI callable) - Required - An async function accepting a `websocket` argument, or an ASGI-compliant class/application.
*   **name** (string) - Optional - A unique name for the route, used for URL generation.

### Request Example
```python
# Example WebSocket endpoint
async def websocket_endpoint(websocket):
    await websocket.accept()
    await websocket.send_text("Hello, websocket!")
    await websocket.close()

routes = [
    WebSocketRoute("/ws", websocket_endpoint, name="websocket_chat")
]
```

### Response
N/A (Defines a WebSocket endpoint)
```

--------------------------------

### Accessing Request Scope in Starlette

Source: https://gist.githubusercontent.com/jph00/e91192e9bdc1640f5421ce3c904f2efb/raw/61a2774912414029edaf1a55b506f0e283b93c46/starlette-quick

Shows how to access the `request.scope` dictionary in Starlette, which contains detailed information about the request, including type, HTTP version, server and client details, scheme, method, path, headers, and application-specific state. This provides a comprehensive view of the request context.

```python
# Example scope dictionary:
# {
#     'type': 'http',
#     'http_version': '1.1',
#     'server': ('127.0.0.1', 9092),
#     'client': ('127.0.0.1', 53102),
#     'scheme': 'https',
#     'method': 'GET',
#     'root_path': '',
#     'path': '/',
#     'raw_path': b'/',
#     'query_string': b'kw=hello',
#     'headers': [
#         (b'host', b'example.com:8080'),
#         (b'connection', b'keep-alive'),
#         (b'cache-control', b'max-age=0'),
#         ...
#     ],
#     'app': <starlette.applications.Starlette object at 0x1081bd650>,
#     'session': {'uid': '57ba03ea7333f72a25f837cf'},
#     'router': <starlette.routing.Router object at 0x1081bd6d0>,
#     'endpoint': <class 'app.index.Index'>,
#     'path_params': {}
# }
```

--------------------------------

### OAuth Client Implementations (Python)

Source: https://www.fastht.ml/docs/apilist.txt

Provides client classes for integrating with various OAuth2 providers including Google, GitHub, HuggingFace, Discord, and Auth0. These classes facilitate the OAuth flow, including generating login links and parsing responses.

```python
class GoogleAppClient
    A `WebApplicationClient` for Google oauth2

    - def __init__(self, client_id, client_secret, code, scope, project_id, **kwargs)
    - @classmethod def from_file(cls, fname, code, scope, **kwargs)

class GitHubAppClient
    A `WebApplicationClient` for GitHub oauth2

    - def __init__(self, client_id, client_secret, code, scope, **kwargs)

class HuggingFaceClient
    A `WebApplicationClient` for HuggingFace oauth2

    - def __init__(self, client_id, client_secret, code, scope, state, **kwargs)

class DiscordAppClient
    A `WebApplicationClient` for Discord oauth2

    - def __init__(self, client_id, client_secret, is_user, perms, scope, **kwargs)
    - def login_link(self, redirect_uri, scope, state)
    - def parse_response(self, code, redirect_uri)

class Auth0AppClient
    A `WebApplicationClient` for Auth0 OAuth2

    - def __init__(self, domain, client_id, client_secret, code, scope, redirect_uri, **kwargs)
    - def login_link(self, req)

@patch def login_link(self, redirect_uri, scope, state, **kwargs)
    Get a login link for this client

def redir_url(request, redir_path, scheme)
    Get the redir url for the host in `request`

@patch def parse_response(self, code, redirect_uri)
    Get the token from the oauth2 server response

@patch def get_info(self, token)
    Get the info for authenticated user

@patch def retr_info(self, code, redirect_uri)
    Combines `parse_response` and `get_info`

@patch def retr_id(self, code, redirect_uri)
    Call `retr_info` and then return id/subscriber value

class OAuth
    - def __init__(self, app, cli, skip, redir_path, error_path, logout_path, login_path, https, http_patterns)
    - def redir_login(self, session)
    - def redir_url(self, req)
    - def login_link(self, req, scope, state)
    - def check_invalid(self, req, session, auth)
    - def logout(self, session)
    - def get_auth(self, info, ident, session, state)

@patch() def consent_url(self, proj)
    Get Google OAuth consent screen URL

@patch def save(self, fname)
    Save credentials to `fname`

def load_creds(fname)
    Load credentials from `fname`

@patch def creds(self)
    Create `Credentials` from the client, refreshing if needed
```

--------------------------------

### Rendering FT Components to XML/HTML

Source: https://www.fastht.ml/docs/explains/explaining_xt_components.html

Shows the resulting XML/HTML structure when a Python function returning FT components is called. This illustrates the conversion of Python objects to their string representation.

```xml
<div class="go">
  <h1>FastHTML APP</h1>
  <p>Let&#x27;s do this</p>
</div>
```

--------------------------------

### Fastlite Query Operations (Select, Filter, Order)

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Demonstrates various ways to query records from a Fastlite table, including selecting all records, limiting and offsetting results, ordering by a field, filtering with raw SQL conditions, using placeholders for safe filtering, and retrieving a single record by its primary key.

```python
# List all records
users()

# Limit, offset, and order results:
users(order_by='name', limit=2, offset=1)

# Filter on the results
users(where="name='Alex'")

# Placeholder for avoiding injection attacks
users("name=?", ('Alex',))

# A single record by pk
users[user.id]
```

--------------------------------

### Create Theme Picker Component (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a theme picker component that allows configuration of colors, radii, shadows, fonts, and mode, with support for custom themes. It accepts color, radii, shadows, font, mode, class list, and custom themes as parameters.

```python
def ThemePicker(color, radii, shadows, font, mode, cls, custom_themes)
    Theme picker component with configurable sections
```

--------------------------------

### Asynchronous HTTP Request with AsyncClient

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Shows how to perform asynchronous tests using httpx.AsyncClient for applications that require async operations. This approach is recommended when dealing with external async resources.

```python
from httpx import AsyncClient
from starlette.applications import Starlette
from starlette.routing import Route
from starlette.requests import Request
from starlette.responses import PlainTextResponse


def hello(request: Request) -> PlainTextResponse:
    return PlainTextResponse("Hello World!")


app = Starlette(routes=[Route("/", hello)])


# if you're using pytest, you'll need to to add an async marker like:
# @pytest.mark.anyio  # using https://github.com/agronholm/anyio
# or install and configure pytest-asyncio (https://github.com/pytest-dev/pytest-asyncio)
async def test_app() -> None:
    # note: you _must_ set `base_url` for relative urls like "/" to work
    async with AsyncClient(app=app, base_url="http://testserver") as client:
        r = await client.get("/")
        assert r.status_code == 200
        assert r.text == "Hello World!"
```

--------------------------------

### Create User Table with Primary Key (Python)

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Demonstrates creating a 'User' table with 'name' as the primary key using the db.create() method. It automatically converts the class to a flexiclass.

```python
class User: name:str; email: str; year_started:int
users = db.create(User, pk='name')
users
```

--------------------------------

### Python: Starlette Lifespan State Management

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Demonstrates managing application state, like an httpx.AsyncClient, across the lifespan and requests using a shared dictionary. The state is a shallow copy.

```python
import contextlib
from typing import AsyncIterator, TypedDict

import httpx
from starlette.applications import Starlette
from starlette.requests import Request
from starlette.responses import PlainTextResponse
from starlette.routing import Route


class State(TypedDict):
    http_client: httpx.AsyncClient


@contextlib.asynccontextmanager
async def lifespan(app: Starlette) -> AsyncIterator[State]:
    async with httpx.AsyncClient() as client:
        yield {"http_client": client}


async def homepage(request: Request) -> PlainTextResponse:
    client = request.state.http_client
    response = await client.get("https://www.example.com")
    return PlainTextResponse(response.text)


app = Starlette(
    lifespan=lifespan,
    routes=[Route("/", homepage)]
)
```

--------------------------------

### Setting HTMX Configuration via Meta Tag

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

Demonstrates how to configure HTMX globally using a meta tag in the HTML document. This approach allows for setting various configuration options, such as the default swap style.

```html
<meta name="htmx-config" content='{"defaultSwapStyle":"outerHTML"}'>
```

--------------------------------

### Create Lightbox Container (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a container component for lightbox items, facilitating the creation of image galleries or slideshows. It accepts lightbox items and keyword arguments.

```python
def LightboxContainer(*lightboxitem, **kwargs)
    Lightbox container that will hold `LightboxItems`
```

--------------------------------

### Combining FTs into Functions (Python)

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Illustrates how to combine multiple FastHTML components into reusable functions. The `Hero` function creates a `Div` containing an `H1` and a `P`, demonstrating component composition for more complex structures. The output is shown as an XML string.

```python
def Hero(title, statement):
    return Div(H1(title),P(statement), cls="hero")
to_xml(Hero("Hello World", "This is a hero statement"))
```

--------------------------------

### DaisyUI Loading Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Implements loading animations from DaisyUI, offering various styles such as 'spinner', 'dots', 'ring', 'ball', 'bars', and 'infinity'. Supports different size variations ('xs', 'sm', 'md', 'lg').

```python
class LoadingT(Enum):
    spinner, dots, ring, ball, bars, infinity, xs, sm, md, lg

def Loading(cls, htmx_indicator, **kwargs):
    # Creates a loading animation component
    pass

```

--------------------------------

### Creating a Div with Heading and Paragraph

Source: https://www.fastht.ml/docs/explains/explaining_xt_components.html

Demonstrates creating a Div component with a Heading (H1) and Paragraph (P) using FastHTML's Python library. The cls attribute applies a CSS class.

```python
from fasthtml.common import *

def example():
    # The code below is a set of ft components
    return Div(
            H1("FastHTML APP"),
            P("Let's do this"),
            cls="go"
    )
```

--------------------------------

### Class-Based Endpoints (WebSocketEndpoint)

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Introduces `WebSocketEndpoint` for handling WebSocket connections using a class-based approach, managing the WebSocket lifecycle within the class.

```APIDOC
## Class-Based Endpoints (WebSocketEndpoint)

### Description
Use `WebSocketEndpoint` to manage WebSocket connections using a class-based structure. This allows encapsulating the WebSocket session lifecycle, including connection, message handling, and disconnection, within a dedicated class.

### Method
`WebSocketRoute(path, endpoint, name=None)` where `endpoint` is a `WebSocketEndpoint` subclass.

### Endpoint
*   **path** (string) - Required - The URL path for the WebSocket endpoint.

### Parameters
*   **path** (string) - Required - The path pattern for the WebSocket endpoint.
*   **endpoint** (`WebSocketEndpoint` subclass) - Required - A class inheriting from `WebSocketEndpoint`.
*   **name** (string) - Optional - A unique name for the route, used for URL generation.

### Request Example
```python
from starlette.endpoints import WebSocketEndpoint

class Chat(WebSocketEndpoint):
    encoding = "utf-8"  # Optional: specify the encoding

    async def on_connect(self, websocket):
        await websocket.accept()
        # Additional connection logic

    async def on_receive(self, websocket, data):
        # Handle incoming messages
        await websocket.send_text(f"Echo: {data}")

    async def on_disconnect(self, websocket, close_code):
        # Handle disconnection
        pass

routes = [
    WebSocketRoute("/chat", Chat)
]
```

### Response
N/A (Manages WebSocket connection lifecycle)
```

--------------------------------

### Organize Routes with APIRouter in FastHTML

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Illustrates the use of `APIRouter` to organize routes across multiple files in a FastHTML application. It shows defining routes in one file (`products.py`) and integrating them into the main application (`main.py`).

```python
# products.py
ar = APIRouter()

@ar
def details(pid: int): return f"Here are the product details for ID: {pid}"

@ar
def all_products(req):
    return Div(
        Div(
            Button("Details",hx_get=details.to(pid=42),hx_target="#products_list",hx_swap="outerHTML",),
        ), id="products_list")
```

```python
# main.py
from products import ar,all_products

app, rt = fast_app()
ar.to_app(app)

@rt
def index():
    return Div(
        "Products",
        hx_get=all_products, hx_swap="outerHTML")
```

--------------------------------

### Array iteration methods

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Demonstrates using standard JavaScript array iteration methods like `forEach` and `map` on collections of elements selected by `any()`.

```javascript
any('button')?.forEach(...)
```

```javascript
any('button')?.map(...)
```

--------------------------------

### Insert Records into Todo Table (Python)

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Shows how to insert records into the 'todos' table using Python class instances, keyword arguments, and dictionaries. The inserted record is returned.

```python
todos.insert(Todo(title='Write MiniDataAPI spec', status='open', name='Braden'))
todos.insert(title='Implement SSE in FastHTML', status='open', name='Alma')
todo = todos.insert(dict(title='Finish development of FastHTML', status='closed', name='Charlie'))
todo
```

--------------------------------

### Safely chaining methods with optional chaining

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Illustrates how to use the optional chaining operator (?) to safely access properties or call methods on potentially null or undefined elements, preventing runtime errors.

```javascript
me("#i_dont_exist")?.classAdd('active')
me("#i_dont_exist", document, false)?.classAdd('active')
```

--------------------------------

### Connecting to an In-Memory SQLite Database

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Shows how to establish a connection to an in-memory SQLite database using the 'database' function, a common method for initializing a MiniDataAPI-compliant database connection.

```python
db = database(':memory:')
```

--------------------------------

### Handle GitHub OAuth Callback

Source: https://www.fastht.ml/docs/explains/oauth.html

Sets up the `/auth_redirect` route to receive the authorization code from GitHub. This code is then used to request user information and an access token.

```python
@app.get(auth_callback_path)
def auth_redirect(code:str):
    return P(f"code: {code}")
```

--------------------------------

### Implement Beforeware for Authentication

Source: https://www.fastht.ml/docs/explains/oauth.html

Creates a 'beforeware' that checks user authentication on each request. It skips the login and callback routes to avoid unnecessary redirects and ensures proper session management.

```python
def before(req, session):
    auth = req.scope['auth'] = session.get('user_id', None)
    if not auth: return RedirectResponse('/login', status_code=303)
    counts.xtra(name=auth)
bware = Beforeware(before, skip=['/login', auth_callback_path])
```

--------------------------------

### APIRouter Usage for Modular Routing

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates how to use APIRouter to organize routes into separate files and include them in a main FastHTML application.

```APIDOC
## APIRouter Usage

### Description
`APIRouter` is useful when you want to split your application routes across multiple `.py` files that are part of a single FastHTML application. It accepts an optional `prefix` argument that will be applied to all routes within that instance of `APIRouter`.

### Example: products.py
```python
# products.py
ar = APIRouter(prefix="/products")

@ar("/all")
def all_products(req):
    return Div(
        "Welcome to the Products Page! Click the button below to look at the details for product 42",
        Div(
            Button(
                "Details",
                hx_get=req.url_for("details", pid=42),
                hx_target="#products_list",
                hx_swap="outerHTML",
            ),
        ),
        id="products_list",
    )


@ar.get("/{pid}", name="details")
def details(pid: int):
    return f"Here are the product details for ID: {pid}"
```

### Example: main.py
```python
# main.py
# from products import ar

app, rt = fast_app()
# ar.to_app(app)

@rt
def index():
    return Div(
        "Click me for a look at our products",
        hx_get=ar.rt_funcs.all_products,
        hx_swap="outerHTML",
    )
```

### Routing Details
Routes defined in `products.py` with `prefix=/products` will be accessible under `/products`.

- `/products/all`
- `/products/{pid}`
```

--------------------------------

### Python Placeholder Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a placeholder element. It accepts arbitrary positional and keyword arguments.

```python
def Placeholder(*c, **kwargs)
    Creates a placeholder
```

--------------------------------

### Article Components (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Components designed for structuring blog posts or articles. Includes `Article` for the main container, `ArticleTitle` for the post title, and `ArticleMeta` for displaying metadata like author and date.

```python
def Article(*c, **kwargs):
    """A styled article container for blog posts or similar content
    """
    pass

def ArticleTitle(*c, **kwargs):
    """A title component for use within an Article
    """
    pass

def ArticleMeta(*c, **kwargs):
    """A metadata component for use within an Article showing things like date, author etc
    """
    pass
```

--------------------------------

### WebSocket API

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Provides details on the WebSocket class for handling real-time, bi-directional communication. It covers accepting connections, sending/receiving data, and closing connections.

```APIDOC
## WebSocket

### Description
Manages WebSocket connections, enabling sending and receiving data between server and client in real-time.

### Signature
`WebSocket(scope, receive=None, send=None)`

### Basic Usage Example
```python
from starlette.websockets import WebSocket


async def app(scope, receive, send):
    websocket = WebSocket(scope=scope, receive=receive, send=send)
    await websocket.accept()
    await websocket.send_text('Hello, world!')
    await websocket.close()
```

### Accessing WebSocket Information
WebSockets behave like a scope dictionary and offer properties for URL, headers, query parameters, and path parameters.

*   `websocket['path']`
*   `websocket.url` (includes `path`, `port`, `scheme`)
*   `websocket.headers` (case-insensitive multi-dict)
*   `websocket.query_params` (immutable multi-dict)
*   `websocket.path_params` (dictionary)

### Connection Management

*   **Accepting Connection**: `await websocket.accept(subprotocol=None, headers=None)`
*   **Closing Connection**: `await websocket.close(code=1000, reason=None)`

### Sending Data

*   `await websocket.send_text(data)`
*   `await websocket.send_bytes(data)`
*   `await websocket.send_json(data, mode="text"|"binary")`

### Receiving Data

*   `await websocket.receive_text()`
*   `await websocket.receive_bytes()`
*   `await websocket.receive_json(mode="text"|"binary")`

*   May raise `starlette.websockets.WebSocketDisconnect()`.

### Iterating Data
Provides asynchronous iterators for receiving data streams.

*   `websocket.iter_text()`
*   `websocket.iter_bytes()`
*   `websocket.iter_json()`

### Example with Iteration
```python
from starlette.websockets import WebSocket


async def app(scope, receive, send):
    websocket = WebSocket(scope=scope, receive=receive, send=send)
    await websocket.accept()
    async for message in websocket.iter_text():
        await websocket.send_text(f"Message text was: {message}")
    await websocket.close()
```

### Sending and Receiving Raw ASGI Messages
Use `websocket.send(message)` and `websocket.receive()` for direct ASGI message handling to maintain correct state.

*   `await websocket.send(message)`
*   `await websocket.receive()`
```

--------------------------------

### Generate GitHub Login Link

Source: https://www.fastht.ml/docs/explains/oauth.html

Defines the `/login` route handler. It constructs the full authorization callback URL and uses the `client` object to generate a link that initiates the GitHub OAuth flow.

```python
@app.get('/login')
def login(request):
    redir = redir_url(request,auth_callback_path)
    login_link = client.login_link(redir)
    return P(A('Login with GitHub', href=login_link))
```

--------------------------------

### Block-Level Text Components (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Components for rendering block-level semantic elements such as blockquotes, captions, citations, time, addresses, abbreviations, definition terms, keyboard input, sample output, variables, figures, details, summaries, data, meters, strikethrough text, underlines, and output elements.

```python
def Blockquote(*c, **kwargs):
    """Blockquote with Styling
    """
    pass

def Caption(*c, **kwargs):
    """Styled caption text
    """
    pass

def Cite(*c, **kwargs):
    """Styled citation text
    """
    pass

def Time(*c, **kwargs):
    """Styled time element
    """
    pass

def Address(*c, **kwargs):
    """Styled address element
    """
    pass

def Abbr(*c, **kwargs):
    """Styled abbreviation with dotted underline
    """
    pass

def Dfn(*c, **kwargs):
    """Styled definition term with italic and medium weight
    """
    pass

def Kbd(*c, **kwargs):
    """Styled keyboard input with subtle background
    """
    pass

def Samp(*c, **kwargs):
    """Styled sample output with subtle background
    """
    pass

def Var(*c, **kwargs):
    """Styled variable with italic monospace
    """
    pass

def Figure(*c, **kwargs):
    """Styled figure container with card-like appearance
    """
    pass

def Details(*c, **kwargs):
    """Styled details element
    """
    pass

def Summary(*c, **kwargs):
    """Styled summary element
    """
    pass

def Data(*c, **kwargs):
    """Styled data element
    """
    pass

def Meter(*c, **kwargs):
    """Styled meter element
    """
    pass

def S(*c, **kwargs):
    """Styled strikethrough text (different semantic meaning from Del)
    """
    pass

def U(*c, **kwargs):
    """Styled underline (for proper names in Chinese, proper spelling etc)
    """
    pass

def Output(*c, **kwargs):
    """Styled output element for form results
    """
    pass
```

--------------------------------

### Generate URL for a mounted application path

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Generates a URL for a specific path within a mounted application, such as static files.

```python
routes = [
    Mount("/static", app=StaticFiles(directory="static"), name="static")
]

# We can use the following to return URLs...
url = request.url_for("static", path="/css/base.css")
```

--------------------------------

### Storing State on Starlette App Instance

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Demonstrates how to store custom state directly on the Starlette application instance using the `app.state` attribute, which can be useful for holding configuration or shared data.

```python
app.state.ADMIN_EMAIL = 'admin@example.org'
```

--------------------------------

### Root Path Handler

Source: https://www.fastht.ml/docs/ref/handlers.html

Defines a special 'index' function that handles requests to the root path ('/'). This provides a simple way to set up the main entry point of a FastHTML application.

```python
@rt
def index(): return "welcome!"
print(cli.get('/').text)
```

--------------------------------

### Manual vs. Automatic component generation comparison

Source: https://www.fastht.ml/docs/ref/defining_xt_component

Compares the output of automatically generated components with manually called __getattr__ to demonstrate that they produce identical HTML. This highlights the underlying mechanism for component creation in FastHTML.

```python
import fasthtml

auto_called = fasthtml.components.Some_never_before_used_tag()
manual_called = fasthtml.components.__getattr__('Some_never_before_used_tag')()

# Proving they generate the same xml
assert to_xml(auto_called) == to_xml(manual_called)
```

--------------------------------

### Server-Side Events (SSE) with FastHTML and HTMX

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Demonstrates integrating Server-Side Events (SSE) using the HTMX SSE extension in FastHTML. It sets up the SSE script, defines an endpoint for SSE connections, and yields messages from an asynchronous generator.

```python
import random
hdrs=(Script(src="https://unpkg.com/htmx-ext-sse@2.2.3/sse.js"),)
app,rt = fast_app(hdrs=hdrs)

@rt
def index(): return Div(hx_ext="sse", sse_connect="/numstream", hx_swap="beforeend show:bottom", sse_swap="message")

# `signal_shutdown()` gets an event that is set on shutdown
shutdown_event = signal_shutdown()

async def number_generator():
    while not shutdown_event.is_set():
        data = Article(random.randint(1, 100))
        yield sse_message(data)

@rt
async def numstream(): return EventStream(number_generator())
```

--------------------------------

### Handle GitHub OAuth Callback and User Session in FastHTML

Source: https://www.fastht.ml/docs/explains/oauth.html

This snippet shows how to handle the callback from GitHub after authentication. It retrieves user information using the provided code, extracts the user ID, stores it in the session, and creates a database entry for the user if they are new. Finally, it redirects the user to the homepage.

```python
from fasthtml.common import *
from fasthtml.fast_response import RedirectResponse

# Assuming 'client' and 'counts' are properly initialized elsewhere
# client = ... 
# counts = ... 
# auth_callback_path = '/auth_callback'

@app.get(auth_callback_path)
def auth_redirect(code:str, request, session):
    redir = redir_url(request, auth_callback_path)
    user_info = client.retr_info(code, redir)
    user_id = user_info[client.id_key] # get their ID
    session['user_id'] = user_id # save ID in the session
    # create a db entry for the user
    if user_id not in counts: counts.insert(name=user_id, count=0)
    return RedirectResponse('/', status_code=303)

@app.get('/')
def home(auth):
    return Div(
        P("Count demo"),
        P(f"Count: ", Span(counts[auth].count, id='count')),
        Button('Increment', hx_get='/increment', hx_target='#count'),
        P(A('Logout', href='/logout'))
    )

@app.get('/increment')
def increment(auth):
    c = counts[auth]
    c.count += 1
    return counts.upsert(c).count

@app.get('/logout')
def logout(session):
    session.pop('user_id', None)
    return RedirectResponse('/login', status_code=303)

# serve() # Assuming serve() is called elsewhere to start the app
```

--------------------------------

### Text Styles Enum (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines various text styles and formatting options available in Franken UI, referencing external documentation for detailed usage. Includes styles for paragraphs, emphasis, weight, color, alignment, and text decoration.

```python
from enum import Enum

class TextT(Enum):
    """Text Styles from https://franken-ui.dev/docs/text
    Members: paragraph, lead, meta, gray, italic, xs, sm, lg, xl, light, normal, medium, bold, extrabold, muted, primary, secondary, success, warning, error, info, left, right, center, justify, start, end, top, middle, bottom, truncate, break_, nowrap, underline, highlight
    """
    pass
```

--------------------------------

### Handling Multipart Form Data

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Demonstrates how to access file uploads and form fields using request.form() with configurable limits for files and fields.

```APIDOC
## POST /upload

### Description
Handles file uploads and form data submitted via multipart/form-data. Allows configuration of maximum files and fields to prevent denial-of-service attacks.

### Method
POST

### Endpoint
/upload

### Parameters
#### Request Body
- **max_files** (int) - Optional - Maximum number of files allowed in the form data.
- **max_fields** (int) - Optional - Maximum number of form fields allowed.
- **upload_file** (File) - Required - The file being uploaded.
- **text_field** (str) - Optional - A text field in the form.

### Request Example
```python
async with request.form(max_files=1000, max_fields=1000) as form:
    filename = form["upload_file"].filename
    contents = await form["upload_file"].read()
    text_data = form["text_field"]
```

### Response
#### Success Response (200)
- **message** (str) - Confirmation message.
- **filename** (str) - The name of the uploaded file.

#### Response Example
```json
{
  "message": "File uploaded successfully",
  "filename": "example.jpg"
}
```

### Error Handling
- **400 Bad Request**: If the form data exceeds the configured limits or is malformed.
- **500 Internal Server Error**: For other processing errors.
```

--------------------------------

### Handle HTTP exceptions with custom response pages

Source: https://gist.githubusercontent.com/jph00/e91192e9bdc1640f5421ce3c904f2efb/raw/61a2774912414029edaf1a55b506f0e283b93c46/starlette-quick

This Python code defines custom handlers for various HTTP status codes (403, 404, 503, 500) to display specific error pages. It utilizes `starlette.exceptions.HTTPException` and `HTMLResponse`. The handlers are registered with the Starlette application using the `exception_handlers` dictionary.

```python
from starlette.exceptions import HTTPException
from starlette.responses import HTMLResponse
import traceback

async def exc_handle_403(request, exc):
    return HTMLResponse("My 403 page", status_code=exc.status_code)

async def exc_handle_404(request, exc):
    return HTMLResponse("My 404 page", status_code=exc.status_code)

async def exc_handle_503(request, exc):
    return HTMLResponse("Failed, please try it later", status_code=exc.status_code)

async def err_handle_500(request, exc):
    # Log.error(traceback.format_exc())
    return HTMLResponse("My 500 page", status_code=500)

exception_handlers = {
    403: exc_handle_403,
    404: exc_handle_404,
    503: exc_handle_503,
    500: err_handle_500,
    #HTTPException: exc_handle_500,
}

# Assuming 'routes' and 'Starlette' are defined elsewhere
# app = Starlette(routes=routes, exception_handlers=exception_handlers)
```

--------------------------------

### Heading Components (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Provides functions for creating HTML heading elements (H1 through H6) with consistent styling and appropriate sizing. These are essential for structuring content and improving readability.

```python
def H1(*c, **kwargs):
    """H1 with styling and appropriate size
    """
    pass

def H2(*c, **kwargs):
    """H2 with styling and appropriate size
    """
    pass

def H3(*c, **kwargs):
    """H3 with styling and appropriate size
    """
    pass

def H4(*c, **kwargs):
    """H4 with styling and appropriate size
    """
    pass

def H5(*c, **kwargs):
    """H5 with styling and appropriate size
    """
    pass

def H6(*c, **kwargs):
    """H6 with styling and appropriate size
    """
    pass
```

--------------------------------

### Save Canvas Data to Database

Source: https://www.fastht.ml/docs/tutorials/e2e.html

Defines a POST route to save canvas data. It accepts the room 'id' and 'canvas_data' as arguments, updates the corresponding room's record in the database with the provided canvas data, and returns a success message.

```python
@rt("/rooms/{id}/save")
async def post(id:int, canvas_data:str):
    rooms.update({'canvas_data': canvas_data}, id)
    return "Canvas saved successfully"
```

--------------------------------

### Define host-based routing with Routers

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Configures different routing logic based on the incoming Host header using `Router` instances for different domains or subdomains.

```python
site = Router()
api = Router()
news = Router()

routes = [
    Host('api.example.org', api, name="site_api")
]

app = Starlette(routes=routes)

app.host('www.example.org', site, name="main_site")

news_host = Host('news.example.org', news)
app.router.routes.append(news_host)
```

--------------------------------

### Create Card Component (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a function to create a complete card component, which typically includes a header, body, and footer. It accepts arbitrary positional and keyword arguments.

```python
def Card(*c, **kwargs)
    Creates a Card with a header, body, and footer
```

--------------------------------

### Handling and Responding to WebSocket Messages in Python

Source: https://www.fastht.ml/docs/explains/websockets.html

Demonstrates how to handle incoming messages in a FastHTML WebSocket route and send a response back to the client. The `on_message` function receives the message and can either use `await send()` or return a response directly.

```python
@app.ws('/ws', conn=on_conn, disconn=on_disconn)
async def on_message(msg:str, send):
    await send(Div('You said: ' + msg, id='notifications'))
    # or...
    return Div('You said: ' + msg, id='notifications')
```

--------------------------------

### Initialize Fabric.js Canvas Drawing Mode and Event Handlers (JavaScript)

Source: https://www.fastht.ml/docs/tutorials/e2e.html

This JavaScript code initializes a Fabric.js canvas, enabling drawing mode and setting the default brush color and width. It also includes event listeners for a color picker and a brush size input, updating the canvas drawing properties accordingly. This script is intended to be embedded within an HTML structure that provides these input elements.

```javascript
var canvas = new fabric.Canvas('canvas');
canvas.isDrawingMode = true;
canvas.freeDrawingBrush.color = '#3CDD8C';
canvas.freeDrawingBrush.width = 10;

document.getElementById('color-picker').onchange = function() {
    canvas.freeDrawingBrush.color = this.value;
};

document.getElementById('brush-size').oninput = function() {
    canvas.freeDrawingBrush.width = parseInt(this.value, 10);
};
```

--------------------------------

### FastHTML Component with Attributes (Python)

Source: https://www.fastht.ml/docs/explains/explaining_xt_components.html

Demonstrates the creation of a FastHTML Label component with a nested Select component. Shows how attributes like 'selected', 'value', 'cls', '_id', and '@click' are handled and rendered. Attributes with leading underscores are stripped, and special attributes like '@click' are passed directly.

```python
#| echo: False
Label(
    "Choose an option", 
    Select(
        Option("one", value="1", selected=True),
        Option("two", value="2", selected=False),
        Option("three", value=3),
        cls="selector",
        _id="counter",
        **{'@click':"alert('Clicked');"},
    ),
    _for="counter",
)
```

--------------------------------

### Dynamic Route with Query Parameters

Source: https://www.fastht.ml/docs/ref/handlers.html

Illustrates using the `to()` method with parameters to generate a route path including query parameters. The `cls` parameter is used to add a CSS class, translating to the `class` attribute in HTML.

```python
@app.get
def autoget(): return Html(Body(Div('Text.', cls='px-2', hx_post=show_host.to(a='b'))))
print(cli.get('/autoget').text)
```

--------------------------------

### Python UkIcon Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates an icon using lucide icons, with parameters for icon name, height, width, stroke width, and CSS classes.

```python
def UkIcon(icon, height, width, stroke_width, cls, **kwargs)
    Creates an icon using lucide icons
```

--------------------------------

### Create Redirect Response in Starlette

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Shows how to implement an HTTP redirect using Starlette's RedirectResponse class. It defaults to a 307 status code and can redirect to any specified URL.

```python
from starlette.responses import PlainTextResponse, RedirectResponse


async def app(scope, receive, send):
    assert scope['type'] == 'http'
    if scope['path'] != '/':
        response = RedirectResponse(url='/')
    else:
        response = PlainTextResponse('Hello, world!')
    await response(scope, receive, send)
```

--------------------------------

### Generate URL with subdomain for host-based routing

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Generates a URL that includes parameters for host-based routing, allowing for dynamic subdomains.

```python
routes = [
    Host("{subdomain}.example.org", name="sub", app=Router(routes=[
        Mount("/users", name="users", routes=[
            Route("/", user, name="user_list"),
            Route("/{username}", user, name="user_detail")
        ])
    ]))
]
...
url = request.url_for("sub:users:user_detail", username=..., subdomain=...)
url = request.url_for("sub:users:user_list", subdomain=...)
```

--------------------------------

### fasthtml.authmw: BasicAuthMiddleware

Source: https://www.fastht.ml/docs/apilist.txt

Implements basic HTTP authentication middleware for a FastHTML application. It requires an application instance, a callback function for authentication, and an optional list of paths to skip.

```python
class BasicAuthMiddleware:
    def __init__(self, app, cb, skip):
        # ... implementation details ...
        pass

    def __call__(self, scope, receive, send):
        # ... implementation details ...
        pass

    def authenticate(self, conn):
        # ... implementation details ...
        pass
```

--------------------------------

### Define Custom 404 Exception Handler

Source: https://www.fastht.ml/docs/ref/concise_guide.html

This snippet shows how to customize the exception handling in FastHTML by defining a `not_found` function for 404 errors and passing it to the `fast_app` during initialization.

```python
def not_found(req, exc): return Titled("404: I don't exist!")
exception_handlers = {404: not_found}
app, rt = fast_app(exception_handlers=exception_handlers)
```

--------------------------------

### Load Room Canvas Data

Source: https://www.fastht.ml/docs/tutorials/e2e.html

Retrieves the canvas data for a specific room. If no data is available, it returns an empty JSON object.

```APIDOC
## GET /rooms/{id}/load

### Description
Retrieves the canvas data for a specific room. If no data is available, it returns an empty JSON object.

### Method
GET

### Endpoint
/rooms/{id}/load

### Parameters
#### Path Parameters
- **id** (int) - Required - The unique identifier of the room.

### Response
#### Success Response (200)
- **canvas_data** (string) - The canvas data in JSON format, or an empty JSON object string "{}" if no data exists.

#### Response Example
{
  "example": "{\"version\":\"3.6.3\",\"objects\":[{\"type\":\"path\",\"originX\":\"left\",\"originY\":\"top\",\"left\":257.5,\"top\":148.5,\"width\":257.5,\"height\":148.5,\"fill\":null,\"stroke\":\"#000000\",\"strokeWidth\":1,\"opacity\":1,\"shadow\":null,\"visible\":true,\"clipPath\":null,\"path\":[[\"M\",0,0,\"L\",257.5,148.5]]}]}"
```

--------------------------------

### Add Static Route with Extensions

Source: https://www.fastht.ml/docs/apilist.txt

Adds a static file route to the application. This function allows serving static files from a specified directory, with support for defining multiple file extensions to be served.

```python
@patch
def static_route_exts(self, prefix, static_path, exts):
    """Add a static route at URL path `prefix` with files from `static_path` and `exts` defined by `reg_re_param()`"""
    pass
```

--------------------------------

### Fasthtml Stripe OTP Functions

Source: https://www.fastht.ml/docs/apilist.txt

Functions for integrating with Stripe for One-Time Passwords (OTP). Includes methods to create and archive prices associated with products. Requires an application name, amount, and currency for price creation.

```python
# Assuming necessary Stripe API client setup

def create_price(app_nm, amt, currency):
    """Create a product and bind it to a price object. If product already exist just return the price list."""
    pass

def archive_price(app_nm):
    """Archive a price - useful for cleanup if testing."""
    pass

class Payment:
    pass # Placeholder for potential Payment class methods
```

--------------------------------

### HTTPException Handler with Header Propagation (Python)

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Demonstrates an advanced HTTPException handler that includes propagating headers from the exception to the JSON response.

```python
async def http_exception(request: Request, exc: HTTPException):
    return JSONResponse(
        {"detail": exc.detail},
        status_code=exc.status_code,
        headers=exc.headers
    )
```

--------------------------------

### Using Starlette State to Wrap Dictionaries

Source: https://gist.githubusercontent.com/jph00/e91192e9bdc1640f5421ce3c904f2efb/raw/61a2774912414029edaf1a55b506f0e283b93c46/starlette-quick

Explains how to use the `State` class from `starlette.datastructures` to wrap a dictionary, allowing attribute-style access (dot syntax) to its elements. Note that bracket notation is no longer supported after wrapping.

```python
from starlette.datastructures import State

data = {
    "name": "Bo"
}
print(data["name"])
# now wrap it with State function
wrapped = State(data)
# You can use the dot syntaxt, but can't use `wrapped["name"]` any more.
print(wrapped.name)
```

--------------------------------

### MonsterUI Team Card Component

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Illustrates creating a reusable 'TeamCard' component using MonsterUI's layout elements like DivLAligned and DivFullySpaced. It includes avatar integration, basic text styling, and icon links for social media.

```python
def TeamCard(name, role, location="Remote"):
    icons = ("mail", "linkedin", "github")
    return Card(
        DivLAligned(
            DiceBearAvatar(name, h=24, w=24),
            Div(H3(name), P(role))),
        footer=DivFullySpaced(
            DivHStacked(UkIcon("map-pin", height=16), P(location)),
            DivHStacked(*(UkIconLink(icon, height=16) for icon in icons))))

```

--------------------------------

### Python GenericLabelInput Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

A `Div(Label, Input)` component with Uk styling. It's generally recommended to use higher-level APIs like `LabelInput`.

```python
def GenericLabelInput(label, lbl_cls, input_cls, container, cls, id, input_fn, **kwargs)
    `Div(Label,Input)` component with Uk styling injected appropriately. Generally you should higher level API, such as `LabelInput` which is created for you in this library
```

--------------------------------

### Python Modal Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a complete modal with appropriate classes for boilerplate placement. It accepts arbitrary positional and keyword arguments.

```python
def Modal(*c, **kwargs)
    Creates a modal with the appropriate classes to put the boilerplate in the appropriate places for you
```

--------------------------------

### Import TestClient for Starlette Application Testing

Source: https://www.fastht.ml/docs/ref/concise_guide.html

This line imports the `TestClient` from Starlette, which is essential for writing unit and integration tests for web applications built with frameworks like FastHTML.

```python
from starlette.testclient import TestClient
```

--------------------------------

### Accessing Request Headers in Starlette

Source: https://gist.githubusercontent.com/jph00/e91192e9bdc1640f5421ce3c904f2efb/raw/61a2774912414029edaf1a55b506f0e283b93c46/starlette-quick

Illustrates how to access request headers in Starlette through the `request.headers` attribute, which provides a dictionary-like object containing header names and values. Shows common headers like 'host', 'user-agent', and 'cookie'.

```python
# Example headers dictionary:
# {
#     'host': 'example.com:8080',
#     'connection': 'keep-alive',
#     'cache-control': 'max-age=0',
#     'sec-ch-ua': 'Google Chrome 80',
#     'dnt': '1',
#     'upgrade-insecure-requests': '1',
#     'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_3) ...',
#     'sec-fetch-dest': 'document',
#     'accept': 'text/html,image/apng,*/*;q=0.8;v=b3;q=0.9',
#     'sec-origin-policy': '0',
#     'sec-fetch-site': 'none',
#     'sec-fetch-mode': 'navigate',
#     'sec-fetch-user': '?1',
#     'accept-encoding': 'gzip, deflate, br',
#     'accept-language': 'en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7,zh-TW;q=0.6',
#     'cookie': 'session=eyJhZG1pbl91c2_KiQ...'
# }
```

--------------------------------

### Python: Starlette Multiple Background Tasks

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Demonstrates adding multiple background tasks to a Starlette response using the BackgroundTasks class. Tasks are executed sequentially, and an exception in one task prevents subsequent tasks from running.

```python
# Signature: BackgroundTasks(tasks=[])
# The tasks are executed in order. In case one of the tasks raises
# an exception, the following tasks will not get the opportunity to be executed.
```

--------------------------------

### Python Select Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a select dropdown with Uk styling. It supports adding a search box and accepts arbitrary keyword arguments.

```python
def Select(*option, **kwargs)
    Creates a select dropdown with uk styling and option for adding a search box
```

--------------------------------

### Accessing the FastHTML Application Instance

Source: https://www.fastht.ml/docs/ref/handlers.html

Illustrates how to access the FastHTML application instance within handler functions, either through the special `app` parameter or by annotating a parameter with `FastHTML`.

```APIDOC
## GET /app

### Description
This endpoint accesses a custom attribute (`chk`) directly from the application instance using the `app` parameter.

### Method
GET

### Endpoint
/app

### Parameters
#### Path Parameters
None

#### Query Parameters
None

#### Request Body
None

### Request Example
```python
app.chk = 'foo'
print(cli.get('/app').text)
```

### Response
#### Success Response (200)
- **app.chk** (string) - The value of the `chk` attribute from the FastHTML application instance.

#### Response Example
```json
"foo"
```

## GET /app2

### Description
This endpoint accesses the application instance and sets custom headers in the response, using a parameter annotated with `FastHTML`.

### Method
GET

### Endpoint
/app2

### Parameters
#### Path Parameters
None

#### Query Parameters
None

#### Request Body
None

### Request Example
```python
r = cli.get('/app2', **hxhdr)
print(r.text)
print(r.headers)
```

### Response
#### Success Response (200)
- **foo.chk** (string) - The value of the `chk` attribute from the FastHTML application instance.
- **Custom Headers** (HttpHeader) - Custom headers set in the response, such as 'mykey': 'myval'.

#### Response Example
```json
foo
Headers({'mykey': 'myval', 'content-length': '3', 'content-type': 'text/html; charset=utf-8'})
```
```

--------------------------------

### Insert Records into Publication Table (Python)

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Demonstrates inserting records into the 'publications' table using class instances, keyword arguments, and dictionaries. The inserted record is returned.

```python
publications.insert(Publication(authors='Alma', year=2019, title='FastHTML'))
publications.insert(authors='Alma', year=2030, title='FastHTML and beyond')
publication= publications.insert((dict(authors='Alma', year=2035, title='FastHTML, the early years')))
publication
```

--------------------------------

### Python UkIconLink Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates an icon link using lucide icons, with parameters for icon, dimensions, stroke width, CSS classes, and button type. Accepts keyword arguments.

```python
def UkIconLink(icon, height, width, stroke_width, cls, button, **kwargs)
    Creates an icon link using lucide icons
```

--------------------------------

### Define Route with Custom Regex Path Parameter

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates defining a route with a custom regular expression for a path parameter. This allows for more specific matching of path segments, such as file extensions.

```python
reg_re_param("imgext", "ico|gif|jpg|jpeg|webm")

@rt(r'/static/{path:path}{fn}.{ext:imgext}')
def get(fn:str, path:str, ext:str): return f"Getting {fn}.{ext} from /{path}"

print(cli.get('/static/foo/jph.ico').text)
```

--------------------------------

### Handle POST Request with Form Data

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates handling a POST request where the 'username' is expected as form data. It also shows how to simulate this request using a client and asserts the response.

```python
@app.post('/profile/me')
def profile_update(username: str): return username

r = cli.post('/profile/me', data={'username' : 'Alexis'}).text
assert r == 'Alexis'
print(r)
```

--------------------------------

### Performing HTTP Redirects

Source: https://www.fastht.ml/docs/ref/handlers.html

Explains how handler functions can return `Redirect` objects to perform HTTP redirects, useful for directing users to different pages or external URLs.

```APIDOC
## GET /app4

### Description
This endpoint returns a `Redirect` object to initiate an HTTP redirect to a specified URL.

### Method
GET

### Endpoint
/app4

### Parameters
#### Path Parameters
None

#### Query Parameters
None

#### Request Body
None

### Request Example
```python
cli.get('/app4', follow_redirects=False)
```

### Response
#### Success Response (303 See Other)
- **Redirect** (Redirect) - Initiates a redirect to the URL specified in the `Redirect` object.

#### Response Example
```
<Response [303 See Other]>
```
```

--------------------------------

### Fastlite NotFoundError Handling

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Demonstrates how to handle `NotFoundError` in Fastlite, which is raised when attempting to access, update, or delete a non-existent record using its primary key.

```python
try:
    users['Amy']
except NotFoundError:
    print('User not found')
```

--------------------------------

### Python Options Helper Function

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Helper function to wrap items into `Option`s for use with the `Select` component. Accepts arbitrary positional arguments.

```python
def Options(*c)
    Helper function to wrap things into `Option`s for use in `Select`
```

--------------------------------

### Custom Regex Path Parameters

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates using regular expressions to define custom parameter types for routes.

```APIDOC
## Custom Regex Path Parameters

### Description
Allows defining custom parameter types using regular expressions, enabling more specific routing rules. The `reg_re_param` function registers a new parameter type.

### Method
GET

### Endpoint
/static/{path:path}{fn}.{ext:imgext}

### Parameters
#### Path Parameters
- **path** (str) - Required - The path segment of the URL.
- **fn** (str) - Required - The filename without extension.
- **ext** (str) - Required - The file extension, matching the registered 'imgext' regex.

### Request Example
```
GET /static/foo/jph.ico
```

### Response
#### Success Response (200)
- **body** (str) - A string indicating the file and path being accessed.

#### Response Example
```
Getting jph.ico from /foo/
```
```

--------------------------------

### Generic Exception Handler for All Errors (Python)

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Shows how to register a handler for the base Exception class to catch and manage any unhandled errors within the application, returning a JSON response.

```python
async def handle_error(request: Request, exc: HTTPException):
    # Perform some logic
    return JSONResponse({"detail": exc.detail}, status_code=exc.status_code)

exception_handlers = {
    Exception: handle_error  # or "500: handle_error"
}
```

--------------------------------

### Define Dynamic Route for HTMX Interaction

Source: https://www.fastht.ml/docs/tutorials/jupyter_and_fasthtml.html

Defines a new route '/click' that responds to HTMX requests. This demonstrates the ability to dynamically add or modify routes in a running FastHTML application without restarting the server.

```python
@rt
def click(): return P('You clicked me!')
```

--------------------------------

### Create Table Component (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a function to create a generic table component. It accepts arbitrary positional and keyword arguments.

```python
def Table(*c, **kwargs)
    Creates a table
```

--------------------------------

### Full HTML Structure Response

Source: https://www.fastht.ml/docs/ref/handlers.html

Shows how to return a complete HTML document structure (including Head and Body) from a FastHTML route handler. FastHTML will not add any boilerplate when a full structure is provided.

```python
@rt('/ft4')
def get(): return Html(Head(Title('hi')), Body(P('there')))

print(cli.get('/ft4').text)
```

--------------------------------

### Create Publication Table with Compound Primary Key (Python)

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Shows how to create a 'Publication' table with a compound primary key consisting of 'authors' and 'year'. This method also accepts a dictionary of keyword arguments.

```python
class Publication: authors: str; year: int; title: str
publications = db.create(Publication, pk=('authors', 'year'))
```

--------------------------------

### Type-Annotated Path Parameters

Source: https://www.fastht.ml/docs/ref/handlers.html

Shows how type annotations on path parameters enable automatic type conversion.

```APIDOC
## Type-Annotated Path Parameters

### Description
When path parameters are type-annotated, FastHTMLL automatically attempts to convert the string value from the URL to the specified type.

### Method
GET

### Endpoint
/html/{idx}

### Parameters
#### Path Parameters
- **idx** (int) - Required - An integer representing an index.

### Request Example
```
GET /html/1
```

### Response
#### Success Response (200)
- **body** (str) - HTML content displaying the next index.

#### Response Example
```html
<body>
  <h4>Next is 2.</h4>
</body>
```
```

--------------------------------

### DaisyUI Alert Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Represents an alert component with predefined styles from DaisyUI. The `AlertT` enum provides style options like 'info', 'success', 'warning', and 'error'. The `Alert` function creates the alert element.

```python
class AlertT(Enum):
    info, success, warning, error

def Alert(*c, **kwargs):
    # Alert informs users about important events.
    pass

```

--------------------------------

### Python UkFormSection Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a form section with a title, description, and an optional button. It accepts positional arguments for content.

```python
def UkFormSection(title, description, *c)
    A form section with a title, description and optional button
```

--------------------------------

### Return Customized Starlette Response

Source: https://gist.githubusercontent.com/jph00/e91192e9bdc1640f5421ce3c904f2efb/raw/61a2774912414029edaf1a55b506f0e283b93c46/starlette-quick

Generates a customized HTTP response in Starlette, including JSON data, media type, status code, and headers. It utilizes the `Response` class from `starlette.responses` and `json.dumps` for data serialization.

```python
import json
from starlette.responses import Response

async def handler(request):
    data = {
        "name": "Bo"
    }
    return Response(json.dumps(data), media_type="application/json")
```

```python
return Response(content, statu_code=404)
```

```python
headers = {
	"x-extra-key": "value"
}
return Response(content, status_code=200, headers=headers)
```

--------------------------------

### Generate URL path without a request instance

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Generates a URL path directly from the application instance when no active request is available. This method does not use the request context.

```python
url = app.url_path_for("user_detail", username=...)
```

--------------------------------

### Scoping functions and variables within a block

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Illustrates how to scope JavaScript variables and functions within a block ({}) to prevent global scope pollution, demonstrating a practical use case with event listeners.

```javascript
{
  let note = "hi"
  function hey(text) { alert(text) }
  me().on('click', ev => { hey(note) })
}
```

--------------------------------

### fasthtml.components: Element Finding and Conversion

Source: https://www.fastht.ml/docs/apilist.txt

Includes functions for navigating and transforming HTML structures. `find_inputs` locates elements by tag and attributes, while `html2ft` converts raw HTML strings into FastHTML expressions.

```python
def find_inputs(e, tags, **kw):
    """Recursively find all elements in `e` with `tags` and attrs matching `kw`"""
    # ... implementation details ...
    pass

def html2ft(html, attr1st):
    """Convert HTML to an `ft` expression"""
    # ... implementation details ...
    pass
```

--------------------------------

### Stream Response Content in Starlette

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Demonstrates how to stream response content using Starlette's StreamingResponse class. This is suitable for large responses or real-time data, accepting async generators or iterators.

```python
from starlette.responses import StreamingResponse
import asyncio


async def slow_numbers(minimum, maximum):
    yield '<html><body><ul>'
    for number in range(minimum, maximum + 1):
        yield '<li>%d</li>' % number
        await asyncio.sleep(0.5)
    yield '</ul></body></html>'


async def app(scope, receive, send):
    assert scope['type'] == 'http'
    generator = slow_numbers(1, 10)
    response = StreamingResponse(generator, media_type='text/html')
    await response(scope, receive, send)
```

--------------------------------

### Accessing Request URL Properties in Starlette

Source: https://gist.githubusercontent.com/jph00/e91192e9bdc1640f5421ce3c904f2efb/raw/61a2774912414029edaf1a55b506f0e283b93c46/starlette-quick

Demonstrates how to access various components of a request's URL object in Starlette, such as the full URL string, scheme, network location, path, query string, hostname, and port. This is done via the `request.url` attribute.

```python
# Get request full url: 
url = str(request.url)
# Get scheme: request.url.scheme (http, https, ws, wss)
# Get netloc: request.url.netloc, e.g.: example.com:8080
# Get path: request.url.path, e.g.: /search
# Get query string: request.url.query, e.g.: kw=hello
# Get hostname: request.url.hostname, e.g.: example.com
# Get port: request.url.port, e.g.: 8080
# If using secure scheme: request.url.is_secure, True is schme is `https` or `wss`
```

--------------------------------

### JavaScript to Load Existing Canvas Data

Source: https://www.fastht.ml/docs/tutorials/e2e.html

Updates the client-side JavaScript to load previously saved canvas data. It fetches data from the '/rooms/{id}/load' endpoint and uses the fabric.js library to load the JSON data onto the canvas, then re-renders it.

```javascript
js = f"\n    var canvas = new fabric.Canvas('canvas');
    canvas.isDrawingMode = true;
    canvas.freeDrawingBrush.color = '#3CDD8C';
    canvas.freeDrawingBrush.width = 10;
    // Load existing canvas data
    fetch(`/rooms/{id}/load`)
    .then(response => response.json())
    .then(data => {{
        if (data && Object.keys(data).length > 0) {{
            canvas.loadFromJSON(data, canvas.renderAll.bind(canvas));
        }}
    }});
    
    // ... (rest of the JavaScript remains the same)
"
```

--------------------------------

### Placeholder Image Generation (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

A function to generate placeholder images using the Picsum Photos API. It allows customization of height, width, image ID, grayscale effect, and blur. This is useful for UI mockups and development.

```python
def PicSumImg(h, w, id, grayscale, blur, **kwargs):
    """Creates a placeholder image using https://picsum.photos/
    """
    pass
```

--------------------------------

### Add Single Static Route

Source: https://www.fastht.ml/docs/apilist.txt

Adds a static file route for a single specified file extension. This is a convenient way to serve static assets like CSS or JavaScript files from a designated directory.

```python
@patch
def static_route(self, ext, prefix, static_path):
    """Add a static route at URL path `prefix` with files from `static_path` and single `ext` (including the '.')"""
    pass
```

--------------------------------

### Surreal.js DOM Ready Execution Wrapper

Source: https://www.fastht.ml/docs/apilist.txt

Wraps JavaScript code to be executed after the DOM is ready using Surreal.js. It sets context variables 'm' (for the current module) and 'p' (for the parent element).

```Python
def Surreal(code)
    Wrap `code` in `domReadyExecute` and set `m=me()` and `p=me('-')`
```

--------------------------------

### Create a Div component using NotStr

Source: https://www.fastht.ml/docs/ref/defining_xt_component

Demonstrates creating an HTML <div> element as a string using the NotStr class. This method is straightforward for single instances but can become cumbersome for complex structures.

```python
div_NotStr = NotStr('<div></div>') 
print(div_NotStr)
```

--------------------------------

### Python UploadZone Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a file drop zone component with default styling. It accepts arbitrary positional and keyword arguments.

```python
def UploadZone(*c, **kwargs)
    A file drop zone component with default styling
```

--------------------------------

### Favicon Headers for Light and Dark Modes

Source: https://www.fastht.ml/docs/apilist.txt

Generates HTML header tags for favicons, supporting both a light mode favicon and a dark mode favicon. This allows for adaptive favicons based on user preference or system theme.

```Python
def Favicon(light_icon, dark_icon)
    Light and dark favicon headers
```

--------------------------------

### Including JavaScript with Script Tag (Python)

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Demonstrates how to include external JavaScript files using the `Script` component within the `hdrs` argument of `fast_app`. It also shows how to embed inline JavaScript, including dynamically generated data, for client-side execution.

```python
# In future snippets this import will not be shown, but is required
from fasthtml.common import *
app,rt = fast_app(hdrs=[Script(src="https://cdn.plot.ly/plotly-2.32.0.min.js")])
# `index` is a special function name which maps to the `/` route. 
@rt
def index():
    data = {'somedata':'fill me in'}
    # `Titled` returns a title tag and an h1 tag with the 1st param, with remaining params as children in a `Main` parent. 
    return Titled("Chart Demo", Div(id="myDiv"), Script(f"var data = {data}; Plotly.newPlot('myDiv', data);"))
# In future snippets `serve() will not be shown, but is required
serve()
```

--------------------------------

### HTML Partial with Title, H1, and Children

Source: https://www.fastht.ml/docs/apilist.txt

An HTML partial component that includes a <title> tag, an <h1> heading, and any additional child elements provided. It's designed for structured page content.

```Python
@delegates(ft_hx, keep=True) def Titled(title, *args, **kwargs)
    An HTML partial containing a `Title`, and `H1`, and any provided children
```

--------------------------------

### Handle JSON Request with Dataclass and HTML Response

Source: https://www.fastht.ml/docs/ref/handlers.html

Shows how to handle a POST request with JSON data, using a dataclass for structure, and returning an HTML response. This combines JSON parsing with HTML generation.

```python
@app.post("/b")
def index(it: Bodie): return Titled("It worked!", P(f"{it.a}, {it.b}"))

s = json.dumps({"b": "Lorem", "a": 15})
print(cli.post('/b', headers={"Content-Type": "application/json", 'hx-request':"1"}, data=s).text)
```

--------------------------------

### Fasthtml SVG Element Creation

Source: https://www.fastht.ml/docs/apilist.txt

Provides functions to create standard SVG elements and manage SVG attributes. Includes a base `Svg` function, helper for `FT` elements with SVG attributes, and specific shapes like `Rect`, `Circle`, `Ellipse`, `Line`, `Polyline`, `Polygon`, and `Text`. Also includes a `PathFT` class for detailed path construction and functions for SVG transformations and OOB/inband swaps.

```python
from fast_hx import _delegates as ft_hx

def Svg(*args, **kwargs):
    """An SVG tag; xmlns is added automatically, and viewBox defaults to height and width if not provided"""
    pass

@ft_hx()
def ft_svg(tag, *c, **kwargs):
    """Create a standard `FT` element with some SVG-specific attrs"""
    pass

@ft_hx(ft_svg)
def Rect(width, height, x, y, fill, stroke, stroke_width, rx, ry, **kwargs):
    """A standard SVG `rect` element"""
    pass

@ft_hx(ft_svg)
def Circle(r, cx, cy, fill, stroke, stroke_width, **kwargs):
    """A standard SVG `circle` element"""
    pass

@ft_hx(ft_svg)
def Ellipse(rx, ry, cx, cy, fill, stroke, stroke_width, **kwargs):
    """A standard SVG `ellipse` element"""
    pass

def transformd(translate, scale, rotate, skewX, skewY, matrix):
    """Create an SVG `transform` kwarg dict"""
    pass

@ft_hx(ft_svg)
def Line(x1, y1, x2, y2, stroke, w, stroke_width, **kwargs):
    """A standard SVG `line` element"""
    pass

@ft_hx(ft_svg)
def Polyline(*args, **kwargs):
    """A standard SVG `polyline` element"""
    pass

@ft_hx(ft_svg)
def Polygon(*args, **kwargs):
    """A standard SVG `polygon` element"""
    pass

@ft_hx(ft_svg)
def Text(*args, **kwargs):
    """A standard SVG `text` element"""
    pass

class PathFT:
    def M(self, x, y):
        """Move to."""
        pass

    def L(self, x, y):
        """Line to."""
        pass

    def H(self, x):
        """Horizontal line to."""
        pass

    def V(self, y):
        """Vertical line to."""
        pass

    def Z(self):
        """Close path."""
        pass

    def C(self, x1, y1, x2, y2, x, y):
        """Cubic Bzier curve."""
        pass

    def S(self, x2, y2, x, y):
        """Smooth cubic Bzier curve."""
        pass

    def Q(self, x1, y1, x, y):
        """Quadratic Bzier curve."""
        pass

    def T(self, x, y):
        """Smooth quadratic Bzier curve."""
        pass

    def A(self, rx, ry, x_axis_rotation, large_arc_flag, sweep_flag, x, y):
        """Elliptical Arc."""
        pass

def SvgOob(*args, **kwargs):
    """Wraps an SVG shape as required for an HTMX OOB swap"""
    pass

def SvgInb(*args, **kwargs):
    """Wraps an SVG shape as required for an HTMX inband swap"""
    pass
```

--------------------------------

### Single File Upload Handler with Starlette

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Handles single file uploads using Starlette's UploadFile. It reads the file content, saves it to a specified directory, and returns the file size. Requires `Path` from the `pathlib` module and `UploadFile` from `fastapi` or `starlette.datastructures`. Assumes a form with an 'file' input field and a POST request to '/upload'.

```python
from pathlib import Path
from fastapi import FastAPI, UploadFile, Form
from starlette.responses import HTMLResponse
from starlette.requests import Request
from starlette.templating import Jinja2Templates

# Assuming 'rt' is a decorator for routing, similar to FastAPI's @app.post
# Placeholder for the actual router/decorator
def rt(func):
    return func

# Placeholder for Div and P components if they are custom HTML elements
class Div:
    def __init__(self, id, *children):
        self.id = id
        self.children = children
    def __html__(self):
        return f'<div id="{self.id}">{''.join(child.__html__() for child in self.children)}</div>'

class P:
    def __init__(self, *text):
        self.text = text
    def __html__(self):
        return f'<p>{''.join(str(t) for t in self.text)}</p>'

class Form:
    def __init__(self, hx_post, hx_target, *children):
        self.hx_post = hx_post
        self.hx_target = hx_target
        self.children = children
    def __html__(self):
        return f'<form hx-post="{self.hx_post}" hx-target="{self.hx_target}">{''.join(child.__html__() for child in self.children)}</form>'

class Input:
    def __init__(self, type, name, **kwargs):
        self.type = type
        self.name = name
        self.kwargs = kwargs
    def __html__(self):
        attrs = ' '.join(f'{k}="{v}"' for k, v in self.kwargs.items())
        return f'<input type="{self.type}" name="{self.name}" {attrs}>'

class Button:
    def __init__(self, text, type):
        self.text = text
        self.type = type
    def __html__(self):
        return f'<button type="{self.type}">{self.text}</button>'


upload_dir = Path("filez")

@rt
def index():
    return (
        Form(hx_post="upload", hx_target="#result")(
            Input(type="file", name="file"),
            Button("Upload", type="submit")),
        Div(id="result")
    )

# Use `async` handlers where IO is used to avoid blocking other clients
@rt
async def upload(file: UploadFile):
    filebuffer = await file.read()
    (upload_dir / file.filename).write_bytes(filebuffer)
    return P('Size: ', file.size)

```

--------------------------------

### URL Generation with req.url_for()

Source: https://www.fastht.ml/docs/ref/handlers.html

Shows how to generate absolute URLs for named routes from a request object.

```APIDOC
## URL Generation with req.url_for()

### Description
Generates absolute URLs (including scheme and host) for named routes using the request object's `url_for` method.

### Method
N/A (Function Usage)

### Endpoint
N/A

### Parameters
N/A

### Request Example
```python
# Assuming 'req' is the request object
# Generates absolute URL for the 'gday' route
url_gday = req.url_for('gday', nm='Alexis')
# Generates absolute URL for the 'show_host' route
url_host = req.url_for('show_host')

print(f"{url_gday}; {url_host}")
```

### Response
#### Success Response (N/A)
- **urls** (str) - A string containing generated absolute URLs.

#### Response Example
```
http://testserver/user/Alexis; http://testserver/hostie
```
```

--------------------------------

### Style Element from File with Variable Replacement

Source: https://www.fastht.ml/docs/apilist.txt

Creates an HTML style element (<style>) with content read from a file. It also performs CSS variable replacement using provided keyword arguments, similar to 'replace_css_vars'.

```Python
def StyleX(fname, **kw)
    A `style` element with contents read from `fname` and variables replaced from `kw`
```

--------------------------------

### Handle All Form Data as a Dictionary

Source: https://www.fastht.ml/docs/ref/handlers.html

Explains how to capture all incoming form data into a dictionary parameter. Note that all values are converted to strings in this case.

```python
@app.post("/bodied/")
def bodied(data:dict): return data

d = dict(a=1, b='foo')
print(cli.post('/bodied/', data=d).text)
```

--------------------------------

### Surreal.js Script Block for Any Matching Element

Source: https://www.fastht.ml/docs/apilist.txt

Creates an asynchronous Surreal.js script block that executes JavaScript on any element matching the provided selector 'sel'.

```Python
def AnyNow(sel, code)
    An async surreal.js script block on selector `any(sel)`
```

--------------------------------

### Python Progress Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a progress bar component. It accepts arbitrary positional and keyword arguments.

```python
def Progress(*c, **kwargs)
    Creates a progress bar
```

--------------------------------

### Handling Unannotated Path Parameters

Source: https://www.fastht.ml/docs/ref/handlers.html

Explains the behavior and warnings when path parameters are not properly annotated.

```APIDOC
## Handling Unannotated Path Parameters

### Description
Demonstrates how FastHTMLL handles path parameters in handler functions. Unannotated parameters or those not recognized as special names are ignored, potentially leading to warnings and unexpected behavior.

### Method
GET

### Endpoint
/oops

### Parameters
#### Query Parameters
- **nope** (str) - Optional - A query parameter that will be ignored if not annotated.

### Request Example
```
GET /oops?nope=1
```

### Response
#### Success Response (200)
- **body** (str) - An empty string, as the 'nope' parameter is ignored.

#### Response Example
```
(No output, but a UserWarning is printed to stderr)
```

**Note:** To correctly capture query parameters, they must be type-annotated (e.g., `nope: str`) or be a recognized special name (e.g., `req`).
```

--------------------------------

### Starlette Path Parameters with Type Conversion

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Demonstrates how to define routes with dynamic path parameters and use built-in convertors like 'int' and 'float' to automatically cast captured values. It also shows how to register custom convertors.

```python
from starlette.routing import Route


# Basic path parameter
Route('/users/{username}', user)

# Path parameters with convertors
Route('/users/{user_id:int}', user)
Route('/floating-point/{number:float}', floating_point)
Route('/uploaded/{rest_of_path:path}', uploaded)

# Custom convertor registration
from datetime import datetime
from starlette.convertors import Convertor, register_url_convertor


class DateTimeConvertor(Convertor):
    regex = "[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(.[0-9]+)?"

    def convert(self, value: str) -> datetime:
        return datetime.strptime(value, "%Y-%m-%dT%H:%M:%S")

    def to_string(self, value: datetime) -> str:
        return value.strftime("%Y-%m-%dT%H:%M:%S")

register_url_convertor("datetime", DateTimeConvertor())

# Using the custom convertor
Route('/history/{date:datetime}', history)
```

--------------------------------

### Create login_required decorator for endpoint authentication

Source: https://gist.githubusercontent.com/jph00/e91192e9bdc1640f5421ce3c904f2efb/raw/61a2774912414029edaf1a55b506f0e283b93c46/starlette-quick

This Python decorator enforces user login before accessing an endpoint. It checks for a 'login_user' in the session and redirects to a login page if the user is not authenticated. It requires the `functools` and `starlette.endpoints` modules.

```python
import functools
from starlette.endpoints import HTTPEndpoint
from starlette.responses import Response

def login_required(login_url="/signin"):
    def decorator(handler):
        @functools.wraps(handler)
        async def new_handler(obj, req, *args, **kwargs):
            user = req.session.get("login_user")
            if user is None:
                return seeother(login_url)
            return await handler(obj, req, *args, **kwargs)
        return new_handler
    return decorator

class MyAccount(HTTPEndpiont):
    @login_required()
    async def get(self, request):
        # some logic here
        content = "hello"
        return Response(content)
```

--------------------------------

### Dynamic Route Referencing with HTMX

Source: https://www.fastht.ml/docs/ref/handlers.html

Shows how to use the `to()` method of a handler function to dynamically reference its route path, specifically within an `hx_post` attribute for HTMX. This promotes DRY code by avoiding hardcoded URLs.

```python
@app.get
def autopost(): return Html(Div('Text.', hx_post=yoyo.to()))
print(cli.get('/autopost').text)
```

--------------------------------

### Custom HTML Exception Handlers for 404 and 500 Errors (Python)

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Demonstrates how to define custom asynchronous functions to handle 404 and 500 errors by returning specific HTML responses. These handlers are registered with the Starlette application.

```python
from starlette.applications import Starlette
from starlette.exceptions import HTTPException
from starlette.requests import Request
from starlette.responses import HTMLResponse


HTML_404_PAGE = ...
HTML_500_PAGE = ...


async def not_found(request: Request, exc: HTTPException):
    return HTMLResponse(content=HTML_404_PAGE, status_code=exc.status_code)

async def server_error(request: Request, exc: HTTPException):
    return HTMLResponse(content=HTML_500_PAGE, status_code=exc.status_code)


exception_handlers = {
    404: not_found,
    500: server_error
}

app = Starlette(routes=routes, exception_handlers=exception_handlers)
```

--------------------------------

### Python ModalDialog Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a modal dialog element. It accepts arbitrary positional and keyword arguments.

```python
def ModalDialog(*c, **kwargs)
    Creates a modal dialog
```

--------------------------------

### Create Card Footer (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a function to create a footer section for a card component. It accepts arbitrary positional and keyword arguments.

```python
def CardFooter(*c, **kwargs)
    Creates a card footer
```

--------------------------------

### CORS Preflight Request

Source: https://www.fastht.ml/docs/ref/handlers.html

Handles OPTIONS requests for a specific route, setting CORS headers to allow POST requests from any origin.

```APIDOC
## OPTIONS /form-submit/{list_id}

### Description
Responds to OPTIONS requests for the /form-submit/{list_id} endpoint with CORS headers, allowing POST requests from any origin.

### Method
OPTIONS

### Endpoint
/form-submit/{list_id}

### Parameters
#### Path Parameters
- list_id (str) - Required - Identifier for the form submission context.

### Request Example
{
  "example": ""
}

### Response
#### Success Response (200)
- Headers (dict) - CORS headers including Allow-Origin, Allow-Methods, and Allow-Headers.

#### Response Example
{
  "example": "{'Access-Control-Allow-Origin': '*', 'Access-Control-Allow-Methods': 'POST', 'Access-Control-Allow-Headers': '*'}"
}
```

--------------------------------

### Python ModalFooter Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a modal footer element. It accepts arbitrary positional and keyword arguments.

```python
def ModalFooter(*c, **kwargs)
    Creates a modal footer
```

--------------------------------

### Python: Starlette Background Task

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Illustrates adding a single background task to a Starlette response. The task executes after the response has been sent to the client.

```python
from starlette.applications import Starlette
from starlette.responses import JSONResponse
from starlette.routing import Route
from starlette.background import BackgroundTask


... # Assume signup endpoint and send_welcome_email function are defined

async def signup(request):
    data = await request.json()
    username = data['username']
    email = data['email']
    task = BackgroundTask(send_welcome_email, to_address=email)
    message = {'status': 'Signup successful'}
    return JSONResponse(message, background=task)

async def send_welcome_email(to_address):
    ... # actual email sending logic


routes = [
    ... # other routes
    Route('/user/signup', endpoint=signup, methods=['POST'])
]

app = Starlette(routes=routes)
```

--------------------------------

### Access Request and Session Data in FastHTML

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Demonstrates how to access client IP and manage session data like visit counts and user IDs within a FastHTML route handler. It utilizes the special `sess` parameter for session access.

```python
from datetime import datetime

@rt
def profile(req, sess, user_id: int=None):
    ip = req.client.host
    sess['last_visit'] = datetime.now().isoformat()
    visits = sess.setdefault('visit_count', 0) + 1
    sess['visit_count'] = visits
    user = get_user(user_id or sess.get('user_id'))
    return Titled(f"Profile: {user.name}", 
                  P(f"Visits: {visits}"), 
                  P(f"IP: {ip}"),
                  Button("Logout", hx_post=logout))
```

--------------------------------

### String Formatting: Loose Formatting

Source: https://www.fastht.ml/docs/apilist.txt

A flexible string formatting function that uses keyword arguments to format a given string. It is less strict about braces that are not part of template parameters, allowing for more complex string construction.

```Python
def loose_format(s, **kw)
    String format `s` using `kw`, without being strict about braces outside of template params
```

--------------------------------

### Rendered HTML for FastHTML Component

Source: https://www.fastht.ml/docs/explains/explaining_xt_components.html

The resulting HTML structure generated from the FastHTML Python code. It illustrates how the attributes are translated into HTML tags and attributes, including the 'selected' attribute for the option, 'for' and 'id' attributes for label and select, and the '@click' event handler.

```xml
<label for="counter">
Choose an option
  <select id="counter" @click="alert(&#x27;Clicked&#x27;);" class="selector" name="counter">
    <option value="1" selected>one</option>
    <option value="2" >two</option>
    <option value="3">three</option>
  </select>
</label>
```

--------------------------------

### Script Element from File with Attributes

Source: https://www.fastht.ml/docs/apilist.txt

Creates an HTML script element (<script>) whose content is read from a specified file. It supports various attributes like 'src', 'nomodule', 'type', 'async', 'defer', 'charset', 'crossorigin', and 'integrity'.

```Python
def ScriptX(fname, src, nomodule, type, _async, defer, charset, crossorigin, integrity, **kw)
    A `script` element with contents read from `fname`
```

--------------------------------

### Generate URL for Named Route using uri()

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates using the uri() function to generate a URL for a named route ('gday') with a path parameter ('nm'). The generated URL is used as a link within an HTML component.

```python
@app.get
def autolink(): return Html(Div('Text.', link=uri('gday', nm='Alexis')))
print(cli.get('/autolink').text)
```

--------------------------------

### FastTag Attribute Handling (Python)

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Illustrates advanced attribute handling in FastHTML, including boolean attributes, type conversion for values, aliasing attributes like 'cls' to 'class', and using dictionary unpacking for special attributes like '@click'. It also shows how to use '_for' or 'fr' for the 'for' attribute.

```python
Label(
    "Choose an option", 
    Select(
        Option("one", value="1", selected=True),  # True renders just the attribute name
        Option("two", value=2, selected=False),   # Non-string values are converted to strings. False omits the attribute entirely
        cls="selector", id="counter",             # 'cls' becomes 'class'
        **{'@click':"alert('Clicked');"},         # Dict unpacking for attributes with special chars
    ),
    _for="counter",                               # '_for' becomes 'for' (can also use 'fr')
)
```

--------------------------------

### Python Input Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines an Input component with default styling. It accepts arbitrary positional and keyword arguments.

```python
def Input(*c, **kwargs)
    An Input with default styling
```

--------------------------------

### Import Core Symbols from FastHTML

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Imports all essential symbols from the FastHTML common module, including components from Starlette. This import is typically the first step in any FastHTML application.

```python
from fasthtml.common import *

```

--------------------------------

### Create Tab Container (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a function to create a TabContainer where child elements represent different tabs. It accepts list items and keyword arguments.

```python
def TabContainer(*li, **kwargs)
    A TabContainer where children will be different tabs
```

--------------------------------

### Stream a File using Starlette FileResponse

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Asynchronously streams a file as an HTTP response. It handles essential headers like Content-Length, Last-Modified, and ETag. Accepts path, headers, media_type, filename, and content_disposition_type as arguments.

```python
from starlette.responses import FileResponse


async def app(scope, receive, send):
    assert scope['type'] == 'http'
    response = FileResponse('statics/favicon.ico')
    await response(scope, receive, send)
```

--------------------------------

### Create Table from Dictionaries (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a table component from provided header data and a list of dictionaries for the body data, along with render functions for cells and styling options. Supports sorting and custom classes. It accepts header data, body data (list of dicts), footer data, header cell render function, body cell render function, footer cell render function, class list, sortable boolean, and other keyword arguments.

```python
def TableFromDicts(header_data, body_data, footer_data, header_cell_render, body_cell_render, footer_cell_render, cls, sortable, **kwargs)
    Creates a Table from a list of header data and a list of dicts of body data
```

--------------------------------

### Python Upload Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a file upload component with default styling. It accepts arbitrary positional and keyword arguments.

```python
def Upload(*c, **kwargs)
    A file upload component with default styling
```

--------------------------------

### MonsterUI String Conversion Utility

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

A utility function `stringify` that converts various input types into strings suitable for passing to FrankenUI (FT) components. This ensures data compatibility across different parts of the UI framework.

```python
def stringify(o):
    # Converts input types into strings that can be passed to FT components
    pass

```

--------------------------------

### File Upload API

Source: https://www.fastht.ml/docs/ref/handlers.html

Details how to handle file uploads using FastHTML. The /upload endpoint accepts a file and returns its content.

```APIDOC
## POST /upload

### Description
Accepts a file upload named 'uf', reads its content, and returns it as a decoded string.

### Method
POST

### Endpoint
/upload

### Parameters
#### Request Body
- uf (UploadFile) - Required - The file to upload.
- msg (str) - Optional - Additional data sent with the file.

### Request Example
{
  "example": "files={'uf': open('../../CHANGELOG.md', 'rb')}, data={'msg': 'Hello'}"
}

### Response
#### Success Response (200)
- Output (str) - The decoded content of the uploaded file.

#### Response Example
{
  "example": "# Release notes"
}
```

--------------------------------

### Register Custom Path Parameter with Regex

Source: https://www.fastht.ml/docs/ref/handlers.html

Register a custom path parameter type 'imgext' that matches common image file extensions using regular expressions. This allows for more complex route patterns with specific parameter types.

```python
from fastht.core import reg_re_param

reg_re_param('imgext', r'\.(?:png|jpg|jpeg|gif|bmp|tiff|webp)')

# Example route using the custom parameter:
# @rt('/static/{path:path}{fn}.{ext:imgext}')
# def handler(path: str, fn: str, ext: str):
#     return f"Path: {path}, Filename: {fn}, Extension: {ext}"
```

--------------------------------

### Custom JSON Exception Handler for HTTPException (Python)

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Illustrates how to create a custom handler for the HTTPException class to return JSON responses. This handler extracts the detail and status code from the HTTPException.

```python
async def http_exception(request: Request, exc: HTTPException):
    return JSONResponse({"detail": exc.detail}, status_code=exc.status_code)

exception_handlers = {
    HTTPException: http_exception
}
```

--------------------------------

### Create Table from Lists (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a table component from provided header, body, and footer data, along with render functions for cells and styling options. Supports sorting and custom classes. It accepts header data, body data, footer data, header cell render function, body cell render function, footer cell render function, class list, sortable boolean, and other keyword arguments.

```python
def TableFromLists(header_data, body_data, footer_data, header_cell_render, body_cell_render, footer_cell_render, cls, sortable, **kwargs)
    Creates a Table from a list of header data and a list of lists of body data
```

--------------------------------

### Define Static File Extensions Regex in Python

Source: https://www.fastht.ml/docs/ref/handlers.html

Shows how to define a regular expression for static file extensions using `reg_re_param`. This is used internally by `static_route_exts` to determine which files to serve.

```python
reg_re_param("static", "ico|gif|jpg|jpeg|webm|css|js|woff|png|svg|mp4|webp|ttf|otf|eot|woff2|txt|html|map")
```

--------------------------------

### Python NavContainer Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a navigation container, suitable for sidebars. It accepts list items as positional arguments and keyword arguments.

```python
def NavContainer(*li, **kwargs)
    Creates a navigation container (useful for creating a sidebar navigation).  A Nav is a list (NavBar is something different)
```

--------------------------------

### Text Formatting Components (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

A collection of functions for applying semantic and stylistic formatting to text, including emphasis, strong text, italics, small text, marked text, deleted text, inserted text, subscripts, and superscripts.

```python
def Em(*c, **kwargs):
    """Styled emphasis text
    """
    pass

def Strong(*c, **kwargs):
    """Styled strong text
    """
    pass

def I(*c, **kwargs):
    """Styled italic text
    """
    pass

def Small(*c, **kwargs):
    """Styled small text
    """
    pass

def Mark(*c, **kwargs):
    """Styled highlighted text
    """
    pass

def Del(*c, **kwargs):
    """Styled deleted text
    """
    pass

def Ins(*c, **kwargs):
    """Styled inserted text
    """
    pass

def Sub(*c, **kwargs):
    """Styled subscript text
    """
    pass

def Sup(*c, **kwargs):
    """Styled superscript text
    """
    pass
```

--------------------------------

### Define Default Headers

Source: https://www.fastht.ml/docs/apilist.txt

Sets default headers for a FastHTML application, potentially including headers for HTMX and SurrealDB integrations. This ensures consistent header management across the application.

```python
def def_hdrs(htmx, surreal):
    """Default headers for a FastHTML app"""
    pass
```

--------------------------------

### Inserting HTML using insertAdjacentHTML

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Demonstrates using insertAdjacentHTML to insert HTML strings at specific positions relative to the target element.

```javascript
me().insertAdjacentHTML("beforebegin", new_element)
```

--------------------------------

### Generate URL Path using app.url_path_for()

Source: https://www.fastht.ml/docs/ref/handlers.html

Illustrates using the app.url_path_for() method to generate only the path component of a URL for a named route, without the scheme or host. This is useful for relative links.

```python
app.url_path_for('gday', nm='Jeremy')
```

--------------------------------

### Handle Structured Form Data with Custom Classes

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates using custom Python classes for structured form data. FastHTML maps form fields to constructor parameters, respecting type hints and default values.

```python
class Bodie2:
    a:int|None; b:str
    def __init__(self, a, b='foo'): store_attr()

@app.post("/bodie2/")
def bodie(d:Bodie2): return f"a: {d.a}; b: {d.b}"
print(cli.post('/bodie2/', data={'a':1}).text)
```

--------------------------------

### Python ModalHeader Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a modal header element. It accepts arbitrary positional and keyword arguments.

```python
def ModalHeader(*c, **kwargs)
    Creates a modal header
```

--------------------------------

### Retrieve Todo Record by ID (Python)

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Demonstrates retrieving a 'Todo' record using its integer ID as the primary key within square brackets.

```python
todos[1]
```

--------------------------------

### Create Card Container (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a function to create a general container for a card component. It accepts arbitrary positional and keyword arguments.

```python
def CardContainer(*c, **kwargs)
    Creates a card container
```

--------------------------------

### Python AT Enum

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Enum for link styles, referencing styles from https://franken-ui.dev/docs/link. Includes muted, text, reset, primary, and classic options.

```python
class AT(Enum)
    Link styles from https://franken-ui.dev/docs/link
    Members: muted, text, reset, primary, classic
```

--------------------------------

### Container Component (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

A fundamental layout component that acts as a div, typically wrapping large sections or entire pages of content. It can utilize `ContainerT` for responsive width control.

```python
def Container(*c, **kwargs):
    """Div to be used as a container that often wraps large sections or a page of content
    """
    pass
```

--------------------------------

### Search Users with Ordering and Filtering

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Retrieves user records from the database. Supports retrieving all records, ordering by a specific field, filtering by a condition, and using placeholders for secure queries. It also allows limiting and offsetting results.

```python
users()

```

```python
users(order_by='name')

```

```python
users(where="name='Alma'")

```

```python
users("name=?", ('Alma',))

```

```python
users(limit=1)

```

```python
users(limit=5, offset=1)

```

--------------------------------

### Enable Live Reloading with FastHTMLWithLiveReload (Python)

Source: https://www.fastht.ml/docs/ref/live_reload.html

To enable live reloading, replace the standard `FastHTML` class with `FastHTMLWithLiveReload` in your application. This class watches for file changes and triggers an automatic refresh in the browser. It is recommended to use this only during development.

```python
from fasthtml.common import *
app = FastHTMLWithLiveReload()
```

--------------------------------

### Custom FrankenRenderer for Markdown Images (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

A custom renderer class for Franken UI that modifies image paths. It inherits from a base renderer and overrides the `render_image` method to handle relative paths when an image directory is specified. The constructor accepts arbitrary arguments.

```python
class FrankenRenderer
    Custom renderer for Franken UI that handles image paths

    - def __init__(self, *args, **kwargs)
    - def render_image(self, token)
        Modify image paths if they're relative and self.img_dir is specified
```

--------------------------------

### HTMX Single Component Response

Source: https://www.fastht.ml/docs/ref/handlers.html

Defines a route ('/ft3') that returns a single H1 component for HTMX requests. The output demonstrates FastHTML rendering a specific HTML fragment.

```python
@rt('/ft3')
def get(): return H1('bar')
print(cli.get('/ft3', **hxhdr).text)
```

--------------------------------

### Handle Structured Form Data with TypedDict

Source: https://www.fastht.ml/docs/ref/handlers.html

Illustrates using TypedDict for structured form data with type hints. FastHTML respects these type hints, converting values to the specified types when possible.

```python
class BodieTD(TypedDict): a:int;b:str='foo'

@app.post("/bodietd/")
def bodient(data:BodieTD): return data
print(cli.post('/bodietd/', data=d).text)
```

--------------------------------

### Route Functions for Dynamic Routing

Source: https://www.fastht.ml/docs/apilist.txt

A class designed to manage route functions dynamically. It allows attributes (routes) to be set and retrieved, facilitating a flexible routing system.

```python
class RouteFuncs:
    def __init__(self):
        pass
    def __setattr__(self, name, value):
        pass
    def __getattr__(self, name):
        pass
    def __dir__(self):
        pass
```

--------------------------------

### Add DOMContentLoaded listeners with 'onloadAdd'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'onloadAdd' (or 'onload_add', 'addOnload', 'add_onload') function allows adding callback functions that execute once the DOM is ready. It safely adds listeners to `window.onload` without overwriting existing handlers.

```javascript
onloadAdd(_ => { alert("loaded!"); })
<script>let e = me(); onloadAdd(_ => { me(e).on("click", ev => { alert("clicked") }) })</script>
```

--------------------------------

### FastHTML Meta Element Handling

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates how FastHTML automatically handles meta elements and titles within the <head> of an HTML document.

```APIDOC
## FastHTML Meta Element Handling

### Description
FastHTML automatically identifies elements typically placed in the `<head>` (like `Title` and `Meta`) and positions them accordingly, while other elements go in the `<body>`.

### Usage Example
```python
@rt
def meta(): 
    return ((Title('hi'),H1('hi')),
        (Meta(property='image'), Meta(property='site_name')))

print(cli.post('/meta').text)
```

### Output HTML Structure
```html
<!doctype html>
<html>
  <head>
    <title>hi</title>
    <meta property="image">
    <meta property="site_name">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <script src="https://unpkg.com/htmx.org@2.0.4/dist/htmx.min.js"></script><script src="https://cdn.jsdelivr.net/gh/answerdotai/fasthtml-js@1.0.12/fasthtml.js"></script><script src="https://cdn.jsdelivr.net/gh/answerdotai/surreal@main/surreal.js"></script><script src="https://cdn.jsdelivr.net/gh/gnat/css-scope-inline@main/script.js"></script><script>
       function sendmsg() {
           window.parent.postMessage({height: document.documentElement.offsetHeight}, '*');
       }
       window.onload = function() {
           sendmsg();
           document.body.addEventListener('htmx:afterSettle',    sendmsg);
           document.body.addEventListener('htmx:wsAfterMessage', sendmsg);
       };
   </script>   </head>
  <body>
    <h1>hi</h1>
  </body>
</html>
```
```

--------------------------------

### Adding methods to Surreal elements

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Shows how to extend the functionality of Surreal elements by adding custom methods, making them chainable and easier to use within event handlers.

```javascript
me().hey = (text) => { alert(text) }
me().on('click', (ev) => { me(ev).hey("hi") })
```

--------------------------------

### Create new HTML elements using 'createElement'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'createElement' function is an alias for `document.createElement`, used to create new HTML elements programmatically. The created element can then be manipulated and appended to the DOM.

```javascript
e_new = createElement("div"); me().prepend(e_new)
```

--------------------------------

### Generate Absolute URLs using request.url_for()

Source: https://www.fastht.ml/docs/ref/handlers.html

Shows how to use the request.url_for() method to generate absolute URLs for named routes, including scheme and host. This is useful for creating links in contexts where full URLs are required.

```python
@rt('/link')
def get(req): return f"{req.url_for('gday', nm='Alexis')}; {req.url_for('show_host')}"

cli.get('/link').text
```

--------------------------------

### Python Label Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates 'pills' styled labels using FrankenUI. It accepts arbitrary positional and keyword arguments.

```python
def Label(*c, **kwargs)
    FrankenUI labels, which look like pills
```

--------------------------------

### Python DiceBearAvatar Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates an avatar using DiceBear service, requiring a seed name, height, and width.

```python
def DiceBearAvatar(seed_name, h, w)
    Creates an Avatar using https://dicebear.com/
```

--------------------------------

### Create Dropdown Navigation Container (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a function to create a navigation container that is part of a dropdown menu. It accepts list items and keyword arguments.

```python
def DropDownNavContainer(*li, **kwargs)
    A Nav that is part of a DropDown
```

--------------------------------

### Accordion Components (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Components for creating collapsible accordion sections. `AccordionItem` represents a single collapsible panel, while `Accordion` serves as the container for multiple items, managing their open/closed states.

```python
def AccordionItem(title, *c):
    """Creates a single item for use within an Accordion component, handling title, content, and open state.
    """
    pass

def Accordion(*c, **kwargs):
    """Creates a styled Accordion container using accordion component.
    """
    pass
```

--------------------------------

### Python: Define and Render HTML Meta and Content with FastHTML

Source: https://www.fastht.ml/docs/ref/handlers.html

This Python snippet uses FastHTML decorators to define a meta function that generates HTML title and meta tags. It then demonstrates how to send a request to this meta endpoint and prints the resulting HTML. The framework automatically places head elements in the <head> and body elements in the <body>.

```python
from fastht import cli, Div, H1, Title, Meta

@rt
def meta(): 
    return ((Title('hi'),H1('hi')),
        (Meta(property='image'), Meta(property='site_name')))

print(cli.post('/meta').text)
```

--------------------------------

### Generate URL for a named route

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Generates a URL for a named route, potentially including path parameters. This is typically done within a request context.

```python
url = request.url_for("user_detail", username=...)
```

--------------------------------

### Selecting the previous element using me('-')

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Demonstrates selecting the element immediately preceding the current one using the me('-') selector, inspired by the CSS adjacent sibling combinator.

```javascript
<input type="text" /> <script>me('-').value = "hello"</script>
```

--------------------------------

### Create Lightbox Item (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a single item component for a lightbox, typically an anchor tag with the necessary structure to be included within a LightboxContainer. It accepts arbitrary positional and keyword arguments.

```python
def LightboxItem(*c, **kwargs)
    Anchor tag with appropriate structure to go inside a `LightBoxContainer`
```

--------------------------------

### Host-Based Routing

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Configures routing based on the `Host` header of incoming requests, allowing different route handlers for different domains or subdomains.

```APIDOC
## Host-Based Routing

### Description
Define routes that are matched based on the `Host` header of the incoming request. This enables serving different applications or route sets from the same IP address based on the requested domain.

### Method
`Starlette(routes=[Host('example.org', app, name='route_name'), ...])`
`app.host('example.org', app, name='route_name')`
`app.router.routes.append(Host('example.org', app, name='route_name'))`

### Endpoint
N/A (Configured at application startup)

### Parameters
*   **host** (string) - Required - The host or host pattern (e.g., `api.example.org`, `{subdomain}.example.org`) to match against the `Host` header.
*   **app** (ASGI application or Router) - Required - The ASGI application or `Router` instance to handle requests matching the host.
*   **name** (string) - Optional - A name for this host-based route configuration.

### Request Example
```python
# Example configuration
api_router = Router(...)
app = Starlette()
app.host('api.example.org', api_router, name="api_host")

# URL generation with host parameters
url = request.url_for("sub:users:user_detail", username=..., subdomain=...)
```

### Response
N/A (Configuration only)
```

--------------------------------

### Basic WebSocket Route Definition in Python

Source: https://www.fastht.ml/docs/explains/websockets.html

Defines a basic WebSocket route using the `@app.ws` decorator in FastHTML. It specifies the route path and callback functions for connection (`conn`) and disconnection (`disconn`). The `on_message` function handles incoming messages and sends responses.

```python
from fasthtml.common import *

app = FastHTML(exts='ws')

@app.ws('/ws', conn=on_conn, disconn=on_disconn)
async def on_message(msg:str, send):
    await send(Div('Hello ' + msg, id='notifications'))
    await send(Div('Goodbye ' + msg, id='notifications'))
```

--------------------------------

### Browser-based Markdown Rendering

Source: https://www.fastht.ml/docs/apilist.txt

Provides a JavaScript solution for rendering Markdown directly in the browser. It targets a specified selector to find and convert Markdown content into HTML.

```python
def MarkdownJS(sel):
    """Implements browser-based markdown rendering."""
    pass
```

--------------------------------

### Typography Presets Enum (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Provides predefined typography presets for common use cases, simplifying the application of consistent text styles. These presets combine font weight and size for quick implementation.

```python
from enum import Enum

class TextPresets(Enum):
    """Common Typography Presets
    Members: muted_sm, muted_lg, bold_sm, bold_lg, md_weight_sm, md_weight_muted
    """
    pass
```

--------------------------------

### Setting innerHTML of an element

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Demonstrates setting the HTML content of an element using the innerHTML property. Use with caution due to potential XSS vulnerabilities if the content is not sanitized.

```javascript
me().innerHTML = "<p>hello world</p>"
```

--------------------------------

### Titled Page Structure (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

A utility function to create a standard page structure that includes a title and content within a main container. This simplifies the creation of consistently laid out pages.

```python
def Titled(title, *c, **kwargs):
    """Creates a standard page structure for titled page.  Main(Container(title, content))
    """
    pass
```

--------------------------------

### fasthtml.components: File Component

Source: https://www.fastht.ml/docs/apilist.txt

A component for the fasthtml module that allows direct use of unescaped text content from a specified file.

```python
def File(fname):
    """Use the unescaped text in file `fname` directly"""
    # ... implementation details ...
    pass
```

--------------------------------

### Add event listeners using 'on'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'on' function wraps `addEventListener` to attach event listeners to elements. It takes an event type and a callback function.

```javascript
me().on('click', ev => { me(ev).styles('background', 'red') })
```

--------------------------------

### Handle click event and set styles

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Attaches a click event listener to elements. On click, it applies inline styles to the target element using the event object.

```javascript
any('button').on('click', ev => { me(ev).styles('color: red') })
```

--------------------------------

### Accessing Request Headers

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates how handler functions can access standard HTTP headers by using parameter names that match the header names. It also shows how to set custom headers in test requests.

```APIDOC
## GET /ua

### Description
This endpoint captures and returns the value of the 'User-Agent' header.

### Method
GET

### Endpoint
/ua

### Parameters
#### Path Parameters
None

#### Query Parameters
None

#### Request Body
None

### Request Example
```python
print(cli.get('/ua', headers={'User-Agent':'FastHTML'}).text)
```

### Response
#### Success Response (200)
- **user_agent** (string) - The value of the 'User-Agent' header.

#### Response Example
```json
"FastHTML"
```
```

--------------------------------

### Add Standard Route

Source: https://www.fastht.ml/docs/apilist.txt

Adds a standard HTTP route to the FastHTML application. This method allows specifying the path, allowed HTTP methods, route name, schema inclusion, and a body wrapper function.

```python
@patch
def route(self, path, methods=['GET'], name=None, include_in_schema=True, body_wrap=None):
    """Add a route at `path`"""
    pass
```

--------------------------------

### Import necessary fasthtml components

Source: https://www.fastht.ml/docs/ref/defining_xt_component

Imports the NotStr class for creating string-based HTML tags and Div for standard HTML elements, along with to_xml for converting components to XML strings.

```python
from fasthtml.common import NotStr,Div, to_xml
```

--------------------------------

### Iterate over elements using 'run'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'run' function iterates over selected elements, similar to forEach but also works on single elements. It accepts a callback function that receives the current element as an argument.

```javascript
me().run(e => { alert(e) })
any('button').run(e => { alert(e) })
```

--------------------------------

### Form Components (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Components for building forms, including a `Form` component for overall structure and default spacing, and a `Fieldset` component for grouping related form elements, along with a `Legend` for the fieldset title.

```python
def Form(*c, **kwargs):
    """A Form with default spacing between form elements
    """
    pass

def Fieldset(*c, **kwargs):
    """A Fieldset with default styling
    """
    pass

def Legend(*c, **kwargs):
    pass
```

--------------------------------

### Section Component (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

A component for creating distinct sections within a page, allowing for customizable styling and margins. It helps in organizing content and applying visual hierarchy.

```python
def Section(*c, **kwargs):
    """Section with styling and margins
    """
    pass
```

--------------------------------

### Python DivLAligned Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a flex div with its components aligned to the left. Accepts arbitrary positional and keyword arguments.

```python
def DivLAligned(*c, **kwargs)
    Creates a flex div with it's components aligned to the left
```

--------------------------------

### HTML output for custom path component

Source: https://www.fastht.ml/docs/ref/defining_xt_component

Shows the resulting HTML tag generated by the custom 'ft_path' component function.

```html
<path></path>
```

--------------------------------

### Python LabelInput Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

A `FormLabel` and `Input` pair with default spacing. It links and names the label and input based on the provided ID.

```python
def LabelInput(label, lbl_cls, input_cls, cls, id, **kwargs)
    A `FormLabel` and `Input` pair that provides default spacing and links/names them based on id
```

--------------------------------

### Fastlite Insert Operation

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Inserts a new record into a Fastlite table. The `insert()` method takes keyword arguments corresponding to the table's fields and returns the newly created record object.

```python
user = users.insert(name='Alex',active=False)
user
```

--------------------------------

### Python Switch Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a Switch component with default styling. It accepts arbitrary positional and keyword arguments.

```python
def Switch(*c, **kwargs)
    A Switch with default styling
```

--------------------------------

### Return HTML Components

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates returning FastHTMl's FT (FastHTML Template) objects from a handler. FT components like `Div` can be nested to compose HTML structures. The returned FT object is automatically converted to an HTML string.

```python
@rt
def ft1(): return Html(Div('Text.'))
print(cli.get('/ft1').text)
```

--------------------------------

### Handle Structured Form Data with Dataclasses

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates using Python dataclasses to define and handle structured form data. FastHTML automatically converts form data into dataclass instances.

```python
@dataclass
class Bodie: a:int;b:str

@rt("/bodie/{nm}")
def post(nm:str, data:Bodie):
    res = asdict(data)
    res['nm'] = nm
    return res

print(cli.post('/bodie/me', data=dict(a=1, b='foo', nm='me')).text)
```

--------------------------------

### HTML output for automatically created tag

Source: https://www.fastht.ml/docs/ref/defining_xt_component

Represents the HTML output generated by the automatically created component function.

```html
<some-never-before-used-tag></some-never-before-used-tag>
```

--------------------------------

### Python ModalContainer Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a modal container for placing components within a modal. Accepts arbitrary positional and keyword arguments.

```python
def ModalContainer(*c, **kwargs)
    Creates a modal container that components go in
```

--------------------------------

### jsdelivr Script or Link Tag Generation

Source: https://www.fastht.ml/docs/apilist.txt

Generates an HTML tag (either a <script> tag for JavaScript or a <link> tag for CSS) or a direct URL from jsdelivr. It requires repository, path, version, and type information, with optional parameters for ESM modules.

```Python
def jsd(org, repo, root, path, prov, typ, ver, esm, **kwargs)
    jsdelivr `Script` or CSS `Link` tag, or URL
```

--------------------------------

### Python ModalBody Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a modal body element. It accepts arbitrary positional and keyword arguments.

```python
def ModalBody(*c, **kwargs)
    Creates a modal body
```

--------------------------------

### Browser-based Mermaid Diagram Rendering

Source: https://www.fastht.ml/docs/apilist.txt

Enables rendering of Mermaid diagrams within the browser using JavaScript. This function targets a specific selector and allows setting a theme for the diagrams.

```python
def MermaidJS(sel, theme='default'):
    """Implements browser-based Mermaid diagram rendering."""
    pass
```

--------------------------------

### Set HTMX Response Headers with HtmxResponseHeaders

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Shows how to return an `HtmxResponseHeaders` object from a handler function to set HTMX-specific response headers, such as the redirect location.

```python
def htmlredirect(app): return HtmxResponseHeaders(location="http://example.org")
```

--------------------------------

### Python DivCentered Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a flex div with its components centered. Accepts arbitrary positional and keyword arguments.

```python
def DivCentered(*c, **kwargs)
    Creates a flex div with it's components centered in it
```

--------------------------------

### Python TextArea Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a TextArea component with default styling. It accepts arbitrary positional and keyword arguments.

```python
def TextArea(*c, **kwargs)
    A Textarea with default styling
```

--------------------------------

### Redirect Class __response__ Method in FastHTML

Source: https://www.fastht.ml/docs/ref/handlers.html

Provides information about the '__response__' method within the 'Redirect' class of FastHTML. This method is a special function that handles the response generation for redirects.

```python
Redirect.__response__
```

--------------------------------

### FastHTML Response Wrapper

Source: https://www.fastht.ml/docs/apilist.txt

Wraps FastHTML responses with a Starlette `Response` object. This allows integrating custom response logic with Starlette's response handling mechanisms.

```python
class FtResponse:
    """Wrap an FT response with any Starlette `Response`"""
    def __init__(self, content, status_code=200, headers=None, cls=None, media_type=None, background=None):
        pass
    def __response__(self, req):
        pass
```

--------------------------------

### Cookie Handling API

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates setting and retrieving cookies using FastHTML. The /setcookie endpoint sets a cookie with the current datetime, and /getcookie retrieves it.

```APIDOC
## POST /setcookie

### Description
Sets a cookie named 'now' with the current datetime.

### Method
GET

### Endpoint
/setcookie

### Request Example
{
  "example": ""
}

### Response
#### Success Response (200)
- cookie (HttpHeader) - The Set-Cookie header.

#### Response Example
{
  "example": "HttpHeader(k='set-cookie', v='now="2025-01-30 16:19:29.997374"; Path=/; SameSite=lax')"
}

## GET /getcookie

### Description
Retrieves the 'now' cookie and returns its value, formatted as a time string.

### Method
GET

### Endpoint
/getcookie

### Parameters
#### Query Parameters
- now (parsed_date) - Required - The 'now' cookie value.

### Request Example
{
  "example": ""
}

### Response
#### Success Response (200)
- Output (str) - The formatted time string from the cookie.

#### Response Example
{
  "example": "Cookie was set at time 16:19:27.811570"
}
```

--------------------------------

### Send Denial Response with WebSocket

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Describes how to send a custom HTTP 403 error response to a client using `websocket.send_denial_response()`. This method requires ASGI server support for the WebSocket Denial Response extension.

```python
# Assuming 'websocket' is an instance of WebSocket
# await websocket.send_denial_response(response)
```

--------------------------------

### Create Navigation List Item with Header (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a function to create a navigation list item designated as a header. This is useful for structuring navigation menus. It accepts arbitrary positional and keyword arguments.

```python
def NavHeaderLi(*c, **kwargs)
    Creates a navigation list item with a header
```

--------------------------------

### Create JSON Response in Starlette

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Illustrates how to send a JSON encoded response using Starlette's JSONResponse class. This is commonly used for API endpoints.

```python
from starlette.responses import JSONResponse


async def app(scope, receive, send):
    assert scope['type'] == 'http'
    response = JSONResponse({'hello': 'world'})
    await response(scope, receive, send)
```

--------------------------------

### fasthtml.components: Server-Sent Events (SSE)

Source: https://www.fastht.ml/docs/apilist.txt

Provides a utility for formatting elements into messages suitable for Server-Sent Events (SSE) streaming. The `sse_message` function prepares an element for SSE transmission.

```python
def sse_message(elm, event):
    """Convert element `elm` into a format suitable for SSE streaming"""
    # ... implementation details ...
    pass
```

--------------------------------

### Create Todo Table without Primary Key (Python)

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Illustrates creating a 'Todo' table using a dataclass. If no primary key is specified, 'id' is assumed as the default primary key.

```python
@dataclass
class Todo: id: int; title: str; detail: str; status: str; name: str
todos = db.create(Todo)
todos
```

--------------------------------

### fasthtml.components: Form and Dataclass Utilities

Source: https://www.fastht.ml/docs/apilist.txt

Provides utility functions for working with forms and dataclasses. `fill_form` populates form elements from an object's attributes, while `fill_dataclass` modifies a dataclass in-place.

```python
def fill_form(form, obj):
    """Fills named items in `form` using attributes in `obj"""
    # ... implementation details ...
    pass

def fill_dataclass(src, dest):
    """Modifies dataclass in-place and returns it"""
    # ... implementation details ...
    pass
```

--------------------------------

### Display HTMX App in Jupyter

Source: https://www.fastht.ml/docs/tutorials/jupyter_and_fasthtml.html

Utilizes the HTMX callable to display the running HTMX application within an iframe in a Jupyter notebook. This requires the same port number used for the JupyUvi server.

```python
# This doesn't display in the docs - uncomment and run it to see it in action
# HTMX()
```

--------------------------------

### Social Media Card Headers Generator

Source: https://www.fastht.ml/docs/apilist.txt

Generates Open Graph (OG) and Twitter card meta tags for social media sharing. It requires a title, site name, description, image URL, and URL of the content, along with Twitter-specific creator and card type information.

```Python
def Socials(title, site_name, description, image, url, w, h, twitter_site, creator, card)
    OG and Twitter social card headers
```

--------------------------------

### Create Slider Component (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a function to create a slider component, which can optionally include navigation arrows. It accepts arbitrary positional and keyword arguments.

```python
def Slider(*c, **kwargs)
    Creates a slider with optional navigation arrows
```

--------------------------------

### Run function on multiple elements

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Iterates over all elements matching a selector and executes a provided function for each element. The function receives the current element as an argument.

```javascript
any('button').run(_ => { alert(_) })
```

--------------------------------

### Create Card Body (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a function to create the main body content area for a card component. It accepts arbitrary positional and keyword arguments.

```python
def CardBody(*c, **kwargs)
    Creates a card body
```

--------------------------------

### Custom path component creation using ft_hx

Source: https://www.fastht.ml/docs/ref/defining_xt_component

Defines a custom component function 'ft_path' using the 'ft_hx' utility. This approach allows for creating specific HTML tags like '<path>' while avoiding naming conflicts with existing Python modules like 'pathlib.Path'.

```python
from fasthtml.common import ft_hx

def ft_path(*c, target_id=None, **kwargs): 
    return ft_hx('path', *c, target_id=target_id, **kwargs)

ft_path()
```

--------------------------------

### Use Pathlib.Path for File Path Parameters

Source: https://www.fastht.ml/docs/ref/handlers.html

Annotate path parameters with Python's pathlib.Path type. FastHTML automatically converts URL string segments into Path objects, providing an object-oriented interface for file path manipulation.

```python
from fastht.core import rt
from fastht.cli import cli
from pathlib import Path

@rt("/files/{path}")
async def get(path: Path):
    return str(path.with_suffix('.txt'))

print(cli.get('/files/foo').text)
```

--------------------------------

### Create Card Header (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a function to create a header section for a card component. It accepts arbitrary positional and keyword arguments.

```python
def CardHeader(*c, **kwargs)
    Creates a card header
```

--------------------------------

### Surreal JS: DOM event handling with 'me()'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Demonstrates how to use the `me()` function from Surreal.js for event handling like 'dragover', 'dragleave', and 'drop'. It utilizes Surreal's chaining capabilities for class manipulation and attribute setting, along with sending custom events.

```html
<label for="file-input" >
  <div class="uploader"></div>
  <script>
    me().on("dragover", ev => { halt(ev); me(ev).classAdd('.hover'); console.log("Files in drop zone.") })
    me().on("dragleave", ev => { halt(ev); me(ev).classRemove('.hover'); console.log("Files left drop zone.") })
    me().on("drop", ev => { halt(ev); me(ev).classRemove('.hover').classAdd('.loading'); me('#file-input').attribute('files', ev.dataTransfer.files); me('#form').send('change') })
  </script>
</label>
```

--------------------------------

### Python LabelSelect Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

A `FormLabel` and `Select` pair with default spacing. It links and names the label and select based on the provided ID.

```python
def LabelSelect(*option, **kwargs)
    A FormLabel and Select pair that provides default spacing and links/names them based on id
```

--------------------------------

### Python ModalTitle Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a modal title element. It accepts arbitrary positional and keyword arguments.

```python
def ModalTitle(*c, **kwargs)
    Creates a modal title
```

--------------------------------

### Divider Components (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Components for visually separating content. `Divider` provides a styled horizontal rule with default margins, while `DividerSplit` creates a simple horizontal line with configurable thickness and spacing.

```python
def Divider(*c, **kwargs):
    """Divider with default styling and margin
    """
    pass

def DividerSplit(*c):
    """Creates a simple horizontal line divider with configurable thickness and vertical spacing
    """
    pass
```

--------------------------------

### Timeline animation on click

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Animate an element's background color over time and then remove it upon clicking. Uses `async/await` with `sleep` for timing.

```html
<div>I change color every second.
  <script>
    // On click, animate something new every second.
    me().on("click", async ev => {
      let el = me(ev) // Save target because async will lose it.
      me(el).styles({ "transition": "background 1s" })
      await sleep(1000)
      me(el).styles({ "background": "red" })
      await sleep(1000)
      me(el).styles({ "background": "green" })
      await sleep(1000)
      me(el).styles({ "background": "blue" })
      await sleep(1000)
      me(el).styles({ "background": "none" })
      await sleep(1000)
      me(el).remove()
    })
  </script>
</div>
```

--------------------------------

### Add WebSocket Route

Source: https://www.fastht.ml/docs/apilist.txt

Adds a WebSocket route to the FastHTML application at a specified path. It allows defining connection and disconnection handlers, along with optional middleware for the WebSocket endpoint.

```python
@patch
def ws(self, path, conn, disconn, name=None, middleware=None):
    """Add a websocket route at `path`"""
    pass
```

--------------------------------

### Define Authorization Callback Path

Source: https://www.fastht.ml/docs/explains/oauth.html

Stores the path component of the authorization callback URL. This is crucial for dynamically constructing redirect URLs that work across different deployment environments.

```python
auth_callback_path = "/auth_redirect"
```

--------------------------------

### Redirect with HTMX or Starlette

Source: https://www.fastht.ml/docs/apilist.txt

Handles redirects by choosing between HTMX-specific redirects or Starlette's standard `RedirectResponse` based on the request context. It redirects to the specified location `loc`.

```python
class Redirect:
    """Use HTMX or Starlette RedirectResponse as required to redirect to `loc`"""
    def __init__(self, loc):
        pass
    def __response__(self, req):
        pass
```

--------------------------------

### Handle Optional Query Parameters with Default Values

Source: https://www.fastht.ml/docs/ref/handlers.html

Define handler functions that accept optional query parameters with default values and type annotations. FastHTML automatically parses query parameters and handles type conversions.

```python
from fastht.core import rt
from fastht.cli import cli

fake_db = [{"name": "Foo"}, {"name": "Bar"}]

@rt("/items/")
def get(idx: int | None = 0):
    return fake_db[idx]

print(cli.get('/items/?idx=1').text)
print(cli.get('/items/').text)
```

--------------------------------

### Default FT Response Creation

Source: https://www.fastht.ml/docs/apilist.txt

The default function used for creating a FastHTML response. It combines request, headers, and body content into a complete response object.

```python
def respond(req, heads, bdy):
    """Default FT response creation function"""
    pass
```

--------------------------------

### Setting HTMX-Specific Response Headers

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates how to return `HtmxResponseHeaders` objects from handler functions to set HTMX-specific headers in the response, facilitating client-side behaviors like redirects.

```APIDOC
## GET /app3

### Description
This endpoint returns an `HtmxResponseHeaders` object to set the `HX-Location` header, enabling HTMX client-side redirects.

### Method
GET

### Endpoint
/app3

### Parameters
#### Path Parameters
None

#### Query Parameters
None

#### Request Body
None

### Request Example
```python
r = cli.get('/app3')
print(r.headers)
```

### Response
#### Success Response (200)
- **HTMX Headers** (HtmxResponseHeaders) - Sets HTMX-specific response headers, like `hx-location`.

#### Response Example
```json
Headers({'hx-location': 'http://example.org', 'content-length': '0', 'content-type': 'text/html; charset=utf-8'})
```
```

--------------------------------

### Python LabelCheckboxX Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

A `FormLabel` and `CheckboxX` pair with default spacing. It links and names the label and checkbox based on the provided ID.

```python
def LabelCheckboxX(label, lbl_cls, input_cls, container, cls, id, **kwargs)
    A FormLabel and CheckboxX pair that provides default spacing and links/names them based on id
```

--------------------------------

### Create Set-Cookie HttpHeader

Source: https://www.fastht.ml/docs/apilist.txt

Generates a 'set-cookie' HttpHeader object with specified cookie parameters such as key, value, max_age, and samesite policy. This is used for managing cookies in HTTP responses.

```python
def cookie(key, value, max_age=None, expires=None, path='/', domain=None, secure=False, httponly=False, samesite='lax'):
    """Create a 'set-cookie' `HttpHeader`"""
    pass
```

--------------------------------

### Create Slider Navigation Arrows (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a function to create navigation arrows (previous and next) for a Slider component. It requires the class for the component, previous arrow class, and next arrow class, along with other keyword arguments.

```python
def SliderNav(cls, prev_cls, next_cls, **kwargs)
    Navigation arrows for Slider component
```

--------------------------------

### Type-Annotated Path Parameter for Conversion

Source: https://www.fastht.ml/docs/ref/handlers.html

Shows how type annotations on path parameters enable automatic type conversion by FastHTML. In this case, an integer path parameter is converted from string to int.

```python
@rt('/html/{idx}')
def get(idx:int): return Body(H4(f'Next is {idx+1}.'))
print(cli.get('/html/1', **hxhdr).text)
```

--------------------------------

### Python LabelRadio Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

A `FormLabel` and `Radio` pair with default spacing. It links and names the label and radio button based on the provided ID.

```python
def LabelRadio(label, lbl_cls, input_cls, container, cls, id, **kwargs)
    A FormLabel and Radio pair that provides default spacing and links/names them based on id
```

--------------------------------

### hx-prompt: Prompt User Before Submission

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-prompt` attribute displays a JavaScript `prompt()` dialog before submitting a request. It allows the user to provide input that can be included in the request.

```html
<button hx-post="/save" hx-prompt="Enter a comment">Save with Comment</button>
```

--------------------------------

### Accessing and hiding element children

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Explains how to access the children of an HTML element using the 'children' property and how to hide them by setting 'children.hidden = true'.

```javascript
me().children
me().children.hidden = true
```

--------------------------------

### Insert record with automatic .xtra() fields

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Inserts a new record into the 'todos' table. The .xtra() fields, like 'name', are automatically set during insertion.

```python
ct = todos.insert(Todo(title='Rewrite personal site in FastHTML', status='open'))
ct
```

--------------------------------

### FastHTML Live Reloading Class (Python)

Source: https://www.fastht.ml/docs/apilist.txt

Enables live reloading for FastHTML applications. It achieves this by establishing a WebSocket connection that triggers browser reloads upon detecting server code changes. This enhances the development experience by automating updates.

```python
class FastHTMLWithLiveReload
    `FastHTMLWithLiveReload` enables live reloading.
    This means that any code changes saved on the server will automatically
    trigger a reload of both the server and browser window.

    How does it work?
      - a websocket is created at `/live-reload`
      - a small js snippet `LIVE_RELOAD_SCRIPT` is injected into each webpage
      - this snippet connects to the websocket at `/live-reload` and listens for an `onclose` event
      - when the `onclose` event is detected the browser is reloaded

    Why do we listen for an `onclose` event?
      When code changes are saved the server automatically reloads if the --reload flag is set.
      The server reload kills the websocket connection. The `onclose` event serves as a proxy
      for "developer has saved some changes".

    Usage
        >>> from fasthtml.common import *
        >>> app = FastHTMLWithLiveReload()

        Run:
            serve()

    - def __init__(self, *args, **kwargs)
```

--------------------------------

### Python FormLabel Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a FormLabel component with default styling. It accepts arbitrary positional and keyword arguments.

```python
def FormLabel(*c, **kwargs)
    A Label with default styling
```

--------------------------------

### Python DivRAligned Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a flex div with its components aligned to the right. Accepts arbitrary positional and keyword arguments.

```python
def DivRAligned(*c, **kwargs)
    Creates a flex div with it's components aligned to the right
```

--------------------------------

### Add Save Button for Canvas State

Source: https://www.fastht.ml/docs/tutorials/e2e.html

Adds a 'Save Canvas' button to a room's page. This button is configured with an `hx-post` attribute to send the canvas's current state (serialized as JSON) to the server for saving. It targets a specific route for saving.

```python
@rt("/rooms/{id}")
async def get(id:int):
    room = rooms[id]
    canvas = Canvas(id="canvas", width="800", height="600")
    color_picker = Input(type="color", id="color-picker", value="#3CDD8C")
    brush_size = Input(type="range", id="brush-size", min="1", max="50", value="10")
    save_button = Button("Save Canvas", id="save-canvas", hx_post=f"/rooms/{id}/save", hx_vals="js:{canvas_data: JSON.stringify(canvas.toJSON())}")
    # ... (rest of the function remains the same)
```

--------------------------------

### Setting textContent of an element

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Illustrates how to set the text content of an HTML element using the textContent property. This method is XSS safe.

```javascript
me().textContent = "hello world"
```

--------------------------------

### Python NavParentLi Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a navigation list item with a parent navigation container for nesting. Accepts navigation containers as positional arguments and keyword arguments.

```python
def NavParentLi(*nav_container, **kwargs)
    Creates a navigation list item with a parent nav for nesting
```

--------------------------------

### Python Radio Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a Radio component with default styling. It accepts arbitrary positional and keyword arguments.

```python
def Radio(*c, **kwargs)
    A Radio with default styling
```

--------------------------------

### Execute a single file deletion task in the background

Source: https://gist.githubusercontent.com/jph00/e91192e9bdc1640f5421ce3c904f2efb/raw/61a2774912414029edaf1a55b506f0e283b93c46/starlette-quick

This Python code demonstrates how to schedule a file deletion task to run asynchronously in the background after a response is sent. It uses `aiofiles` for asynchronous file operations and `starlette.background.BackgroundTask` to defer the execution of the `del_file` function.

```python
import aiofiles
from starlette.background import BackgroundTask
from starlette.responses import Response
import os

# Assuming aiofiles.os.wrap is available or equivalent is used
# aiofiles_remove = aiofiles.os.wrap(os.remove)

async def del_file(fpath):
    # Placeholder for actual file removal
    print(f"Attempting to delete file: {fpath}")
    # await aiofiles_remove(fpath)
    pass

async def handler(request):
    content = ""
    fpath = "/tmp/tmpfile.txt"
    task = BackgroundTask(del_file, fpath=fpath)
    return Response(content, background=task)
```

--------------------------------

### Create Navigation Subtitle (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a function to create a subtitle element within a navigation component. This helps in organizing navigation content. It accepts arbitrary positional and keyword arguments.

```python
def NavSubtitle(*c, **kwargs)
    Creates a navigation subtitle
```

--------------------------------

### Middleware Base Class

Source: https://www.fastht.ml/docs/apilist.txt

A base class for creating middleware components in FastHTML applications. Middleware can intercept and process requests or responses.

```python
class MiddlewareBase:
    def __call__(self, scope, receive, send):
        pass
```

--------------------------------

### Python CheckboxX Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a CheckboxX component with default styling. It accepts arbitrary positional and keyword arguments.

```python
def CheckboxX(*c, **kwargs)
    A Checkbox with default styling
```

--------------------------------

### Immediate timeline animation

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Executes a sequence of style changes on an element immediately upon script loading, creating a timed animation effect.

```html
<div>Change color every second.
  <script>
    // Run immediately.
    (async (e = me()) => {
      me(e).styles({ "transition": "background 1s" })
      await sleep(1000)
      me(e).styles({ "background": "red" })
      await sleep(1000)
      me(e).styles({ "background": "green" })
      await sleep(1000)
      me(e).styles({ "background": "blue" })
      await sleep(1000)
      me(e).styles({ "background": "none" })
      await sleep(1000)
      me(e).remove()
    })()
  </script>
</div>
```

--------------------------------

### Fastlite Constrained Queries with .xtra()

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Applies constraints to subsequent queries, updates, and inserts on a Fastlite table using the `.xtra()` method. This is useful for setting default filters or conditions.

```python
users.xtra(active=True)
users()
```

--------------------------------

### Create Slider Container (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a function to create a container component for sliders, used to group slider items. It accepts arbitrary positional and keyword arguments.

```python
def SliderContainer(*c, **kwargs)
    Creates a slider container
```

--------------------------------

### FastHTML Websocket Connection and Message Handling

Source: https://www.fastht.ml/docs/explains/websockets.html

Handles the websocket connection logic for the chat app. It defines functions to track connected users and a route '/ws' that processes incoming messages, appends them to a global list, and broadcasts the updated message list to all connected clients.

```python
users = {}
def on_conn(ws, send): users[str(id(ws))] = send
def on_disconn(ws): users.pop(str(id(ws)), None)

@app.ws('/ws', conn=on_conn, disconn=on_disconn)
async def ws(msg:str):
    msgs.append(msg)
    # Use associated `send` function to send message to each user
    for u in users.values(): await u(Ul(*[Li(m) for m in msgs], id='msg-list'))

serve()
```

--------------------------------

### Implement State Parameter in OAuth Flow with FastHTML

Source: https://www.fastht.ml/docs/explains/oauth.html

This snippet illustrates how to use the 'state' parameter in an OAuth flow with FastHTML. The 'state' parameter is included when creating the login link to maintain user-specific information across the authentication process, preventing CSRF attacks and preserving user progress. The state is then accessible in the callback route.

```python
# in login page:
link = A('Login with GitHub', href=client.login_link(state='current_prompt: add a unicorn'))

# in auth_redirect:
@app.get('/auth_redirect')
def auth_redirect(code:str, session, state:str=None):
    print(f"state: {state}") # Use as needed
    # ... rest of the callback logic
```

--------------------------------

### Access user table object

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Retrieves the table object for 'user' from the database. This is a foundational step for working with the user data.

```python
users = db.t.user
users
```

--------------------------------

### HTML Anchor Tag Extension (AX) with HTMX Attributes

Source: https://www.fastht.ml/docs/apilist.txt

A specialized anchor tag extension (AX) for HTMX. It simplifies the creation of links by allowing 'hx_get', 'target_id', and 'hx_swap' as positional parameters, alongside a single text child. It also accepts an 'href' and other keyword arguments.

```Python
@delegates(ft_hx, keep=True) def AX(txt, hx_get, target_id, hx_swap, href, **kwargs)
    An A tag with just one text child, allowing hx_get, target_id, and hx_swap to be positional params
```

--------------------------------

### Set inline styles for single element

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Applies CSS styles to a single element. Styles can be provided as a string or an object.

```javascript
me().styles('color: red')
```

```javascript
me().styles({ 'color':'red', 'background':'blue' })
```

--------------------------------

### Selecting elements using relative selectors

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Explains how to select elements based on their position relative to another element using attribute selectors, useful for complex DOM structures.

```javascript
<form> <input type="text" n1 /> <script>me('[n1]', me()).value = "hello"</script> </form>
```

--------------------------------

### Render Light Media CSS

Source: https://www.fastht.ml/docs/apilist.txt

Generates CSS for light mode (day mode) views. This function is part of the JavaScript integration for styling web pages based on the user's preference or system settings.

```python
def light_media(css):
    """Render light media for day mode views"""
    pass
```

--------------------------------

### Create Card Title (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a function to create a title element for a card component. It accepts arbitrary positional and keyword arguments.

```python
def CardTitle(*c, **kwargs)
    Creates a card title
```

--------------------------------

### Button Component (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

A versatile button component that accepts styling options via the `ButtonT` enum and handles form submission by defaulting to type 'submit'. It can be customized with various appearances and sizes.

```python
def Button(*c, **kwargs):
    """Button with Styling (defaults to `submit` for form submission)
    """
    pass
```

--------------------------------

### Handle Structured Form Data with Named Tuples

Source: https://www.fastht.ml/docs/ref/handlers.html

Shows how to use Python named tuples for structured form data. FastHTML converts form data into named tuple instances, with values becoming strings.

```python
nt = namedtuple('Bodient', ['a','b'])

@app.post("/bodient/")
def bodient(data:nt): return asdict(data)
print(cli.post('/bodient/', data=d).text)
```

--------------------------------

### APIRouter Class for Route Management

Source: https://www.fastht.ml/docs/apilist.txt

Manages the addition of routes to an application, providing a structured way to group and organize API endpoints. It supports prefixing routes and applying a common body wrapper.

```python
class APIRouter:
    """Add routes to an app"""
    def __init__(self, prefix='', body_wrap=None):
        pass
    def __getattr__(self, name):
        pass
    def to_app(self, app):
        """Add routes to `app`"""
        pass
    def ws(self, path, conn, disconn, name=None, middleware=None):
        """Add a websocket route at `path`"""
        pass
```

--------------------------------

### Python LabelRange Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

A `FormLabel` and `Range` pair with default spacing. It links and names the label and range input based on the provided ID. It delegates properties from `GenericLabelInput`.

```python
@delegates(GenericLabelInput, but=['input_fn', 'cls']) def LabelRange(label, lbl_cls, input_cls, cls, id, value, min, max, step, label_range, **kwargs)
    A FormLabel and Range pair that provides default spacing and links/names them based on id
```

--------------------------------

### Accessing Htmx Configuration Options

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

Demonstrates how to access and modify Htmx configuration options programmatically using JavaScript. This allows for fine-grained control over Htmx behavior.

```javascript
console.log(htmx.config.historyEnabled); // Accessing a config option
htmx.config.refreshOnHistoryMiss = true; // Modifying a config option
```

--------------------------------

### Session Management API

Source: https://www.fastht.ml/docs/ref/handlers.html

Illustrates session handling in FastHTML. The /setsess endpoint stores the current datetime in the session, and /getsess retrieves it.

```APIDOC
## POST /setsess

### Description
Stores the current datetime in the session under the key 'auth'.

### Method
GET

### Endpoint
/setsess

### Parameters
#### Query Parameters
- sess (Session) - Required - The session object.
- foo (str) - Optional - An additional string parameter (not used in core logic).

### Request Example
{
  "example": ""
}

### Response
#### Success Response (200)
- Output (str) - Confirmation message with the time set.

#### Response Example
{
  "example": "Set to 2025-01-30 16:19:31.078650"
}

## GET /getsess

### Description
Retrieves the 'auth' session variable and returns it.

### Method
GET

### Endpoint
/getsess

### Parameters
#### Query Parameters
- sess (Session) - Required - The session object.

### Request Example
{
  "example": ""
}

### Response
#### Success Response (200)
- Output (str) - The stored session time.

#### Response Example
{
  "example": "Session time: 2025-01-30 16:19:31.078650"
}
```

--------------------------------

### Surreal.js Script Block for Current Element

Source: https://www.fastht.ml/docs/apilist.txt

Creates an asynchronous Surreal.js script block that executes JavaScript on the current element identified by 'me(sel)'.

```Python
def Now(code, sel)
    An async surreal.js script block on selector `me(sel)`
```

--------------------------------

### Dispatch events using 'send'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'send' (or 'trigger') function wraps `dispatchEvent` to trigger events on elements. It can optionally take a detail object for custom event data.

```javascript
me().send('change')
me().send('change', {'data':'thing'})
```

--------------------------------

### hx-ext: Use Htmx Extensions

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-ext` attribute specifies which htmx extensions to use for a given element. Extensions provide additional functionality and integrations with other libraries or services.

```html
<div hx-ext="ws,json-body">
  <!-- Use WebSockets and JSON body extensions -->
</div>
```

--------------------------------

### Python DivVStacked Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a flex div with its components stacked vertically. Accepts arbitrary positional and keyword arguments.

```python
def DivVStacked(*c, **kwargs)
    Creates a flex div with it's components stacked vertically
```

--------------------------------

### Enable element interactions using 'enable'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'enable' function is the counterpart to 'disable', re-enabling event listeners that were previously disabled.

```javascript
me().enable()
```

--------------------------------

### Button Styling Enum (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines an enum for various button styles and sizes, allowing for consistent and visually appealing button elements across the application. Includes options for button appearance, color, and size.

```python
from enum import Enum

class ButtonT(Enum):
    """Options for styling Buttons
    Members: default, ghost, primary, secondary, destructive, text, link, xs, sm, lg, xl, icon
    """
    pass
```

--------------------------------

### Handle Boolean Query Parameters

Source: https://www.fastht.ml/docs/ref/handlers.html

Utilize boolean query parameters, where FastHTML automatically converts various string representations ('true', 'false', 'yes', 'no', etc.) to boolean values. Underscore is used for function name as it's not relevant.

```python
from fastht.app import app
from fastht.cli import cli

@app.get("/booly/")
def _(coming: bool = True):
    return 'Coming' if coming else 'Not coming'

print(cli.get('/booly/?coming=true').text)
print(cli.get('/booly/?coming=no').text)
```

--------------------------------

### Handle Ignored Query Parameter

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates a scenario where an unannotated query parameter ('nope') is ignored by the handler function, leading to a warning and an empty response. It highlights the importance of type annotations or using recognized special parameter names.

```python
@rt('/oops')
def get(nope): return nope
r = cli.get('/oops?nope=1')
print(r)
r.text
```

--------------------------------

### Python DivHStacked Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a flex div with its components stacked horizontally. Accepts arbitrary positional and keyword arguments.

```python
def DivHStacked(*c, **kwargs)
    Creates a flex div with it's components stacked horizontally
```

--------------------------------

### Return Multiple FT Components and Boilerplate

Source: https://www.fastht.ml/docs/ref/handlers.html

A handler function returns multiple FT objects (Title and H1), which are automatically placed in the head and body respectively. When not an HTMX request, FastHTMl injects default HTML boilerplate, including necessary scripts.

```python
@rt('/ft2')
def get(): return Title('Foo'),H1('bar')
print(cli.get('/ft2').text)
```

--------------------------------

### Python DivFullySpaced Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a flex div where components have maximum space between them. Accepts arbitrary positional and keyword arguments.

```python
def DivFullySpaced(*c, **kwargs)
    Creates a flex div with it's components having as much space between them as possible
```

--------------------------------

### Generate URL for a nested named route

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Generates a URL for a route nested within a named mount point. The format uses a colon-separated string of names.

```python
routes = [
    Mount("/users", name="users", routes=[
        Route("/", user, name="user_list"),
        Route("/{username}", user, name="user_detail")
    ])
]

# We can use the following to return URLs...
url = request.url_for("users:user_list")
url = request.url_for("users:user_detail", username=...)
```

--------------------------------

### Add Query Parameters to Path

Source: https://www.fastht.ml/docs/apilist.txt

Appends query parameters to a given URL path. This utility function simplifies the construction of URLs with dynamic query strings.

```python
def qp(p, **kw):
    """Add parameters kw to path p"""
    pass
```

--------------------------------

### Create Navigation List Item with Divider (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a function to create a navigation list item that acts as a divider within a navigation structure. It accepts arbitrary positional and keyword arguments.

```python
def NavDividerLi(*c, **kwargs)
    Creates a navigation list item with a divider
```

--------------------------------

### HTMX Response Headers

Source: https://www.fastht.ml/docs/apilist.txt

Defines a dataclass for HTMX response headers, allowing easy management of common HTMX-related request and response attributes. It includes properties like boosted, current_url, and trigger.

```python
class HtmxHeaders:
    """HTMX response headers"""
    def __init__(self, boosted, current_url, history_restore_request, prompt, request, target, trigger_name, trigger):
        pass

    def __bool__(self):
        pass
```

--------------------------------

### Create Slider Items Container (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a function to create a container specifically for holding individual items within a slider component. It accepts arbitrary positional and keyword arguments.

```python
def SliderItems(*c, **kwargs)
    Creates a slider items container
```

--------------------------------

### Handle Invalid Query Parameter Types

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates FastHTML's behavior when an invalid value is provided for a typed query parameter. A 404 Not Found response is returned, ensuring type safety.

```python
from fastht.cli import cli

# Assumes the '/items/' route from the previous example is defined
print(cli.get('/items/?idx=g'))
```

--------------------------------

### Create EventStream Response

Source: https://www.fastht.ml/docs/apilist.txt

Generates a 'text/event-stream' response from a given stream of data. This is commonly used for implementing Server-Sent Events (SSE) for real-time updates.

```python
def EventStream(s):
    """Create a text/event-stream response from `s`"""
    pass
```

--------------------------------

### Add CSS classes using 'classAdd'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'classAdd' (or 'class_add', 'addClass', 'add_class') function adds one or more CSS classes to the selected element(s). The leading '.' for class names is optional.

```javascript
me().classAdd('active')
me().classAdd('.active')
```

--------------------------------

### HTML Form Tag Extension with Multipart Encoding

Source: https://www.fastht.ml/docs/apilist.txt

An extension for the HTML form tag (<form>) that is identical to the standard 'ft_hx' version but defaults the 'enctype' attribute to 'multipart/form-data'. This is useful for forms that handle file uploads.

```Python
@delegates(ft_hx, keep=True) def Form(*c, **kwargs)
    A Form tag; identical to plain `ft_hx` version except default `enctype='multipart/form-data'`
```

--------------------------------

### Python ModalCloseButton Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Creates a button that closes a modal using JavaScript. It accepts arbitrary positional and keyword arguments.

```python
def ModalCloseButton(*c, **kwargs)
    Creates a button that closes a modal with js
```

--------------------------------

### Fetch all todos

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Retrieves all records from the 'todos' table without any filtering. This is the default behavior before applying any .xtra() constraints.

```python
todos()
```

--------------------------------

### Section Styles Enum (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines various styling options for section components, controlling appearance and spacing. Includes options for background, padding, and removing vertical margins.

```python
from enum import Enum

class SectionT(Enum):
    """Section styles from https://franken-ui.dev/docs/section
    Members: default, muted, primary, secondary, xs, sm, lg, xl, remove_vertical
    """
    pass
```

--------------------------------

### Create dataclass from table

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Generates a Python dataclass representation of the 'user' table schema. This allows for easier data manipulation and type checking.

```python
User = users.dataclass()
```

--------------------------------

### Create Navigation List Item with Close Button (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a function to create a navigation list item that includes a close button, typically used in mobile navigation or modal contexts. It accepts arbitrary positional and keyword arguments.

```python
def NavCloseLi(*c, **kwargs)
    Creates a navigation list item with a close button
```

--------------------------------

### hx-swap: Control Content Swapping Method

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-swap` attribute controls how new content will be swapped into the DOM. It accepts various values like `innerHTML`, `outerHTML`, `beforeend`, `afterend`, etc., to define the swapping strategy.

```html
<div hx-get="/content" hx-target="#replace" hx-swap="beforeend">Append Content</div>
```

--------------------------------

### Handle File Uploads Asynchronously in Python

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates how to handle file uploads asynchronously using Starlette's `UploadFile`. The handler function is declared `async` because it uses `await` to read file content.

```python
@rt("/upload")
async def post(uf:UploadFile): return (await uf.read()).decode()

with open('../../CHANGELOG.md', 'rb') as f:
    print(cli.post('/upload', files={'uf':f}, data={'msg':'Hello'}).text[:15])
```

--------------------------------

### Handle Missing Form Data

Source: https://www.fastht.ml/docs/ref/handlers.html

Illustrates FastHTML's behavior when required form data is missing in a POST request. It shows that a 400 Bad Request error with a descriptive message is returned.

```python
r = cli.post('/profile/me', data={})
assert r.status_code == 400
print(r.text)
r
```

--------------------------------

### Iterate and Send Text Messages over WebSocket

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Receives text messages from a WebSocket client iteratively and sends back a transformed message. This showcases the use of async iterators for handling incoming messages.

```python
from starlette.websockets import WebSocket


async def app(scope, receive, send):
    websocket = WebSocket(scope=scope, receive=receive, send=send)
    await websocket.accept()
    async for message in websocket.iter_text():
        await websocket.send_text(f"Message text was: {message}")
    await websocket.close()
```

--------------------------------

### Handle OPTIONS Requests with Custom CORS Headers in FastHTML

Source: https://www.fastht.ml/docs/ref/handlers.html

This snippet shows how to configure a FastHTML application to handle OPTIONS requests for a specific route (/form-submit/{list_id}). It demonstrates setting custom headers to allow cross-origin requests (CORS) and returning a Starlette Response object with a 200 status code and these headers.

```python
from starlette.responses import Response
from starlette.requests import Request

async def homepage(req: Request):
    return Response(headers={'access-control-allow-origin': '*', 'access-control-allow-methods': 'POST', 'access-control-allow-headers': '*', 'content-length': '0', 'set-cookie': 'session_=eyJhdXRoIjogIjIwMjUtMDEtMzAgMTY6MTk6MzEuMDc4NjUwIn0=.Z5vtZA.1ooY2RCWopWAbLYDy6660g_LlHI; path=/; Max-Age=31536000; httponly; samesite=lax'})

app.route('/form-submit/{list_id}')(homepage)
```

--------------------------------

### Python Range Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines a Range component with default styling. It accepts arbitrary positional and keyword arguments.

```python
def Range(*c, **kwargs)
    A Range with default styling
```

--------------------------------

### HTML Fragment Component

Source: https://www.fastht.ml/docs/apilist.txt

Represents an empty HTML tag, commonly used as a placeholder or a container for grouping other elements without introducing semantic meaning.

```Python
class Fragment
    An empty tag, used as a container

    - def __init__(self, *c)
```

--------------------------------

### Container Width Enum (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Specifies different maximum width options for container elements, controlling the layout and responsiveness of content. These presets are based on common screen size breakpoints.

```python
from enum import Enum

class ContainerT(Enum):
    """Max width container sizes from https://franken-ui.dev/docs/container
    Members: xs, sm, lg, xl, expand
    """
    pass
```

--------------------------------

### Send Denial Response

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Allows sending a custom denial response to a WebSocket client and closing the connection.

```APIDOC
## Send Denial Response

If `websocket.close()` is called before `websocket.accept()`, a 403 error is sent. To send a custom error response, use `websocket.send_denial_response()`.

### Method Signature
`await websocket.send_denial_response(response)`

### Requirements
This method requires the ASGI server to support the WebSocket Denial Response extension. If not supported, a `RuntimeError` will be raised.
```

--------------------------------

### Default Body Wrap Function

Source: https://www.fastht.ml/docs/apilist.txt

Provides a default function for wrapping the body content of a response. It simply returns the provided content without modification.

```python
def noop_body(c, req):
    """Default Body wrap function which just returns the content"""
    pass
```

--------------------------------

### Surreal.js Event Handler for Previous Sibling

Source: https://www.fastht.ml/docs/apilist.txt

Creates an asynchronous Surreal.js script block that attaches an event handler for a given 'event' to the previous sibling element. It provides the same context variables as the 'On' function (parent, event object, target element).

```Python
def Prev(code, event)
    An async surreal.js script block event handler for `event` on previous sibling, with same vars as `On`
```

--------------------------------

### HTML Anchor Tag Extension (A) with HTMX

Source: https://www.fastht.ml/docs/apilist.txt

An extension for the HTML anchor tag (<a>) that defaults the 'href' attribute to '#' for more concise use with HTMX. It utilizes delegation to inherit properties from a base HTMX component.

```Python
@delegates(ft_hx, keep=True) def A(*c, **kwargs)
    An A tag; `href` defaults to '#' for more concise use with HTMX
```

--------------------------------

### HTML: Tag with Underscores

Source: https://www.fastht.ml/docs/ref/defining_xt_component

Represents the generated HTML tag that was defined using underscores in the Python function. FastHTML transforms the underscore in the tag name to a hyphen.

```html
<tag_with_underscores></tag_with_underscores>
```

--------------------------------

### hx-boost: Progressive Enhancement for Links and Forms

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-boost` attribute enables progressive enhancement for links and forms, improving the user experience by enabling AJAX submissions. It applies a default AJAX behavior to clickable elements and form submissions.

```html
<body hx-boost="true">
  <a href="/about">About Us</a>
  <form hx-post="/submit">
    <input type="text" name="data">
    <button type="submit">Submit</button>
  </form>
</body>
```

--------------------------------

### Delete User Record

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Deletes a user record from the database using its primary key. If the primary key is not found, a NotFoundError is raised. For compound primary keys, the entire key must be provided.

```python
users.delete('Charlie')

```

```python
try:
    users.delete('Charlies')
except NotFoundError:
    print('User not found')

```

```python
try:
    users.delete('John')
except NotFoundError:
    print('User not found')

```

```python
publications.delete(['Alma' , 2035])

```

--------------------------------

### Disable PyLance General Type Issues in VS Code

Source: https://www.fastht.ml/docs/explains/faq.html

Configures VS Code's PyLance to ignore general type issues, optional member access, wildcard imports, redeclarations, attribute access, invalid types, and assignment types in FastHTML projects. This prevents false error messages.

```json
{
    "python.analysis.diagnosticSeverityOverrides": {
        "reportGeneralTypeIssues": "none",
        "reportOptionalMemberAccess": "none",
        "reportWildcardImportFromLibrary": "none",
        "reportRedeclaration": "none",
        "reportAttributeAccessIssue": "none",
        "reportInvalidTypeForm": "none",
        "reportAssignmentType": "none"
    }
}
```

--------------------------------

### Handle Optional Form Data with Default Value

Source: https://www.fastht.ml/docs/ref/handlers.html

Shows how to define optional form data parameters with default values in a handler function. If the data is missing, the default value is used.

```python
@app.post('/pet/dog')
def pet_dog(dogname: str = None): return dogname or 'unknown name'
r = cli.post('/pet/dog', data={}).text
r
```

--------------------------------

### JSONResponse with Auto-Stringification

Source: https://www.fastht.ml/docs/apilist.txt

A JSONResponse class that mirrors Starlette's version but includes automatic stringification for non-serializable content types. This simplifies handling of complex data structures in API responses.

```python
class JSONResponse:
    """Same as starlette's version, but auto-stringifies non serializable types"""
    def render(self, content):
        pass
```

--------------------------------

### Use Enum for Type-Safe Path Parameters

Source: https://www.fastht.ml/docs/ref/handlers.html

Define an enum 'ModelName' with specific string values and use it to annotate path parameters. This ensures that only valid predefined values are accepted for the parameter.

```python
from fastht.core import str_enum, rt
from fastht.cli import cli

ModelName = str_enum('ModelName', 'alexnet', 'resnet', 'lenet')

@rt("/models/{nm}")
def get(nm: ModelName):
    return nm

print(cli.get('/models/alexnet').text)
```

--------------------------------

### Python: Retrieve User Info and Store in Session (FastHTML)

Source: https://www.fastht.ml/docs/explains/oauth.html

This snippet shows how to retrieve user information using an authorization code from GitHub and store the user ID in the session object for maintaining login state. It uses the `client.retr_info` method and `session['user_id'] = user_id` to save the ID.

```python
from fasthtml.common import *
from fasthtml.oauth import GitHubAppClient, redir_url

@app.get(auth_callback_path)
def auth_redirect(code:str, request, session):
    redir = redir_url(request, auth_callback_path)
    user_info = client.retr_info(code, redir)
    user_id = user_info[client.id_key] # get their ID
    session['user_id'] = user_id # save ID in the session
    return RedirectResponse('/', status_code=303)
```

--------------------------------

### Execute callback after 1 frame with 'rAF'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'rAF' function is an alias for `requestAnimationFrame`. It schedules a callback function to be executed after the next browser repaint, useful for synchronizing animations or DOM updates.

```javascript
rAF(e => { return e })
```

--------------------------------

### Render Dark Media CSS

Source: https://www.fastht.ml/docs/apilist.txt

Generates CSS specifically for dark mode (night mode) views. This function allows for dynamic styling adjustments to enhance user experience in low-light conditions.

```python
def dark_media(css):
    """Render dark media for night mode views"""
    pass
```

--------------------------------

### htmx JavaScript API Methods

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

Provides a collection of JavaScript methods for interacting with the htmx library. These methods allow for AJAX requests, DOM manipulation, event handling, and configuration management.

```javascript
htmx.addClass(elt, className)
htmx.ajax(type, url, target, init)
htmx.closest(elt, selector)
htmx.config
htmx.createEventSource(url)
htmx.createWebSocket(url)
htmx.defineExtension(name, callbacks)
htmx.find(selector)
htmx.findAll(elt, selector)
htmx.off(elt, evt, listener)
htmx.on(elt, evt, listener)
htmx.onLoad(callback)
htmx.parseInterval(str)
htmx.process(elt)
htmx.remove(elt)
htmx.removeClass(elt, className)
htmx.removeExtension(name)
htmx.swap(target, fragment)
htmx.takeClass(target, elt)
htmx.toggleClass(elt, className)
htmx.trigger(elt, evt, detail)
htmx.values(elt)
```

--------------------------------

### Background Styles Enum (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Defines an enum for background color variations applicable to various UI components, allowing for consistent theming and visual hierarchy.

```python
from enum import Enum

class BackgroundT(Enum):
    """Members: muted, primary, secondary, default
    """
    pass
```

--------------------------------

### Register Route Handlers with @rt Decorator

Source: https://www.fastht.ml/docs/ref/handlers.html

Demonstrates aliasing the app.route decorator to 'rt' for concise route registration. This decorator is placed before handler functions to map URL paths to specific functions.

```python
rt = app.route
```

--------------------------------

### HTMX JavaScript API

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

This section provides a comprehensive list of HTMX JavaScript functions, detailing their purpose and usage.

```APIDOC
## HTMX JavaScript API

### Description
A collection of JavaScript methods provided by the HTMX library to interact with web pages and manage AJAX requests.

### Methods

- **`htmx.addClass(element, className)`**
  - **Description**: Adds a CSS class to a specified HTML element.
  - **Parameters**:
    - `element` (HTMLElement) - The HTML element to which the class will be added.
    - `className` (string) - The CSS class name to add.

- **`htmx.ajax(config)`**
  - **Description**: Initiates an HTMX-style AJAX request.
  - **Parameters**:
    - `config` (object) - Configuration object for the AJAX request (e.g., URL, method, headers, data).

- **`htmx.closest(element, selector)`**
  - **Description**: Finds the nearest ancestor element that matches a given CSS selector.
  - **Parameters**:
    - `element` (HTMLElement) - The starting HTML element.
    - `selector` (string) - The CSS selector to match against ancestor elements.

- **`htmx.config`**
  - **Description**: An object containing the current HTMX configuration settings.

- **`htmx.createEventSource(url)`**
  - **Description**: Factory function for creating Server-Sent Events (SSE) `EventSource` objects compatible with HTMX.
  - **Parameters**:
    - `url` (string) - The URL to connect to for SSE.

- **`htmx.createWebSocket(url)`**
  - **Description**: Factory function for creating WebSocket objects compatible with HTMX.
  - **Parameters**:
    - `url` (string) - The URL for the WebSocket connection.

- **`htmx.defineExtension(name, config)`**
  - **Description**: Defines a new HTMX extension.
  - **Parameters**:
    - `name` (string) - The name of the extension.
    - `config` (object) - The configuration object for the extension.

- **`htmx.find(selector)`**
  - **Description**: Finds the first HTML element that matches a given CSS selector.
  - **Parameters**:
    - `selector` (string) - The CSS selector to find the element.

- **`htmx.findAll(element, selector)`**
  - **Description**: Finds all HTML elements within a given element that match a CSS selector.
  - **Parameters**:
    - `element` (HTMLElement) - The parent HTML element to search within.
    - `selector` (string) - The CSS selector to match elements.

- **`htmx.logAll()`**
  - **Description**: Installs a global logger to capture all HTMX events.

- **`htmx.logger`**
  - **Description**: A property that holds the currently active logger function (or `null` if none is set).

- **`htmx.off(element, event, listener)`**
  - **Description**: Removes an event listener from a specified HTML element.
  - **Parameters**:
    - `element` (HTMLElement) - The HTML element from which to remove the listener.
    - `event` (string) - The event name to detach.
    - `listener` (function) - The event listener function to remove.

- **`htmx.on(element, event, listener)`**
  - **Description**: Attaches an event listener to an HTML element and returns the listener.
  - **Parameters**:
    - `element` (HTMLElement) - The HTML element to attach the listener to.
    - `event` (string) - The event name to listen for.
    - `listener` (function) - The event listener function.

- **`htmx.onLoad(callback)`**
  - **Description**: Registers a callback function to be executed after HTMX has finished loading.
  - **Parameters**:
    - `callback` (function) - The function to execute on load completion.

- **`htmx.parseInterval(intervalString)`**
  - **Description**: Parses a string representation of a time interval into milliseconds.
  - **Parameters**:
    - `intervalString` (string) - The interval string (e.g., '1s', '500ms').

- **`htmx.process(element)`**
  - **Description**: Processes a given HTML element and its descendants, applying HTMX behavior.
  - **Parameters**:
    - `element` (HTMLElement) - The HTML element to process.

- **`htmx.remove(element)`**
  - **Description**: Removes an HTML element from the DOM.
  - **Parameters**:
    - `element` (HTMLElement) - The HTML element to remove.

- **`htmx.removeClass(element, className)`**
  - **Description**: Removes a CSS class from a specified HTML element.
  - **Parameters**:
    - `element` (HTMLElement) - The HTML element from which to remove the class.
    - `className` (string) - The CSS class name to remove.

- **`htmx.removeExtension(name)`**
  - **Description**: Removes a previously defined HTMX extension.
  - **Parameters**:
    - `name` (string) - The name of the extension to remove.

- **`htmx.swap(target, html, settleInfo)`**
  - **Description**: Swaps the content of a target element with new HTML content, including settling animations.
  - **Parameters**:
    - `target` (HTMLElement) - The target element whose content will be swapped.
    - `html` (string) - The new HTML content.
    - `settleInfo` (object) - Information related to the settling process.

- **`htmx.takeClass(fromElement, toElement, className)`**
  - **Description**: Transfers a CSS class from one element to another.
  - **Parameters**:
    - `fromElement` (HTMLElement) - The element to take the class from.
    - `toElement` (HTMLElement) - The element to apply the class to.
    - `className` (string) - The CSS class name to transfer.

- **`htmx.toggleClass(element, className)`**
  - **Description**: Toggles the presence of a CSS class on a specified HTML element.
  - **Parameters**:
    - `element` (HTMLElement) - The HTML element whose class will be toggled.
    - `className` (string) - The CSS class name to toggle.

- **`htmx.trigger(element, event, detail)`**
  - **Description**: Programmatically triggers an event on an HTML element.
  - **Parameters**:
    - `element` (HTMLElement) - The HTML element on which to trigger the event.
    - `event` (string) - The name of the event to trigger.
    - `detail` (object) - Optional detail object to pass with the event.

- **`htmx.values(element)`**
  - **Description**: Returns an object containing the input values associated with an HTML element.
  - **Parameters**:
    - `element` (HTMLElement) - The HTML element to get input values from.

### Events

- **`htmx:validation:halted`**
  - **Description**: Triggered when a request is halted due to validation errors.

- **`htmx:xhr:abort`**
  - **Description**: Triggered when an AJAX request is aborted.

- **`htmx:xhr:loadend`**
  - **Description**: Triggered when an AJAX request has finished loading.

- **`htmx:xhr:loadstart`**
  - **Description**: Triggered when an AJAX request begins loading.

- **`htmx:xhr:progress`**
  - **Description**: Triggered periodically during an AJAX request that supports progress events.
```

--------------------------------

### Surreal.js Event Handler for Specific Selector

Source: https://www.fastht.ml/docs/apilist.txt

Creates an asynchronous Surreal.js script block that attaches an event handler for a given 'event' on elements matching a selector 'sel'. It provides access to 'p' (parent), 'ev' (event object), and 'e' (target element).

```Python
def On(code, event, sel, me)
    An async surreal.js script block event handler for `event` on selector `sel,p`, making available parent `p`, event `ev`, and target `e`
```

--------------------------------

### Disable All PyLance Diagnostics in VS Code

Source: https://www.fastht.ml/docs/explains/faq.html

Completely disables all diagnostic checks performed by PyLance within a specific VS Code workspace. This is a more aggressive approach to eliminate potential false errors in FastHTML projects.

```json
{
  "python.analysis.ignore": [  "*"  ]
}
```

--------------------------------

### HTMX Response Headers

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

Reference for HTTP response headers that control HTMX behavior on the client-side, such as redirects and content swapping.

```APIDOC
## HTMX Response Headers

### Description
Reference for HTTP response headers that control HTMX behavior on the client-side, such as redirects and content swapping.

### Headers

- **HX-Location** (string) - allows you to do a client-side redirect that does not do a full page reload
- **HX-Push-Url** (string) - pushes a new url into the history stack
- **HX-Redirect** (string) - can be used to do a client-side redirect to a new location
- **HX-Refresh** (string) - if set to "true" the client-side will do a full refresh of the page
- **HX-Replace-Url** (string) - replaces the current URL in the location bar
- **HX-Reswap** (string) - allows you to specify how the response will be swapped. See [hx-swap](@/attributes/hx-swap.md) for possible values
- **HX-Retarget** (string) - a CSS selector that updates the target of the content update to a different element on the page
- **HX-Reselect** (string) - a CSS selector that allows you to choose which part of the response is used to be swapped in. Overrides an existing [`hx-select`](@/attributes/hx-select.md) on the triggering element
- **HX-Trigger** (string) - allows you to trigger client-side events
- **HX-Trigger-After-Settle** (string) - allows you to trigger client-side events after the settle step
- **HX-Trigger-After-Swap** (string) - allows you to trigger client-side events after the swap step
```

--------------------------------

### hx-on: Handle Events with Inline Scripts

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-on*` attribute allows you to handle events with inline scripts directly on elements. This provides a way to execute custom JavaScript in response to htmx events.

```html
<div hx-get="/data" hx-trigger="click" hx-on::after-request="alert('Request finished!')">Fetch Data</div>
```

--------------------------------

### Update User Record

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Updates an existing user record in the database. It accepts Python objects (classes, dataclasses) or dictionaries and uses the primary key to identify the record. The method returns the updated record instance.

```python
user.year_started = 2099
users.update(user)

```

```python
users.update(dict(name='Alma', year_started=2199, email='a@example.com'))

```

```python
users.update(name='Alma', year_started=2149)

```

```python
try:
    users.update(User(name='John', year_started=2024, email='j@example.com'))
except NotFoundError:
    print('User not found')

```

--------------------------------

### Python NavT Enum

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Enum for navigation styles, including default, primary, and secondary options.

```python
class NavT(Enum)
    Members: default, primary, secondary
```

--------------------------------

### hx-select: Select Content from Response

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-select` attribute specifies which content to swap in from an AJAX response. It allows you to target specific parts of the response HTML for DOM updates.

```html
<div hx-get="/fragment" hx-target="#container" hx-select="#inner-content">Load Fragment</div>
```

--------------------------------

### HTMX Request with Headers

Source: https://www.fastht.ml/docs/ref/handlers.html

Sends an HTMX request with a custom header ('hx-request': '1') and prints the plain text response. This is useful for triggering partial page updates in HTMX applications.

```python
hxhdr = {'headers':{'hx-request':"1"}}
print(cli.get('/ft2', **hxhdr).text)
```

--------------------------------

### Apply Classes to HTML String (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Applies specified CSS classes to an HTML string based on a provided class map and modification map. This is useful for dynamically styling HTML content. It takes the HTML string, a map of elements to classes, and a map of class modifications.

```python
def apply_classes(html_str, class_map, class_map_mods)
    Apply classes to html string
```

--------------------------------

### hx-target: Specify Swap Target Element

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-target` attribute specifies the target element where the swapped content should be placed. This allows for precise control over DOM updates.

```html
<button hx-get="/user/profile" hx-target=".user-profile-area">Load Profile</button>
```

--------------------------------

### Set Cookie in Starlette Response

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Demonstrates how to set a cookie on a Starlette response object using the set_cookie method. This method allows customization of cookie parameters like key, value, expiration, path, domain, security, httponly, and samesite.

```python
Response.set_cookie(key, value, max_age=None, expires=None, path="/", domain=None, secure=False, httponly=False, samesite="lax")
```

--------------------------------

### YouTube Video Embed Component

Source: https://www.fastht.ml/docs/apilist.txt

Embeds a YouTube video into an HTML page using its video ID. It accepts additional keyword arguments for customizing the embed, such as player options.

```Python
def YouTubeEmbed(video_id, **kwargs)
    Embed a YouTube video
```

--------------------------------

### hx-select-oob: Out-of-Band Content Selection

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-select-oob` attribute selects content to swap in from a response, but targets an element other than the primary target (out-of-band). This is useful for updating multiple elements simultaneously.

```html
<div hx-get="/update" hx-target="#main" hx-select-oob=".sidebar">Update Sidebar</div>
```

--------------------------------

### Fastlite Update Operation

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Updates an existing record in a Fastlite table. Changes can be made directly to the record object, which is then passed to the `update()` method. The method returns the updated record.

```python
user.name='Lauren'
user.active=True
users.update(user)
```

--------------------------------

### Filter todos by name using .xtra()

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Applies a filter to the 'todos' table using the .xtra() function, restricting results to records where the 'name' field is 'Charlie'. This demonstrates one-way filtering.

```python
todos.xtra(name='Charlie')
```

--------------------------------

### HTMX Request Headers

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

Reference for HTTP request headers sent by HTMX, indicating the state and context of the request.

```APIDOC
## HTMX Request Headers

### Description
Reference for HTTP request headers sent by HTMX, indicating the state and context of the request.

### Headers

- **HX-Boosted** (string) - indicates that the request is via an element using [hx-boost](@/attributes/hx-boost.md)
- **HX-Current-URL** (string) - the current URL of the browser
- **HX-History-Restore-Request** (string) - "true" if the request is for history restoration after a miss in the local history cache
- **HX-Prompt** (string) - the user response to an [hx-prompt](@/attributes/hx-prompt.md)
- **HX-Request** (string) - always "true"
- **HX-Target** (string) - the `id` of the target element if it exists
- **HX-Trigger-Name** (string) - the `name` of the triggered element if it exists
- **HX-Trigger** (string) - the `id` of the triggered element if it exists
```

--------------------------------

### Python LabelT Enum

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Enum for label styles, including primary, secondary, and destructive options.

```python
class LabelT(Enum)
    Members: primary, secondary, destructive
```

--------------------------------

### hx-history-elt: Specify Element for History Snapshot

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-history-elt` attribute specifies which element's content should be snapshotted and restored during browser history navigation (back/forward buttons). This ensures that the correct part of the UI is updated.

```html
<div hx-history-elt="#main-content">
  <!-- Content that will be managed by history -->
</div>
<div id="main-content">
  <h1>Page Title</h1>
  <p>Some content...</p>
</div>
```

--------------------------------

### Python Center Component

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Centers its content both vertically and horizontally by default. Accepts arbitrary positional and keyword arguments.

```python
def Center(*c, **kwargs)
    Centers contents both vertically and horizontally by default
```

--------------------------------

### hx-post: Issue POST Request

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-post` attribute issues an HTTP POST request to a specified URL. It is commonly used for submitting data or creating resources on the server.

```html
<form hx-post="/submit" hx-target="#response">Submit Form</form>
```

--------------------------------

### Global fade out for buttons

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Applies a fade-out effect to all button elements on the page immediately when the script runs.

```html
<script>
  // Run immediately, for every <button> globally!
  (async () => {
    any("button").fadeOut()
  })()
</script>
```

--------------------------------

### Execute callback during idle time with 'rIC'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'rIC' function is an alias for `requestIdleCallback`. It schedules a callback to be executed during periods when the browser's main thread is idle, making it suitable for non-critical background tasks.

```javascript
rIC(e => { return e })
```

--------------------------------

### Convert Snake Case to Hyphens

Source: https://www.fastht.ml/docs/apilist.txt

Transforms a string from snake_case format to hyphenated and capitalized format. This is useful for converting programming identifiers into presentable labels or URLs.

```python
def snake2hyphens(s):
    """Convert `s` from snake case to hyphenated and capitalised"""
    pass
```

--------------------------------

### Handle click event and fade out

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Attaches a click event listener to an element. When clicked, it fades out the target element. The event object is used to reference the target.

```javascript
me().on("click", ev => me(ev).fadeOut() )
```

--------------------------------

### Stop event propagation and prevent default with 'halt'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'halt' function is a wrapper for `stopPropagation` and `preventDefault`. When called with an event object, it prevents the event from bubbling up the DOM tree and cancels any default browser actions.

```javascript
halt(event)
```

--------------------------------

### Fade in elements with 'fadeIn'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'fadeIn' function animates the opacity of an element from zero to one. It's typically used on elements that are initially hidden (e.g., with `opacity: 0`). It also supports optional duration and callback arguments.

```javascript
me().fadeIn()
me().fadeIn(ev => { alert("Faded in!") }, 3000)
```

--------------------------------

### HTML Style Tag Extension (No Escape)

Source: https://www.fastht.ml/docs/apilist.txt

An extension for the HTML style tag (<style>) that does not escape the provided CSS content. This allows embedding raw CSS directly.

```Python
@delegates(ft_html, keep=True) def Style(*c, **kwargs)
    A Style tag that doesn't escape its code
```

--------------------------------

### Stream Request Body in Starlette (Python)

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Illustrates how to stream the request body in a Starlette application without loading it entirely into memory. It iterates over the request stream, concatenates the chunks, and sends the accumulated body as a plain text response. Subsequent calls to body parsing methods will fail after streaming. Requires the 'starlette' library.

```python
from starlette.requests import Request
from starlette.responses import Response

async def app(scope, receive, send):
    assert scope['type'] == 'http'
    request = Request(scope, receive)
    body = b''
    async for chunk in request.stream():
        body += chunk
    response = Response(body, media_type='text/plain')
    await response(scope, receive, send)
```

--------------------------------

### MonsterUI Enum Variations

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Provides a base `VEnum` class for creating enumerated types with enhanced string conversion and addition capabilities, useful for defining component variants or options.

```python
class VEnum(Enum):
    def __str__(self):
        pass
    def __add__(self, other):
        pass
    def __radd__(self, other):
        pass

```

--------------------------------

### APIRouter Route Addition

Source: https://www.fastht.ml/docs/apilist.txt

Adds a route to an APIRouter instance. This method is designed to be called directly on the router instance to register endpoints with specified paths, methods, and configurations.

```python
def __call__(self, path, methods, name=None, include_in_schema=True, body_wrap=None):
    """Add a route at `path`"""
    pass
```

--------------------------------

### Wait for next frame with 'tick'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'tick' function is an `await`-able version of `requestAnimationFrame`. It pauses execution until the next browser paint, ensuring that DOM changes are applied and rendered before continuing.

```javascript
await tick()
```

--------------------------------

### hx-confirm: Confirm User Actions Before Request

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-confirm` attribute allows you to display a JavaScript `confirm()` dialog box before issuing an AJAX request. This is useful for critical actions that require user confirmation, preventing accidental submissions.

```html
<button hx-delete="/items/1" hx-confirm="Are you sure you want to delete this item?">Delete Item</button>
```

--------------------------------

### hx-push-url: Update Browser History

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-push-url` attribute pushes a URL into the browser's location bar, enabling the creation of browser history. This attribute is useful for creating single-page application-like navigation.

```html
<button hx-get="/page/2" hx-push-url="true">Next Page</button>
```

--------------------------------

### hx-indicator: Show Loading Indicator During Request

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-indicator` attribute specifies an element that should have the `htmx-request` class applied to it while an AJAX request is in flight. This is commonly used to display loading spinners or other visual feedback.

```html
<div hx-get="/data" hx-indicator="#loading-spinner">Fetch Data</div>
<span id="loading-spinner" class="htmx-indicator">Loading...</span>
```

--------------------------------

### JavaScript Execution with Parameter Escaping

Source: https://www.fastht.ml/docs/apilist.txt

A utility function to execute JavaScript code. It can auto-generate an ID for the script tag if needed and safely escapes any provided keyword parameters before injecting them into the JavaScript.

```Python
def run_js(js, id, **kw)
    Run `js` script, auto-generating `id` based on name of caller if needed, and js-escaping any `kw` params
```

--------------------------------

### HTML Script Tag Extension (No Escape)

Source: https://www.fastht.ml/docs/apilist.txt

An extension for the HTML script tag (<script>) that does not escape the provided code content. This allows embedding raw JavaScript directly.

```Python
@delegates(ft_html, keep=True) def Script(code, **kwargs)
    A Script tag that doesn't escape its code
```

--------------------------------

### HTML: Attribute with Special Characters

Source: https://www.fastht.ml/docs/ref/defining_xt_component

The generated HTML output for a tag with an attribute containing special characters. The attribute name 'notNormal:arg:with_varing@symbols!' is correctly rendered as it was passed via a dictionary in the Python code.

```html
<div normal-arg="normal stuff" notnormal:arg:with_varing@symbols!="123"></div>
```

--------------------------------

### CSS Variable Replacement

Source: https://www.fastht.ml/docs/apilist.txt

Replaces CSS variables (e.g., `var(--prefix-variable)`) within a CSS string with provided values. It matches variables based on a specified prefix.

```Python
def replace_css_vars(css, pre, **kwargs)
    Replace `var(--)` CSS variables with `kwargs` if name prefix matches `pre`
```

--------------------------------

### HTML Checkbox Extension with Label and Hidden Input

Source: https://www.fastht.ml/docs/apilist.txt

An extension to create an HTML checkbox input, optionally wrapped within a label. It includes a preceding hidden input field with a matching name for easier form handling, especially with frameworks.

```Python
@delegates(ft_hx, keep=True) def CheckboxX(checked, label, value, id, name, **kwargs)
    A Checkbox optionally inside a Label, preceded by a `Hidden` with matching name
```

--------------------------------

### HTML: Tag with '@' Symbol

Source: https://www.fastht.ml/docs/ref/defining_xt_component

Shows the resulting HTML tag which includes the '@' symbol. This tag was generated from a Python function where the '@' symbol was handled by FastHTML's naming conversion.

```html
<tag-with-@symbol></tag-with-@symbol>
```

--------------------------------

### Fade out elements with 'fadeOut'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'fadeOut' function animates the opacity of an element to zero, optionally removing it from the DOM afterwards. It can also accept a duration and a callback function to execute after the animation completes.

```javascript
me().fadeOut()
me().fadeOut(ev => { alert("Faded out!") }, 3000)
```

--------------------------------

### hx-put: Issue PUT Requests

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-put` attribute is used to issue an HTTP PUT request to a specified URL. This is generally used for updating or replacing entire resources on the server.

```html
<button hx-put="/items/1" hx-vals='{"status": "completed"}'>Mark as Completed</button>
```

--------------------------------

### Convert Form Data to Dictionary

Source: https://www.fastht.ml/docs/apilist.txt

Converts Starlette form data, typically received from HTTP requests, into a Python dictionary. This simplifies data access and manipulation within the application.

```python
def form2dict(form):
    """Convert starlette form data to a dict"""
    pass
```

--------------------------------

### Manipulate element styles using 'styles'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'styles' function allows adding, modifying, or removing inline styles. It accepts a string of CSS properties or an object of key-value pairs. Setting a style property to null removes it.

```javascript
me().styles('color: red')
me().styles({ 'color':'red', 'background':'blue' })
me().styles({ 'background':null })
```

--------------------------------

### Disable element interactions using 'disable'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'disable' function provides a convenient way to disable click, key, and submit events on an element, acting as a simpler alternative to detaching listeners.

```javascript
me().disable()
```

--------------------------------

### Accessing HTMX Request Header in FastHTML

Source: https://www.fastht.ml/docs/ref/handlers.html

Shows how to access HTMX-specific headers in FastHTML. It illustrates two methods: using the special 'htmx' parameter and using a parameter annotated with 'HtmxHeaders'. Both methods provide access to HTMX-related request information, specifically the 'HX-Request' header.

```python
@app.get("/hxtest")
def _(htmx): return htmx.request
print(cli.get('/hxtest', headers={'HX-Request':'1'}).text)

@app.get("/hxtest2")
def _(foo:HtmxHeaders, req): return foo.request
print(cli.get('/hxtest2', headers={'HX-Request':'1'}).text)
```

--------------------------------

### HTML Hidden Input Tag Extension

Source: https://www.fastht.ml/docs/apilist.txt

An extension to create an HTML input tag of type 'hidden'. It takes 'value', 'id', and other keyword arguments for customization.

```Python
@delegates(ft_hx, keep=True) def Hidden(value, id, **kwargs)
    An Input of type 'hidden'
```

--------------------------------

### Add class to multiple elements

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Adds a CSS class to all elements matching a selector. Ensures an array is returned, even if no elements match.

```javascript
any("button").classAdd('red')
```

--------------------------------

### Check non-matching record existence

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Illustrates that records not matching the .xtra() filter will not be found using the 'in' operator or direct indexing.

```python
1 in todos, 2 in todos
```

--------------------------------

### Parse Starlette Form Data Safely

Source: https://www.fastht.ml/docs/apilist.txt

Safely parses Starlette form data, handling potential errors that can occur with empty multipart forms. This ensures robustness when processing form submissions.

```python
def parse_form(req):
    """Starlette errors on empty multipart forms, so this checks for that situation"""
    pass
```

--------------------------------

### Python: Attribute with Special Characters

Source: https://www.fastht.ml/docs/ref/defining_xt_component

Illustrates how to define an HTML attribute containing special characters (like ': ' and '@') that are invalid in Python variable names. This is achieved by passing the attribute and its value as a dictionary item using keyword argument unpacking.

```python
Div(normal_arg='normal stuff',**{'notNormal:arg:with_varing@symbols!':'123'})
```

--------------------------------

### hx-include: Include Additional Data in Requests

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-include` attribute allows you to include additional data in AJAX requests from elements that are not part of the initiating form. This is useful for sending context or related data with a request.

```html
<input type="hidden" name="userId" value="456">
<button hx-post="/update" hx-include="[name='userId']">Update</button>
```

--------------------------------

### hx-swap-oob: Out-of-Band Element Swapping

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-swap-oob` attribute marks an element within the response to be swapped out-of-band, meaning it's not part of the main target swap. This allows for updating elements outside the immediate scope of the request.

```html
<div hx-get="/combined" hx-target="#main-content" hx-swap-oob="#header">Update Header</div>
```

--------------------------------

### Fastlite Record Existence Check

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Checks if a record with a specific primary key exists in a Fastlite table using the `in` operator.

```python
1 in users
```

--------------------------------

### Setting innerText of an element

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Shows how to set the innerText of an HTML element. This property reflects the rendered text content, considering CSS styling.

```javascript
me().innerText = "hello world"
```

--------------------------------

### Python ListT Enum

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Enum for list styles using Tailwind CSS. Supports disc, circle, square, decimal, hyphen, bullet, divider, and striped options.

```python
class ListT(Enum)
    List styles using Tailwind CSS
    Members: disc, circle, square, decimal, hyphen, bullet, divider, striped
```

--------------------------------

### Check for Record Existence

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Checks if a record with a specific primary key exists within a table. This works for both single and compound primary keys, accepting lists or tuples for the latter.

```python
'Alma' in users, 'John' in users

```

```python
['Alma', 2019] in publications

```

```python
('John', 1967) in publications

```

--------------------------------

### Python: Define Tag with '@' Symbol

Source: https://www.fastht.ml/docs/ref/defining_xt_component

Demonstrates creating a Python function for an HTML tag containing the '@' symbol. This is necessary because '@' is not a valid character in Python function names. FastHTML handles the conversion to a valid HTML tag name.

```python
def tag_with_AtSymbol(*c, target_id=None, **kwargs):
    return ft_hx('tag-with-@symbol', *c, target_id=target_id, **kwargs)

Tag_with_AtSymbol()
```

--------------------------------

### Python FlexT Enum

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

Enum for Flexbox modifiers using Tailwind CSS. Includes various alignment and wrapping options.

```python
class FlexT(Enum)
    Flexbox modifiers using Tailwind CSS
    Members: block, inline, left, center, right, between, around, stretch, top, middle, bottom, row, row_reverse, column, column_reverse, nowrap, wrap, wrap_reverse
```

--------------------------------

### hx-patch: Issue PATCH Requests

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-patch` attribute is used to issue an HTTP PATCH request to a specified URL. This is typically used for partial updates of resources on the server.

```html
<button hx-patch="/items/1" hx-vals='{"price": 100}'>Update Price</button>
```

--------------------------------

### Non-Breaking Space Entity

Source: https://www.fastht.ml/docs/apilist.txt

Represents a non-breaking space HTML entity ('&nbsp;').

```Python
def Nbsp()
    A non-breaking space
```

--------------------------------

### Fastlite Delete Operation

Source: https://www.fastht.ml/docs/ref/concise_guide.html

Deletes a record from a Fastlite table using its primary key. The `delete()` method takes the primary key value as an argument.

```python
users.delete(user.id)
```

--------------------------------

### Delay execution with 'sleep'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'sleep' function is an asynchronous utility, similar to `setTimeout`, that pauses execution for a specified duration. It's useful for creating animation timelines or sequencing asynchronous operations.

```javascript
await sleep(1000, ev => { alert(ev) })
```

--------------------------------

### Divider Styles Enum (Python)

Source: https://raw.githubusercontent.com/AnswerDotAI/MonsterUI/refs/heads/main/docs/apilist.txt

An enum defining different styles for divider components, used to visually separate content sections. Options include icon dividers, standard dividers, and vertical dividers.

```python
from enum import Enum

class DividerT(Enum):
    """Divider Styles from https://franken-ui.dev/docs/divider
    Members: icon, sm, vertical
    """
    pass
```

--------------------------------

### Fade out element on click

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Attaches a click event listener to an element that causes the element to fade out when clicked.

```html
<div>I fade out and remove myself.
  <script>me().on("click", ev => { me(ev).fadeOut() })</script>
</div>
```

--------------------------------

### Accessing HTMX Headers

Source: https://www.fastht.ml/docs/ref/handlers.html

Explains how to access HTMX-specific headers within handler functions, using either the special `htmx` parameter or a parameter annotated with `HtmxHeaders`.

```APIDOC
## GET /hxtest

### Description
This endpoint demonstrates accessing HTMX headers using the `htmx` parameter.

### Method
GET

### Endpoint
/hxtest

### Parameters
#### Path Parameters
None

#### Query Parameters
None

#### Request Body
None

### Request Example
```python
print(cli.get('/hxtest', headers={'HX-Request':'1'}).text)
```

### Response
#### Success Response (200)
- **htmx.request** (any) - Represents the HTMX request context, useful for accessing HTMX headers.

#### Response Example
```json
1
```

## GET /hxtest2

### Description
This endpoint demonstrates accessing HTMX headers using a parameter annotated with `HtmxHeaders`.

### Method
GET

### Endpoint
/hxtest2

### Parameters
#### Path Parameters
None

#### Query Parameters
None

#### Request Body
None

### Request Example
```python
print(cli.get('/hxtest2', headers={'HX-Request':'1'}).text)
```

### Response
#### Success Response (200)
- **foo.request** (any) - Represents the HTMX request context, accessible via the `HtmxHeaders` annotation.

#### Response Example
```json
1
```
```

--------------------------------

### Convert Datetime String

Source: https://www.fastht.ml/docs/apilist.txt

A utility function to parse a string representation into a datetime object. This is commonly used for handling date inputs from requests or external data sources.

```python
def parsed_date(s):
    """Convert `s` to a datetime"""
    pass
```

--------------------------------

### Python: Define Tag with Underscores

Source: https://www.fastht.ml/docs/ref/defining_xt_component

Defines a Python function to create an HTML tag with an underscore in its name. FastHTML automatically converts underscores to hyphens in the generated tag. This handles cases where underscores are needed but are not valid in Python function names.

```python
def tag_with_underscores(*c, target_id=None, **kwargs):
    return ft_hx('tag_with_underscores', *c, target_id=target_id, **kwargs)

tag_with_underscores()
```

--------------------------------

### hx-params: Filter Parameters for Requests

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-params` attribute filters the parameters that will be submitted with an AJAX request. You can specify which parameters to include or exclude based on their names.

```html
<form hx-post="/submit" hx-params="include: [name='firstName'], exclude: [name='lastName']">
  <input type="text" name="firstName">
  <input type="text" name="lastName">
  <button type="submit">Submit</button>
</form>
```

--------------------------------

### Delete record matching filter

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Deletes a record using its ID, where the ID matches the current .xtra() filter. This operation should succeed.

```python
todos.delete(ct.id)
```

--------------------------------

### hx-delete: Issue DELETE Requests

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-delete` attribute is used to issue an HTTP DELETE request to a specified URL. This is commonly used for removing resources from the server via AJAX.

```html
<button hx-delete="/users/123">Delete User</button>
```

--------------------------------

### hx-sync: Synchronize Requests

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-sync` attribute controls how AJAX requests made by different htmx elements are synchronized. This can prevent race conditions or ensure that requests are processed in a specific order.

```html
<button hx-get="/action1" hx-sync="abort: .other-action">Action 1</button>
<button class="other-action" hx-get="/action2" hx-sync="abort: .action1">Action 2</button>
```

--------------------------------

### hx-request: Configure Request Aspects

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-request` attribute is a versatile attribute used to configure various aspects of an AJAX request, such as the target element for swapping content or the method of the request.

```html
<div hx-get="/data" hx-request='{"target": "#results", "swap": "innerHTML"}'>
  Fetch Data
</div>
```

--------------------------------

### Toggle CSS classes using 'classToggle'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'classToggle' (or 'class_toggle', 'toggleClass', 'toggle_class') function toggles the presence of one or more CSS classes on the selected element(s).

```javascript
me().classToggle('active')
```

--------------------------------

### Accessing filtered record by index

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Attempts to access a record by its index after filtering has been applied. A NotFoundError is expected if the record does not match the filter.

```python
try: todos[2]
except NotFoundError: print('Record not found')
```

--------------------------------

### Remove elements using 'remove'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'remove' function removes the selected element(s) from the DOM. It can be called on a single element or multiple elements selected using 'any()'.

```javascript
me().remove()
any('button').remove()
```

--------------------------------

### String Formatting: Double Braces Conversion

Source: https://www.fastht.ml/docs/apilist.txt

Utility function to convert single curly braces to double curly braces within a string, specifically when they are adjacent to special characters or newlines. This is useful for preparing strings for certain templating engines.

```Python
def double_braces(s)
    Convert single braces to double braces if next to special chars or newline
```

--------------------------------

### Set attribute for single element

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

Sets an HTML attribute on a single selected element. The attribute name and value are provided as arguments.

```javascript
me().attribute('active', true)
```

--------------------------------

### hx-headers: Add Custom Request Headers

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-headers` attribute allows you to add custom HTTP headers to AJAX requests. This is useful for sending authentication tokens, API keys, or other metadata with your requests.

```html
<div hx-get="/api/data" hx-headers='{"X-API-Key": "your-api-key"}'>
  Load Data
</div>
```

--------------------------------

### hx-replace-url: Replace Browser Location URL

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-replace-url` attribute replaces the URL in the browser's location bar with a new URL without performing a full page navigation. This is useful for updating the URL to reflect the current state of the application.

```html
<a href="/page/2" hx-get="/api/page/2" hx-replace-url="true">Next Page</a>
```

--------------------------------

### HTMX CSS Classes

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

Reference for CSS classes applied by HTMX to elements during various stages of a request lifecycle.

```APIDOC
## HTMX CSS Classes

### Description
Reference for CSS classes applied by HTMX to elements during various stages of a request lifecycle.

### Classes

- **htmx-added** - Applied to a new piece of content before it is swapped, removed after it is settled.
- **htmx-indicator** - A dynamically generated class that will toggle visible (opacity:1) when a `htmx-request` class is present
- **htmx-request** - Applied to either the element or the element specified with [`hx-indicator`](@/attributes/hx-indicator.md) while a request is ongoing
- **htmx-settling** - Applied to a target after content is swapped, removed after it is settled. The duration can be modified via [`hx-swap`](@/attributes/hx-swap.md).
- **htmx-swapping** - Applied to a target before any content is swapped, removed after it is swapped. The duration can be modified via [`hx-swap`](@/attributes/hx-swap.md).
```

--------------------------------

### Check record existence with filtered 'in' operator

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Demonstrates the 'in' operator's behavior after .xtra() filtering. Only records that match the filter criteria will evaluate to True.

```python
ct.id in todos
```

--------------------------------

### Remove all event listeners using 'offAll'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'offAll' function removes all event listeners attached to the selected element(s).

```javascript
me().offAll()
```

--------------------------------

### Flatten Tuples

Source: https://www.fastht.ml/docs/apilist.txt

Flattens nested tuples into a single tuple. Similar to `flat_xt`, this function simplifies nested tuple structures.

```python
def flat_tuple(o):
    """Flatten lists"""
    pass
```

--------------------------------

### Update record matching filter

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Updates a record where the ID matches the current .xtra() filter. This operation should succeed.

```python
todos.update(Todo(id=3, title='Finish development of FastHTML', detail=None, status='closed', name='Charlie'))
```

--------------------------------

### Delete record with incorrect filter

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Attempts to delete a record by ID, but the ID does not match the current .xtra() filter. This will raise a NotFoundError.

```python
try: todos.delete(1)
except NotFoundError as e: print('Record not updated')
```

--------------------------------

### String Formatting: Undouble Braces Conversion

Source: https://www.fastht.ml/docs/apilist.txt

Utility function to convert double curly braces back to single curly braces within a string, particularly when they are adjacent to special characters or newlines. This is the inverse operation of 'double_braces'.

```Python
def undouble_braces(s)
    Convert double braces to single braces if next to special chars or newline
```

--------------------------------

### Parse Date Objects from Query Parameters

Source: https://www.fastht.ml/docs/ref/handlers.html

Annotate handler function parameters with a 'parsed_date' type (assuming it's a custom type or alias for dateutil parsing). FastHTML uses dateutil.parser to automatically parse date strings from query parameters.

```python
from fastht.app import app
from fastht.cli import cli
from fastht.core import parsed_date # Assuming parsed_date is available or an alias

@app.get("/datie/")
def _(d: parsed_date):
    return str(d)

date_str = "17th of May, 2024, 2p"
print(cli.get(f'/datie/?d={date_str}').text)
```

--------------------------------

### hx-inherit: Enable Attribute Inheritance

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-inherit` attribute enables automatic inheritance of htmx attributes for child nodes, overriding the default behavior where inheritance might be disabled. This is useful for applying consistent behavior across nested elements.

```html
<div hx-trigger="click" hx-inherit="true">
  <button>Click Me</button> <!-- Inherits hx-trigger -->
</div>
```

--------------------------------

### Delete Cookie in Starlette Response

Source: https://gist.githubusercontent.com/jph00/809e4a4808d4510be0e3dc9565e9cbd3/raw/9b717589ca44cedc8aaf00b2b8cacef922964c0f/starlette-sml

Illustrates how to manually expire a previously set cookie using the delete_cookie method in Starlette. This is useful for invalidating cookies on the client side.

```python
Response.delete_cookie(key, path='/', domain=None)
```

--------------------------------

### hx-trigger: Define Request Triggering Event

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-trigger` attribute specifies the event that triggers an AJAX request. It can be a standard DOM event (like `click`, `change`) or a custom event.

```html
<input type="text" hx-get="/search" hx-trigger="keyup changed delay:500ms" hx-target="#results">
```

--------------------------------

### Update record with incorrect filter

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Attempts to update a record with an ID that does not match the current .xtra() filter. This will result in a NotFoundError.

```python
try: todos.update(Todo(id=1, title='Finish MiniDataAPI Spec', status='closed', name='Braden'))
except NotFoundError as e: print('Record not updated')
```

--------------------------------

### Flatten Lists

Source: https://www.fastht.ml/docs/apilist.txt

Flattens a list of lists into a single, one-dimensional list. This utility is helpful for simplifying nested data structures.

```python
def flat_xt(lst):
    """Flatten lists"""
    pass
```

--------------------------------

### hx-disabled-elt: Disable Elements During Request

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-disabled-elt` attribute adds the `disabled` attribute to specified elements while an AJAX request is in flight. This provides visual feedback to the user that an action is in progress and prevents multiple submissions.

```html
<button hx-post="/save" hx-disabled-elt="#submit-button">Save Changes</button>
<button id="submit-button">Save</button>
```

--------------------------------

### Update record with ignored name change

Source: https://www.fastht.ml/docs/explains/minidataapi.html

Attempts to update an inserted record by changing its 'name' field. The .xtra() filter enforces the original name, ignoring the attempted change.

```python
ct.name = 'Braden'
todos.update(ct)
```

--------------------------------

### Remove event listeners using 'off'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'off' function wraps `removeEventListener` to detach event listeners. It requires the event type and the specific function to remove.

```javascript
me().off('click', fn)
```

--------------------------------

### Remove CSS classes using 'classRemove'

Source: https://raw.githubusercontent.com/AnswerDotAI/surreal/main/README

The 'classRemove' (or 'class_remove', 'removeClass', 'remove_class') function removes one or more CSS classes from the selected element(s).

```javascript
me().classRemove('active')
```

--------------------------------

### hx-preserve: Keep Elements Unchanged Between Requests

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-preserve` attribute specifies elements that should remain unchanged between htmx requests. This is useful for elements that maintain their state, like input fields or timers.

```html
<div hx-get="/refresh" hx-swap="outerHTML">
  <input type="text" name="user_input" hx-preserve="true" value="initial">
</div>
```

--------------------------------

### hx-validate: Force Element Validation

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-validate` attribute forces elements to validate themselves before an AJAX request is made. This ensures that form data is valid before submission, enhancing data integrity.

```html
<form hx-post="/submit" hx-validate="true">
  <input type="email" name="email" required>
  <button type="submit">Submit</button>
</form>
```

--------------------------------

### hx-encoding: Change Request Encoding Type

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-encoding` attribute allows you to change the request encoding type for form submissions. The default is `application/x-www-form-urlencoded`, but you can specify other types like `multipart/form-data` for file uploads.

```html
<form hx-post="/upload" hx-encoding="multipart/form-data">
  <input type="file" name="file">
  <button type="submit">Upload</button>
</form>
```

--------------------------------

### hx-vals: Include JSON Values in Request

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-vals` attribute adds extra values in JSON format to be submitted with an AJAX request. This is useful for sending additional data beyond form inputs.

```html
<button hx-post="/update" hx-vals='{"id": 123, "status": "active"}'>Update Status</button>
```

--------------------------------

### Revoke Google OAuth Token Programmatically

Source: https://www.fastht.ml/docs/explains/oauth.html

This Python function demonstrates how to revoke a Google OAuth token programmatically. It sends a POST request to the Google revoke URL with the token as a parameter and returns True if the revocation was successful (status code 200). This functionality is not built into FastHTML clients.

```python
import requests

auth_revoke_url = "https://accounts.google.com/o/oauth2/revoke"
def revoke_token(token):
    response = requests.post(auth_revoke_url, params={"token": token})
    return response.status_code == 200 # True if successful
```

--------------------------------

### hx-disinherit: Control Attribute Inheritance

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-disinherit` attribute allows you to control and disable the automatic inheritance of htmx attributes for child nodes. This gives finer-grained control over attribute propagation within nested elements.

```html
<div hx-trigger="click" hx-disinherit="*">
  <button hx-get="/child-data">Get Child Data</button> <!-- Will not inherit hx-trigger -->
</div>
```

--------------------------------

### hx-history: Prevent Sensitive Data in History Cache

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-history` attribute is used to prevent sensitive data from being saved to the htmx history cache. This is important for security when dealing with user-specific information.

```html
<div hx-get="/profile" hx-history="false">
  User Profile
</div>
```

--------------------------------

### hx-disable: Disable Htmx Processing

Source: https://raw.githubusercontent.com/bigskysoftware/htmx/master/www/content/reference

The `hx-disable` attribute prevents htmx from processing AJAX requests for the element it is applied to, as well as any child elements. This is useful for disabling AJAX behavior on specific parts of a page.

```html
<div hx-disable>
  <button hx-get="/data">Fetch Data</button> <!-- This request will not be made -->
</div>
```